\hypertarget{Leds_8cpp}{}\doxysection{Vortex\+Engine/src/\+Leds/\+Leds.cpp File Reference}
\label{Leds_8cpp}\index{VortexEngine/src/Leds/Leds.cpp@{VortexEngine/src/Leds/Leds.cpp}}
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include \char`\"{}Led\+Stash.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Leds.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Time/\+Time\+Control.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Modes/\+Modes.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Vortex\+Config.\+h\char`\"{}}\newline
{\ttfamily \#include $<$Arduino.\+h$>$}\newline
Include dependency graph for Leds.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Leds_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{Leds_8cpp_a5f55b07707df2f2cf371f707207ed508}{LED\+\_\+\+DATA\+\_\+\+PIN}}~4
\item 
\#define \mbox{\hyperlink{Leds_8cpp_a8cf19b18ebffbab3acfa2b66393b13bb}{POWER\+\_\+\+LED\+\_\+\+PIN}}~7
\item 
\#define \mbox{\hyperlink{Leds_8cpp_a34eaa201c82dae7ea43ef4cee2d71c9f}{CPU\+\_\+\+FREQUENCY\+\_\+\+MHZ}}~48
\item 
\#define \mbox{\hyperlink{Leds_8cpp_af95d489fe0bb0556e3df21a7c04d5239}{NS\+\_\+\+TO\+\_\+\+CYCLES}}(ns)~(((ns) $\ast$ \mbox{\hyperlink{Leds_8cpp_a34eaa201c82dae7ea43ef4cee2d71c9f}{CPU\+\_\+\+FREQUENCY\+\_\+\+MHZ}}) / 1000)
\item 
\#define \mbox{\hyperlink{Leds_8cpp_a1b15781780446cc96c3529e67ffd155b}{T0H}}~1
\item 
\#define \mbox{\hyperlink{Leds_8cpp_aaa6df9b03f5c83a82da353df9bb19a60}{T0L}}~50
\item 
\#define \mbox{\hyperlink{Leds_8cpp_ae0de4e06e642a9dfa3d6f273a5c8e23b}{T1H}}~50
\item 
\#define \mbox{\hyperlink{Leds_8cpp_aad296a317c61b4367f690d958fb2ee12}{T1L}}~1
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{Leds_8cpp_a1329fc7cfd5815ba771fd11480a8e399}{delay\+\_\+loop}} (uint32\+\_\+t loop)
\item 
void \mbox{\hyperlink{Leds_8cpp_a67b6d1e3a22f8dea5f35ccdac81a314e}{send\+Bit}} (bool bit\+Val)
\item 
void \mbox{\hyperlink{Leds_8cpp_afad95f5d1fd42e37f764663e127cf7cf}{send\+Byte}} (unsigned char byte)
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{Leds_8cpp_a34eaa201c82dae7ea43ef4cee2d71c9f}\label{Leds_8cpp_a34eaa201c82dae7ea43ef4cee2d71c9f}} 
\index{Leds.cpp@{Leds.cpp}!CPU\_FREQUENCY\_MHZ@{CPU\_FREQUENCY\_MHZ}}
\index{CPU\_FREQUENCY\_MHZ@{CPU\_FREQUENCY\_MHZ}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{CPU\_FREQUENCY\_MHZ}{CPU\_FREQUENCY\_MHZ}}
{\footnotesize\ttfamily \#define CPU\+\_\+\+FREQUENCY\+\_\+\+MHZ~48}



Definition at line 262 of file Leds.\+cpp.

\mbox{\Hypertarget{Leds_8cpp_a5f55b07707df2f2cf371f707207ed508}\label{Leds_8cpp_a5f55b07707df2f2cf371f707207ed508}} 
\index{Leds.cpp@{Leds.cpp}!LED\_DATA\_PIN@{LED\_DATA\_PIN}}
\index{LED\_DATA\_PIN@{LED\_DATA\_PIN}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{LED\_DATA\_PIN}{LED\_DATA\_PIN}}
{\footnotesize\ttfamily \#define LED\+\_\+\+DATA\+\_\+\+PIN~4}



Definition at line 17 of file Leds.\+cpp.

\mbox{\Hypertarget{Leds_8cpp_af95d489fe0bb0556e3df21a7c04d5239}\label{Leds_8cpp_af95d489fe0bb0556e3df21a7c04d5239}} 
\index{Leds.cpp@{Leds.cpp}!NS\_TO\_CYCLES@{NS\_TO\_CYCLES}}
\index{NS\_TO\_CYCLES@{NS\_TO\_CYCLES}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{NS\_TO\_CYCLES}{NS\_TO\_CYCLES}}
{\footnotesize\ttfamily \#define NS\+\_\+\+TO\+\_\+\+CYCLES(\begin{DoxyParamCaption}\item[{}]{ns }\end{DoxyParamCaption})~(((ns) $\ast$ \mbox{\hyperlink{Leds_8cpp_a34eaa201c82dae7ea43ef4cee2d71c9f}{CPU\+\_\+\+FREQUENCY\+\_\+\+MHZ}}) / 1000)}



Definition at line 263 of file Leds.\+cpp.

\mbox{\Hypertarget{Leds_8cpp_a8cf19b18ebffbab3acfa2b66393b13bb}\label{Leds_8cpp_a8cf19b18ebffbab3acfa2b66393b13bb}} 
\index{Leds.cpp@{Leds.cpp}!POWER\_LED\_PIN@{POWER\_LED\_PIN}}
\index{POWER\_LED\_PIN@{POWER\_LED\_PIN}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{POWER\_LED\_PIN}{POWER\_LED\_PIN}}
{\footnotesize\ttfamily \#define POWER\+\_\+\+LED\+\_\+\+PIN~7}



Definition at line 18 of file Leds.\+cpp.

\mbox{\Hypertarget{Leds_8cpp_a1b15781780446cc96c3529e67ffd155b}\label{Leds_8cpp_a1b15781780446cc96c3529e67ffd155b}} 
\index{Leds.cpp@{Leds.cpp}!T0H@{T0H}}
\index{T0H@{T0H}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{T0H}{T0H}}
{\footnotesize\ttfamily \#define T0H~1}



Definition at line 266 of file Leds.\+cpp.

\mbox{\Hypertarget{Leds_8cpp_aaa6df9b03f5c83a82da353df9bb19a60}\label{Leds_8cpp_aaa6df9b03f5c83a82da353df9bb19a60}} 
\index{Leds.cpp@{Leds.cpp}!T0L@{T0L}}
\index{T0L@{T0L}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{T0L}{T0L}}
{\footnotesize\ttfamily \#define T0L~50}



Definition at line 267 of file Leds.\+cpp.

\mbox{\Hypertarget{Leds_8cpp_ae0de4e06e642a9dfa3d6f273a5c8e23b}\label{Leds_8cpp_ae0de4e06e642a9dfa3d6f273a5c8e23b}} 
\index{Leds.cpp@{Leds.cpp}!T1H@{T1H}}
\index{T1H@{T1H}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{T1H}{T1H}}
{\footnotesize\ttfamily \#define T1H~50}



Definition at line 268 of file Leds.\+cpp.

\mbox{\Hypertarget{Leds_8cpp_aad296a317c61b4367f690d958fb2ee12}\label{Leds_8cpp_aad296a317c61b4367f690d958fb2ee12}} 
\index{Leds.cpp@{Leds.cpp}!T1L@{T1L}}
\index{T1L@{T1L}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{T1L}{T1L}}
{\footnotesize\ttfamily \#define T1L~1}



Definition at line 269 of file Leds.\+cpp.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{Leds_8cpp_a1329fc7cfd5815ba771fd11480a8e399}\label{Leds_8cpp_a1329fc7cfd5815ba771fd11480a8e399}} 
\index{Leds.cpp@{Leds.cpp}!delay\_loop@{delay\_loop}}
\index{delay\_loop@{delay\_loop}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{delay\_loop()}{delay\_loop()}}
{\footnotesize\ttfamily void delay\+\_\+loop (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{loop }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 271 of file Leds.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{272 \{}
\DoxyCodeLine{273   \textcolor{keywordflow}{while} (loop-\/-\/) \{}
\DoxyCodeLine{274     \_\_asm\_\_ \_\_volatile\_\_(\textcolor{stringliteral}{"{}nop"{}});}
\DoxyCodeLine{275   \}}
\DoxyCodeLine{276 \}}

\end{DoxyCode}


Referenced by send\+Bit().

\mbox{\Hypertarget{Leds_8cpp_a67b6d1e3a22f8dea5f35ccdac81a314e}\label{Leds_8cpp_a67b6d1e3a22f8dea5f35ccdac81a314e}} 
\index{Leds.cpp@{Leds.cpp}!sendBit@{sendBit}}
\index{sendBit@{sendBit}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{sendBit()}{sendBit()}}
{\footnotesize\ttfamily void send\+Bit (\begin{DoxyParamCaption}\item[{bool}]{bit\+Val }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 278 of file Leds.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{279 \{}
\DoxyCodeLine{280   uint32\_t pinMask = (1ul << g\_APinDescription[\mbox{\hyperlink{Leds_8cpp_a5f55b07707df2f2cf371f707207ed508}{LED\_DATA\_PIN}}].ulPin);}
\DoxyCodeLine{281   \textcolor{keyword}{volatile} uint32\_t *outSet = \&(PORT-\/>Group[g\_APinDescription[\mbox{\hyperlink{Leds_8cpp_a5f55b07707df2f2cf371f707207ed508}{LED\_DATA\_PIN}}].ulPort].OUTSET.reg);}
\DoxyCodeLine{282   \textcolor{keyword}{volatile} uint32\_t *outClr = \&(PORT-\/>Group[g\_APinDescription[\mbox{\hyperlink{Leds_8cpp_a5f55b07707df2f2cf371f707207ed508}{LED\_DATA\_PIN}}].ulPort].OUTCLR.reg);}
\DoxyCodeLine{283   \textcolor{keywordflow}{if} (bitVal) \{ \textcolor{comment}{// Send 1 bit}}
\DoxyCodeLine{284     *outSet = pinMask; \textcolor{comment}{// Set the output bit}}
\DoxyCodeLine{285     \mbox{\hyperlink{Leds_8cpp_a1329fc7cfd5815ba771fd11480a8e399}{delay\_loop}}(\mbox{\hyperlink{Leds_8cpp_af95d489fe0bb0556e3df21a7c04d5239}{NS\_TO\_CYCLES}}(\mbox{\hyperlink{Leds_8cpp_ae0de4e06e642a9dfa3d6f273a5c8e23b}{T1H}})); \textcolor{comment}{// Delay for T1H}}
\DoxyCodeLine{286     *outClr = pinMask; \textcolor{comment}{// Clear the output bit}}
\DoxyCodeLine{287     \mbox{\hyperlink{Leds_8cpp_a1329fc7cfd5815ba771fd11480a8e399}{delay\_loop}}(\mbox{\hyperlink{Leds_8cpp_af95d489fe0bb0556e3df21a7c04d5239}{NS\_TO\_CYCLES}}(\mbox{\hyperlink{Leds_8cpp_aaa6df9b03f5c83a82da353df9bb19a60}{T0L}})); \textcolor{comment}{// Delay for T0L (since T1L can lead to early latch)}}
\DoxyCodeLine{288   \} \textcolor{keywordflow}{else} \{ \textcolor{comment}{// Send 0 bit}}
\DoxyCodeLine{289     *outSet = pinMask; \textcolor{comment}{// Set the output bit}}
\DoxyCodeLine{290     \mbox{\hyperlink{Leds_8cpp_a1329fc7cfd5815ba771fd11480a8e399}{delay\_loop}}(\mbox{\hyperlink{Leds_8cpp_af95d489fe0bb0556e3df21a7c04d5239}{NS\_TO\_CYCLES}}(\mbox{\hyperlink{Leds_8cpp_a1b15781780446cc96c3529e67ffd155b}{T0H}})); \textcolor{comment}{// Delay for T0H}}
\DoxyCodeLine{291     *outClr = pinMask; \textcolor{comment}{// Clear the output bit}}
\DoxyCodeLine{292     \mbox{\hyperlink{Leds_8cpp_a1329fc7cfd5815ba771fd11480a8e399}{delay\_loop}}(\mbox{\hyperlink{Leds_8cpp_af95d489fe0bb0556e3df21a7c04d5239}{NS\_TO\_CYCLES}}(\mbox{\hyperlink{Leds_8cpp_aad296a317c61b4367f690d958fb2ee12}{T1L}})); \textcolor{comment}{// Delay for T1L}}
\DoxyCodeLine{293   \}}
\DoxyCodeLine{294 \}}

\end{DoxyCode}


References delay\+\_\+loop(), LED\+\_\+\+DATA\+\_\+\+PIN, NS\+\_\+\+TO\+\_\+\+CYCLES, T0H, T0L, T1H, and T1L.



Referenced by send\+Byte().

\mbox{\Hypertarget{Leds_8cpp_afad95f5d1fd42e37f764663e127cf7cf}\label{Leds_8cpp_afad95f5d1fd42e37f764663e127cf7cf}} 
\index{Leds.cpp@{Leds.cpp}!sendByte@{sendByte}}
\index{sendByte@{sendByte}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{sendByte()}{sendByte()}}
{\footnotesize\ttfamily void send\+Byte (\begin{DoxyParamCaption}\item[{unsigned char}]{byte }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 296 of file Leds.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{297 \{}
\DoxyCodeLine{298   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} bit = 0; bit < 8; bit++) \{}
\DoxyCodeLine{299     \mbox{\hyperlink{Leds_8cpp_a67b6d1e3a22f8dea5f35ccdac81a314e}{sendBit}}(bitRead(\textcolor{keywordtype}{byte}, 7));                \textcolor{comment}{// Neopixel wants bit in highest-\/to-\/lowest order}}
\DoxyCodeLine{300     \textcolor{comment}{// so send highest bit (bit \#7 in an 8-\/bit byte since they start at 0)}}
\DoxyCodeLine{301     \textcolor{keywordtype}{byte} <<= 1;                                    \textcolor{comment}{// and then shift left so bit 6 moves into 7, 5 moves into 6, etc}}
\DoxyCodeLine{302   \}}
\DoxyCodeLine{303 \}}

\end{DoxyCode}


References send\+Bit().



Referenced by Leds\+::update().


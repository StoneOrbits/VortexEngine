\hypertarget{classTimer}{}\doxysection{Timer Class Reference}
\label{classTimer}\index{Timer@{Timer}}


{\ttfamily \#include $<$Timer.\+h$>$}



Collaboration diagram for Timer\+:
% FIG 0
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classTimer_acc72f00e49555e460ccfb0a1f1243d3c}{Timer}} (\mbox{\hyperlink{classVortexEngine}{Vortex\+Engine}} \&engine)
\item 
\mbox{\hyperlink{classTimer_a14fa469c4c295c5fa6e66a4ad1092146}{$\sim$\+Timer}} ()
\item 
void \mbox{\hyperlink{classTimer_a86ea4092d795f381126ca491df5d065b}{init}} (uint8\+\_\+t flags=\mbox{\hyperlink{Timer_8h_a0559e5671895fc55b82c39d7ed88365b}{T\+I\+M\+E\+R\+\_\+\+F\+L\+A\+G\+S\+\_\+\+N\+O\+NE}}, uint8\+\_\+t alarm1=0, uint8\+\_\+t alarm2=0, uint8\+\_\+t alarm3=0, uint8\+\_\+t alarm4=0)
\item 
\mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{add\+Alarm}} (uint32\+\_\+t interval)
\item 
void \mbox{\hyperlink{classTimer_ae2bb6568a306973c24c38bb98d928d1a}{restart}} (uint32\+\_\+t offset=0)
\item 
void \mbox{\hyperlink{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}{start}} (uint32\+\_\+t offset=0)
\item 
void \mbox{\hyperlink{classTimer_a9020542d73357a4eef512eefaf57524b}{reset}} ()
\item 
bool \mbox{\hyperlink{classTimer_aa31e5d7b7bfc90ae46c63496c3f8a86d}{on\+Start}} () const
\item 
bool \mbox{\hyperlink{classTimer_a24cdf190924a1465b5b1e40a5d369eb5}{on\+End}} () const
\item 
\mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} \mbox{\hyperlink{classTimer_a8a6d962c92c8e2e641254ea28e1f0443}{alarm}} ()
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_ad8defecc8a0848ebe5caba05326dfc15}{num\+Alarms}} () const
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_aa959b6b96fbccfb1d0bfc3174e95ada6}{cur\+Alarm}} () const
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_a35f384d70298841a8826720b1a57e255}{start\+Time}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}{get\+Start\+Time}} () const
\item 
void \mbox{\hyperlink{classTimer_a93776cc4842b649e7d30c39a0afe6ce7}{set\+Start\+Time}} (uint32\+\_\+t)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classVortexEngine}{Vortex\+Engine}} \& \mbox{\hyperlink{classTimer_ab268f74a1622be40e4d11042d2b1ae51}{m\+\_\+engine}}
\item 
uint32\+\_\+t $\ast$ \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\+\_\+alarms}}
\item 
uint8\+\_\+t \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\+\_\+num\+Alarms}}
\item 
\mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\+\_\+cur\+Alarm}}
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\+\_\+start\+Time}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 27 of file Timer.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classTimer_acc72f00e49555e460ccfb0a1f1243d3c}\label{classTimer_acc72f00e49555e460ccfb0a1f1243d3c}} 
\index{Timer@{Timer}!Timer@{Timer}}
\index{Timer@{Timer}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{Timer()}{Timer()}}
{\footnotesize\ttfamily Timer\+::\+Timer (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classVortexEngine}{Vortex\+Engine}} \&}]{engine }\end{DoxyParamCaption})}



Definition at line 10 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{10                                  :}
\DoxyCodeLine{11   \mbox{\hyperlink{classTimer_ab268f74a1622be40e4d11042d2b1ae51}{m\_engine}}(engine),}
\DoxyCodeLine{12   \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}(\textcolor{keyword}{nullptr}),}
\DoxyCodeLine{13   \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}(0),}
\DoxyCodeLine{14   \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}}(0),}
\DoxyCodeLine{15   \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}}(0)}
\DoxyCodeLine{16 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{17   , m\_simStartTime(0)}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{19 \{}
\DoxyCodeLine{20 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classTimer_a14fa469c4c295c5fa6e66a4ad1092146}\label{classTimer_a14fa469c4c295c5fa6e66a4ad1092146}} 
\index{Timer@{Timer}!````~Timer@{$\sim$Timer}}
\index{````~Timer@{$\sim$Timer}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{$\sim$Timer()}{~Timer()}}
{\footnotesize\ttfamily Timer\+::$\sim$\+Timer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 22 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{23 \{}
\DoxyCodeLine{24   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}) \{}
\DoxyCodeLine{25     \mbox{\hyperlink{Memory_8h_a126ac2e4edac2f4fb68713991db133d5}{vfree}}(\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}});}
\DoxyCodeLine{26     \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{27   \}}
\DoxyCodeLine{28 \}}

\end{DoxyCode}


References m\+\_\+alarms, and vfree.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}\label{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}} 
\index{Timer@{Timer}!addAlarm@{addAlarm}}
\index{addAlarm@{addAlarm}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{addAlarm()}{addAlarm()}}
{\footnotesize\ttfamily \mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} Timer\+::add\+Alarm (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{interval }\end{DoxyParamCaption})}



Definition at line 40 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{41 \{}
\DoxyCodeLine{42   \textcolor{keywordtype}{void} *temp = \mbox{\hyperlink{Memory_8h_acda02cb380efa63fa2205776f6a78e52}{vrealloc}}(\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}, \textcolor{keyword}{sizeof}(uint32\_t) * (\mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}} + 1));}
\DoxyCodeLine{43   \textcolor{keywordflow}{if} (!temp) \{}
\DoxyCodeLine{44     \mbox{\hyperlink{Log_8h_a804825e040f1cce9e3d2bb53c4858710}{ERROR\_OUT\_OF\_MEMORY}}();}
\DoxyCodeLine{45     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{46   \}}
\DoxyCodeLine{47   \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} = (uint32\_t *)temp;}
\DoxyCodeLine{48   \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}[\mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}] = interval;}
\DoxyCodeLine{49   \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}++;}
\DoxyCodeLine{50 \}}

\end{DoxyCode}


References E\+R\+R\+O\+R\+\_\+\+O\+U\+T\+\_\+\+O\+F\+\_\+\+M\+E\+M\+O\+RY, m\+\_\+alarms, m\+\_\+num\+Alarms, and vrealloc.



Referenced by Pulsish\+Pattern\+::init(), Lighthouse\+Pattern\+::init(), Back\+Strobe\+Pattern\+::init(), Zigzag\+Pattern\+::init(), Hue\+Shift\+Pattern\+::init(), Drip\+Morph\+Pattern\+::init(), Blink\+Step\+Pattern\+::init(), Sequenced\+Pattern\+::init(), and init().

\mbox{\Hypertarget{classTimer_a8a6d962c92c8e2e641254ea28e1f0443}\label{classTimer_a8a6d962c92c8e2e641254ea28e1f0443}} 
\index{Timer@{Timer}!alarm@{alarm}}
\index{alarm@{alarm}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{alarm()}{alarm()}}
{\footnotesize\ttfamily \mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} Timer\+::alarm (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 112 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{113 \{}
\DoxyCodeLine{114   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}} || !\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} || \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} == \mbox{\hyperlink{Timer_8h_a892c7442d151d1188e5c936961e3e3db}{ALARM\_NONE}}) \{}
\DoxyCodeLine{115     \textcolor{keywordflow}{return} \mbox{\hyperlink{Timer_8h_a892c7442d151d1188e5c936961e3e3db}{ALARM\_NONE}};}
\DoxyCodeLine{116   \}}
\DoxyCodeLine{117   uint32\_t now = \mbox{\hyperlink{classTimer_ab268f74a1622be40e4d11042d2b1ae51}{m\_engine}}.\mbox{\hyperlink{classVortexEngine_a3f383e032325c07495d21474f497d2f6}{time}}().\mbox{\hyperlink{classTime_a4928281e63a820cd8f0b00b53c6e4587}{getCurtime}}();}
\DoxyCodeLine{118   \textcolor{comment}{// time since start (forward or backwards)}}
\DoxyCodeLine{119   int32\_t timeDiff = (int32\_t)(int64\_t)(now -\/ \mbox{\hyperlink{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}{getStartTime}}());}
\DoxyCodeLine{120   \textcolor{keywordflow}{if} (timeDiff < 0) \{}
\DoxyCodeLine{121     \textcolor{keywordflow}{return} \mbox{\hyperlink{Timer_8h_a892c7442d151d1188e5c936961e3e3db}{ALARM\_NONE}};}
\DoxyCodeLine{122   \}}
\DoxyCodeLine{123   \textcolor{comment}{// if no time passed it's first alarm that is starting}}
\DoxyCodeLine{124   \textcolor{keywordflow}{if} (timeDiff == 0) \{}
\DoxyCodeLine{125     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{126   \}}
\DoxyCodeLine{127   uint32\_t alarmTime = \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}[\mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}}];}
\DoxyCodeLine{128   \textcolor{comment}{// if the current alarm duration is not a multiple of the current tick}}
\DoxyCodeLine{129   \textcolor{keywordflow}{if} (alarmTime \&\& (timeDiff \% alarmTime) != 0) \{}
\DoxyCodeLine{130     \textcolor{comment}{// then the alarm was not hit}}
\DoxyCodeLine{131     \textcolor{keywordflow}{return} \mbox{\hyperlink{Timer_8h_a892c7442d151d1188e5c936961e3e3db}{ALARM\_NONE}};}
\DoxyCodeLine{132   \}}
\DoxyCodeLine{133   \textcolor{comment}{// update the start time of the timer}}
\DoxyCodeLine{134   \mbox{\hyperlink{classTimer_a93776cc4842b649e7d30c39a0afe6ce7}{setStartTime}}(now);}
\DoxyCodeLine{135   \textcolor{comment}{// increment current alarm then return that id}}
\DoxyCodeLine{136   \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} = (\mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{AlarmID}})((\mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} + 1) \% \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}});}
\DoxyCodeLine{137   \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}};}
\DoxyCodeLine{138 \}}

\end{DoxyCode}


References A\+L\+A\+R\+M\+\_\+\+N\+O\+NE, Time\+::get\+Curtime(), get\+Start\+Time(), m\+\_\+alarms, m\+\_\+cur\+Alarm, m\+\_\+engine, m\+\_\+num\+Alarms, set\+Start\+Time(), and Vortex\+Engine\+::time().



Referenced by Basic\+Pattern\+::play(), Pulsish\+Pattern\+::play(), Lighthouse\+Pattern\+::play(), Back\+Strobe\+Pattern\+::play(), Zigzag\+Pattern\+::play(), Hue\+Shift\+Pattern\+::play(), Drip\+Morph\+Pattern\+::play(), Blink\+Step\+Pattern\+::play(), and Sequenced\+Pattern\+::play().

\mbox{\Hypertarget{classTimer_aa959b6b96fbccfb1d0bfc3174e95ada6}\label{classTimer_aa959b6b96fbccfb1d0bfc3174e95ada6}} 
\index{Timer@{Timer}!curAlarm@{curAlarm}}
\index{curAlarm@{curAlarm}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{curAlarm()}{curAlarm()}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::cur\+Alarm (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 64 of file Timer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{64 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}}; \}}

\end{DoxyCode}


References m\+\_\+cur\+Alarm.

\mbox{\Hypertarget{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}\label{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}} 
\index{Timer@{Timer}!getStartTime@{getStartTime}}
\index{getStartTime@{getStartTime}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{getStartTime()}{getStartTime()}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::get\+Start\+Time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 140 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{141 \{}
\DoxyCodeLine{142 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{143   \textcolor{comment}{// timers use a different 'start time' tracker in simulations so that}}
\DoxyCodeLine{144   \textcolor{comment}{// the startTime remains unchanged when the simulation ends}}
\DoxyCodeLine{145   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classTimer_ab268f74a1622be40e4d11042d2b1ae51}{m\_engine}}.\mbox{\hyperlink{classVortexEngine_a3f383e032325c07495d21474f497d2f6}{time}}().isSimulation() \&\& m\_simStartTime) \{}
\DoxyCodeLine{146     \textcolor{keywordflow}{return} m\_simStartTime;}
\DoxyCodeLine{147   \}}
\DoxyCodeLine{148 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{149   \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}};}
\DoxyCodeLine{150 \}}

\end{DoxyCode}


References m\+\_\+engine, m\+\_\+start\+Time, and Vortex\+Engine\+::time().



Referenced by alarm(), on\+End(), and on\+Start().

\mbox{\Hypertarget{classTimer_a86ea4092d795f381126ca491df5d065b}\label{classTimer_a86ea4092d795f381126ca491df5d065b}} 
\index{Timer@{Timer}!init@{init}}
\index{init@{init}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void Timer\+::init (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{flags = {\ttfamily \mbox{\hyperlink{Timer_8h_a0559e5671895fc55b82c39d7ed88365b}{T\+I\+M\+E\+R\+\_\+\+F\+L\+A\+G\+S\+\_\+\+N\+O\+NE}}},  }\item[{uint8\+\_\+t}]{alarm1 = {\ttfamily 0},  }\item[{uint8\+\_\+t}]{alarm2 = {\ttfamily 0},  }\item[{uint8\+\_\+t}]{alarm3 = {\ttfamily 0},  }\item[{uint8\+\_\+t}]{alarm4 = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 30 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{31 \{}
\DoxyCodeLine{32   \mbox{\hyperlink{classTimer_a9020542d73357a4eef512eefaf57524b}{reset}}();}
\DoxyCodeLine{33   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a8f4d97c03a636db209c56b5501a8c9e4}{TIMER\_ALARM\_MASK}}) >= \mbox{\hyperlink{Timer_8h_a101b629cc707630d6764404dd60a927d}{TIMER\_1\_ALARM}}) \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{addAlarm}}(alarm1);}
\DoxyCodeLine{34   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a8f4d97c03a636db209c56b5501a8c9e4}{TIMER\_ALARM\_MASK}}) >= \mbox{\hyperlink{Timer_8h_aedab36a618788c7a1d37154bf64da995}{TIMER\_2\_ALARMS}}) \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{addAlarm}}(alarm2);}
\DoxyCodeLine{35   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a8f4d97c03a636db209c56b5501a8c9e4}{TIMER\_ALARM\_MASK}}) >= \mbox{\hyperlink{Timer_8h_a1a0d8d6bb8cfe9ef6d710389b22623a0}{TIMER\_3\_ALARMS}}) \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{addAlarm}}(alarm3);}
\DoxyCodeLine{36   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a8f4d97c03a636db209c56b5501a8c9e4}{TIMER\_ALARM\_MASK}}) >= \mbox{\hyperlink{Timer_8h_ac43533068b15bc2a9c566b8f4f5694a3}{TIMER\_4\_ALARMS}}) \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{addAlarm}}(alarm4);}
\DoxyCodeLine{37   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a0534322773d9344f3d4c858e409ef175}{TIMER\_START}}) != 0) \mbox{\hyperlink{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}{start}}();}
\DoxyCodeLine{38 \}}

\end{DoxyCode}


References add\+Alarm(), reset(), start(), T\+I\+M\+E\+R\+\_\+1\+\_\+\+A\+L\+A\+RM, T\+I\+M\+E\+R\+\_\+2\+\_\+\+A\+L\+A\+R\+MS, T\+I\+M\+E\+R\+\_\+3\+\_\+\+A\+L\+A\+R\+MS, T\+I\+M\+E\+R\+\_\+4\+\_\+\+A\+L\+A\+R\+MS, T\+I\+M\+E\+R\+\_\+\+A\+L\+A\+R\+M\+\_\+\+M\+A\+SK, and T\+I\+M\+E\+R\+\_\+\+S\+T\+A\+RT.



Referenced by Basic\+Pattern\+::next\+State().

\mbox{\Hypertarget{classTimer_ad8defecc8a0848ebe5caba05326dfc15}\label{classTimer_ad8defecc8a0848ebe5caba05326dfc15}} 
\index{Timer@{Timer}!numAlarms@{numAlarms}}
\index{numAlarms@{numAlarms}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{numAlarms()}{numAlarms()}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::num\+Alarms (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 63 of file Timer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{63 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}; \}}

\end{DoxyCode}


References m\+\_\+num\+Alarms.

\mbox{\Hypertarget{classTimer_a24cdf190924a1465b5b1e40a5d369eb5}\label{classTimer_a24cdf190924a1465b5b1e40a5d369eb5}} 
\index{Timer@{Timer}!onEnd@{onEnd}}
\index{onEnd@{onEnd}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{onEnd()}{onEnd()}}
{\footnotesize\ttfamily bool Timer\+::on\+End (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 88 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{89 \{}
\DoxyCodeLine{90   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} || !\mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}) \{}
\DoxyCodeLine{91     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{92   \}}
\DoxyCodeLine{93   \textcolor{comment}{// the tick for when this alarm triggers}}
\DoxyCodeLine{94   uint32\_t alarmTime = \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}[\mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}}];}
\DoxyCodeLine{95   \textcolor{keywordflow}{if} (alarmTime <= 1) \{}
\DoxyCodeLine{96     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{97   \}}
\DoxyCodeLine{98   \textcolor{comment}{// grab curTime}}
\DoxyCodeLine{99   uint32\_t now = \mbox{\hyperlink{classTimer_ab268f74a1622be40e4d11042d2b1ae51}{m\_engine}}.\mbox{\hyperlink{classVortexEngine_a3f383e032325c07495d21474f497d2f6}{time}}().\mbox{\hyperlink{classTime_a4928281e63a820cd8f0b00b53c6e4587}{getCurtime}}();}
\DoxyCodeLine{100   \textcolor{comment}{// get the start time of the timer}}
\DoxyCodeLine{101   uint32\_t \mbox{\hyperlink{classTimer_a35f384d70298841a8826720b1a57e255}{startTime}} = \mbox{\hyperlink{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}{getStartTime}}();}
\DoxyCodeLine{102   \textcolor{comment}{// time since start (forward or backwards)}}
\DoxyCodeLine{103   int32\_t timeDiff = (int32\_t)(int64\_t)(now -\/ \mbox{\hyperlink{classTimer_a35f384d70298841a8826720b1a57e255}{startTime}});}
\DoxyCodeLine{104   \textcolor{comment}{// if no time since start then this definitely isn't the end}}
\DoxyCodeLine{105   \textcolor{keywordflow}{if} (!timeDiff) \{}
\DoxyCodeLine{106     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{107   \}}
\DoxyCodeLine{108   \textcolor{comment}{// check if timediff is multiple of last tick in alarm}}
\DoxyCodeLine{109   \textcolor{keywordflow}{return} ((timeDiff \% (alarmTime -\/ 1)) == 0);}
\DoxyCodeLine{110 \}}

\end{DoxyCode}


References Time\+::get\+Curtime(), get\+Start\+Time(), m\+\_\+alarms, m\+\_\+cur\+Alarm, m\+\_\+engine, m\+\_\+num\+Alarms, start\+Time(), and Vortex\+Engine\+::time().

\mbox{\Hypertarget{classTimer_aa31e5d7b7bfc90ae46c63496c3f8a86d}\label{classTimer_aa31e5d7b7bfc90ae46c63496c3f8a86d}} 
\index{Timer@{Timer}!onStart@{onStart}}
\index{onStart@{onStart}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{onStart()}{onStart()}}
{\footnotesize\ttfamily bool Timer\+::on\+Start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 80 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{81 \{}
\DoxyCodeLine{82   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classTimer_ab268f74a1622be40e4d11042d2b1ae51}{m\_engine}}.\mbox{\hyperlink{classVortexEngine_a3f383e032325c07495d21474f497d2f6}{time}}().\mbox{\hyperlink{classTime_a4928281e63a820cd8f0b00b53c6e4587}{getCurtime}}() == \mbox{\hyperlink{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}{getStartTime}}() \&\& \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} == 0) \{}
\DoxyCodeLine{83     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{84   \}}
\DoxyCodeLine{85   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{86 \}}

\end{DoxyCode}


References Time\+::get\+Curtime(), get\+Start\+Time(), m\+\_\+cur\+Alarm, m\+\_\+engine, and Vortex\+Engine\+::time().

\mbox{\Hypertarget{classTimer_a9020542d73357a4eef512eefaf57524b}\label{classTimer_a9020542d73357a4eef512eefaf57524b}} 
\index{Timer@{Timer}!reset@{reset}}
\index{reset@{reset}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void Timer\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 68 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{69 \{}
\DoxyCodeLine{70   \mbox{\hyperlink{Memory_8h_a126ac2e4edac2f4fb68713991db133d5}{vfree}}(\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}});}
\DoxyCodeLine{71   \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{72   \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}} = 0;}
\DoxyCodeLine{73   \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} = 0;}
\DoxyCodeLine{74   \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}} = 0;}
\DoxyCodeLine{75 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{76   m\_simStartTime = 0;}
\DoxyCodeLine{77 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{78 \}}

\end{DoxyCode}


References m\+\_\+alarms, m\+\_\+cur\+Alarm, m\+\_\+num\+Alarms, m\+\_\+start\+Time, and vfree.



Referenced by Pulsish\+Pattern\+::init(), Lighthouse\+Pattern\+::init(), Back\+Strobe\+Pattern\+::init(), Zigzag\+Pattern\+::init(), Hue\+Shift\+Pattern\+::init(), Drip\+Morph\+Pattern\+::init(), Blink\+Step\+Pattern\+::init(), Sequenced\+Pattern\+::init(), and init().

\mbox{\Hypertarget{classTimer_ae2bb6568a306973c24c38bb98d928d1a}\label{classTimer_ae2bb6568a306973c24c38bb98d928d1a}} 
\index{Timer@{Timer}!restart@{restart}}
\index{restart@{restart}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{restart()}{restart()}}
{\footnotesize\ttfamily void Timer\+::restart (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{offset = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 52 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{53 \{}
\DoxyCodeLine{54   \mbox{\hyperlink{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}{start}}(offset);}
\DoxyCodeLine{55   \textcolor{comment}{// reset the current alarm}}
\DoxyCodeLine{56   \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} = 0;}
\DoxyCodeLine{57 \}}

\end{DoxyCode}


References m\+\_\+cur\+Alarm, and start().

\mbox{\Hypertarget{classTimer_a93776cc4842b649e7d30c39a0afe6ce7}\label{classTimer_a93776cc4842b649e7d30c39a0afe6ce7}} 
\index{Timer@{Timer}!setStartTime@{setStartTime}}
\index{setStartTime@{setStartTime}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{setStartTime()}{setStartTime()}}
{\footnotesize\ttfamily void Timer\+::set\+Start\+Time (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{tick }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 152 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{153 \{}
\DoxyCodeLine{154 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{155   \textcolor{comment}{// if this timer is running in a simulation then don't actually update}}
\DoxyCodeLine{156   \textcolor{comment}{// the starttime, instead update the simulation start time so that when}}
\DoxyCodeLine{157   \textcolor{comment}{// the simulation ends the startTime will not have changed at all}}
\DoxyCodeLine{158   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classTimer_ab268f74a1622be40e4d11042d2b1ae51}{m\_engine}}.\mbox{\hyperlink{classVortexEngine_a3f383e032325c07495d21474f497d2f6}{time}}().isSimulation()) \{}
\DoxyCodeLine{159     \textcolor{comment}{// move the sim start time}}
\DoxyCodeLine{160     m\_simStartTime = tick;}
\DoxyCodeLine{161     \textcolor{keywordflow}{return};}
\DoxyCodeLine{162   \}}
\DoxyCodeLine{163 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{164   \textcolor{comment}{// move the start time forward}}
\DoxyCodeLine{165   \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}} = tick;}
\DoxyCodeLine{166 \}}

\end{DoxyCode}


References m\+\_\+engine, m\+\_\+start\+Time, and Vortex\+Engine\+::time().



Referenced by alarm().

\mbox{\Hypertarget{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}\label{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}} 
\index{Timer@{Timer}!start@{start}}
\index{start@{start}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily void Timer\+::start (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{offset = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 59 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{60 \{}
\DoxyCodeLine{61   \textcolor{comment}{// reset the start time}}
\DoxyCodeLine{62   \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}} = \mbox{\hyperlink{classTimer_ab268f74a1622be40e4d11042d2b1ae51}{m\_engine}}.\mbox{\hyperlink{classVortexEngine_a3f383e032325c07495d21474f497d2f6}{time}}().\mbox{\hyperlink{classTime_a4928281e63a820cd8f0b00b53c6e4587}{getCurtime}}() + offset;}
\DoxyCodeLine{63 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{64   m\_simStartTime = \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}};}
\DoxyCodeLine{65 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{66 \}}

\end{DoxyCode}


References Time\+::get\+Curtime(), m\+\_\+engine, m\+\_\+start\+Time, and Vortex\+Engine\+::time().



Referenced by Pulsish\+Pattern\+::init(), Lighthouse\+Pattern\+::init(), Back\+Strobe\+Pattern\+::init(), Zigzag\+Pattern\+::init(), Hue\+Shift\+Pattern\+::init(), Drip\+Morph\+Pattern\+::init(), Blink\+Step\+Pattern\+::init(), Sequenced\+Pattern\+::init(), init(), and restart().

\mbox{\Hypertarget{classTimer_a35f384d70298841a8826720b1a57e255}\label{classTimer_a35f384d70298841a8826720b1a57e255}} 
\index{Timer@{Timer}!startTime@{startTime}}
\index{startTime@{startTime}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{startTime()}{startTime()}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::start\+Time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 67 of file Timer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{67 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}}; \}}

\end{DoxyCode}


References m\+\_\+start\+Time.



Referenced by on\+End().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}\label{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}} 
\index{Timer@{Timer}!m\_alarms@{m\_alarms}}
\index{m\_alarms@{m\_alarms}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{m\_alarms}{m\_alarms}}
{\footnotesize\ttfamily uint32\+\_\+t$\ast$ Timer\+::m\+\_\+alarms\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 82 of file Timer.\+h.



Referenced by add\+Alarm(), alarm(), on\+End(), reset(), and $\sim$\+Timer().

\mbox{\Hypertarget{classTimer_aac562ec662bac7536addaabbf8d44d27}\label{classTimer_aac562ec662bac7536addaabbf8d44d27}} 
\index{Timer@{Timer}!m\_curAlarm@{m\_curAlarm}}
\index{m\_curAlarm@{m\_curAlarm}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{m\_curAlarm}{m\_curAlarm}}
{\footnotesize\ttfamily \mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} Timer\+::m\+\_\+cur\+Alarm\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 85 of file Timer.\+h.



Referenced by alarm(), cur\+Alarm(), on\+End(), on\+Start(), reset(), and restart().

\mbox{\Hypertarget{classTimer_ab268f74a1622be40e4d11042d2b1ae51}\label{classTimer_ab268f74a1622be40e4d11042d2b1ae51}} 
\index{Timer@{Timer}!m\_engine@{m\_engine}}
\index{m\_engine@{m\_engine}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{m\_engine}{m\_engine}}
{\footnotesize\ttfamily \mbox{\hyperlink{classVortexEngine}{Vortex\+Engine}}\& Timer\+::m\+\_\+engine\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 75 of file Timer.\+h.



Referenced by alarm(), get\+Start\+Time(), on\+End(), on\+Start(), set\+Start\+Time(), and start().

\mbox{\Hypertarget{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}\label{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}} 
\index{Timer@{Timer}!m\_numAlarms@{m\_numAlarms}}
\index{m\_numAlarms@{m\_numAlarms}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{m\_numAlarms}{m\_numAlarms}}
{\footnotesize\ttfamily uint8\+\_\+t Timer\+::m\+\_\+num\+Alarms\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 83 of file Timer.\+h.



Referenced by add\+Alarm(), alarm(), num\+Alarms(), on\+End(), and reset().

\mbox{\Hypertarget{classTimer_a934e0795404c28155a496127297154ce}\label{classTimer_a934e0795404c28155a496127297154ce}} 
\index{Timer@{Timer}!m\_startTime@{m\_startTime}}
\index{m\_startTime@{m\_startTime}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{m\_startTime}{m\_startTime}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::m\+\_\+start\+Time\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 87 of file Timer.\+h.



Referenced by get\+Start\+Time(), reset(), set\+Start\+Time(), start(), and start\+Time().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Vortex\+Engine/src/\+Time/\mbox{\hyperlink{Timer_8h}{Timer.\+h}}\item 
Vortex\+Engine/src/\+Time/\mbox{\hyperlink{Timer_8cpp}{Timer.\+cpp}}\end{DoxyCompactItemize}

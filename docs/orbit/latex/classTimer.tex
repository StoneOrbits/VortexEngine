\hypertarget{classTimer}{}\doxysection{Timer Class Reference}
\label{classTimer}\index{Timer@{Timer}}


{\ttfamily \#include $<$Timer.\+h$>$}

\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classTimer_a5f16e8da27d2a5a5242dead46de05d97}{Timer}} ()
\item 
\mbox{\hyperlink{classTimer_a14fa469c4c295c5fa6e66a4ad1092146}{$\sim$\+Timer}} ()
\item 
void \mbox{\hyperlink{classTimer_a86ea4092d795f381126ca491df5d065b}{init}} (uint8\+\_\+t flags=\mbox{\hyperlink{Timer_8h_a0559e5671895fc55b82c39d7ed88365b}{TIMER\+\_\+\+FLAGS\+\_\+\+NONE}}, uint8\+\_\+t alarm1=0, uint8\+\_\+t alarm2=0, uint8\+\_\+t alarm3=0, uint8\+\_\+t alarm4=0)
\item 
\mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{add\+Alarm}} (uint32\+\_\+t interval)
\item 
void \mbox{\hyperlink{classTimer_ae2bb6568a306973c24c38bb98d928d1a}{restart}} (uint32\+\_\+t offset=0)
\item 
void \mbox{\hyperlink{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}{start}} (uint32\+\_\+t offset=0)
\item 
void \mbox{\hyperlink{classTimer_a9020542d73357a4eef512eefaf57524b}{reset}} ()
\item 
bool \mbox{\hyperlink{classTimer_aa31e5d7b7bfc90ae46c63496c3f8a86d}{on\+Start}} () const
\item 
bool \mbox{\hyperlink{classTimer_a24cdf190924a1465b5b1e40a5d369eb5}{on\+End}} () const
\item 
\mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} \mbox{\hyperlink{classTimer_a8a6d962c92c8e2e641254ea28e1f0443}{alarm}} ()
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_ad8defecc8a0848ebe5caba05326dfc15}{num\+Alarms}} () const
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_aa959b6b96fbccfb1d0bfc3174e95ada6}{cur\+Alarm}} () const
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_a35f384d70298841a8826720b1a57e255}{start\+Time}} () const
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}{get\+Start\+Time}} () const
\item 
void \mbox{\hyperlink{classTimer_a93776cc4842b649e7d30c39a0afe6ce7}{set\+Start\+Time}} (uint32\+\_\+t)
\end{DoxyCompactItemize}
\doxysubsection*{Private Attributes}
\begin{DoxyCompactItemize}
\item 
uint32\+\_\+t $\ast$ \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\+\_\+alarms}}
\item 
uint8\+\_\+t \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\+\_\+num\+Alarms}}
\item 
\mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\+\_\+cur\+Alarm}}
\item 
uint32\+\_\+t \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\+\_\+start\+Time}}
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 27 of file Timer.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classTimer_a5f16e8da27d2a5a5242dead46de05d97}\label{classTimer_a5f16e8da27d2a5a5242dead46de05d97}} 
\index{Timer@{Timer}!Timer@{Timer}}
\index{Timer@{Timer}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{Timer()}{Timer()}}
{\footnotesize\ttfamily Timer\+::\+Timer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 8 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{8              :}
\DoxyCodeLine{9   \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}(\textcolor{keyword}{nullptr}),}
\DoxyCodeLine{10   \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}(0),}
\DoxyCodeLine{11   \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}}(0),}
\DoxyCodeLine{12   \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}}(0)}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{14   , m\_simStartTime(0)}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{16 \{}
\DoxyCodeLine{17 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classTimer_a14fa469c4c295c5fa6e66a4ad1092146}\label{classTimer_a14fa469c4c295c5fa6e66a4ad1092146}} 
\index{Timer@{Timer}!````~Timer@{$\sim$Timer}}
\index{````~Timer@{$\sim$Timer}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{$\sim$Timer()}{~Timer()}}
{\footnotesize\ttfamily Timer\+::$\sim$\+Timer (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 19 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{20 \{}
\DoxyCodeLine{21   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}) \{}
\DoxyCodeLine{22     \mbox{\hyperlink{Memory_8h_a126ac2e4edac2f4fb68713991db133d5}{vfree}}(\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}});}
\DoxyCodeLine{23     \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{24   \}}
\DoxyCodeLine{25 \}}

\end{DoxyCode}


References m\+\_\+alarms, and vfree.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}\label{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}} 
\index{Timer@{Timer}!addAlarm@{addAlarm}}
\index{addAlarm@{addAlarm}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{addAlarm()}{addAlarm()}}
{\footnotesize\ttfamily \mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} Timer\+::add\+Alarm (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{interval }\end{DoxyParamCaption})}



Definition at line 37 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{38 \{}
\DoxyCodeLine{39   \textcolor{keywordtype}{void} *temp = \mbox{\hyperlink{Memory_8h_acda02cb380efa63fa2205776f6a78e52}{vrealloc}}(\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}, \textcolor{keyword}{sizeof}(uint32\_t) * (\mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}} + 1));}
\DoxyCodeLine{40   \textcolor{keywordflow}{if} (!temp) \{}
\DoxyCodeLine{41     \mbox{\hyperlink{Log_8h_a804825e040f1cce9e3d2bb53c4858710}{ERROR\_OUT\_OF\_MEMORY}}();}
\DoxyCodeLine{42     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{43   \}}
\DoxyCodeLine{44   \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} = (uint32\_t *)temp;}
\DoxyCodeLine{45   \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}[\mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}] = interval;}
\DoxyCodeLine{46   \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}++;}
\DoxyCodeLine{47 \}}

\end{DoxyCode}


References ERROR\+\_\+\+OUT\+\_\+\+OF\+\_\+\+MEMORY, m\+\_\+alarms, m\+\_\+num\+Alarms, and vrealloc.



Referenced by Back\+Strobe\+Pattern\+::init(), Blink\+Step\+Pattern\+::init(), Drip\+Morph\+Pattern\+::init(), Hue\+Shift\+Pattern\+::init(), Lighthouse\+Pattern\+::init(), Materia\+Pattern\+::init(), Pulsish\+Pattern\+::init(), Sequenced\+Pattern\+::init(), Zigzag\+Pattern\+::init(), and init().

\mbox{\Hypertarget{classTimer_a8a6d962c92c8e2e641254ea28e1f0443}\label{classTimer_a8a6d962c92c8e2e641254ea28e1f0443}} 
\index{Timer@{Timer}!alarm@{alarm}}
\index{alarm@{alarm}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{alarm()}{alarm()}}
{\footnotesize\ttfamily \mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} Timer\+::alarm (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 109 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{110 \{}
\DoxyCodeLine{111   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}} || !\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} || \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} == \mbox{\hyperlink{Timer_8h_a892c7442d151d1188e5c936961e3e3db}{ALARM\_NONE}}) \{}
\DoxyCodeLine{112     \textcolor{keywordflow}{return} \mbox{\hyperlink{Timer_8h_a892c7442d151d1188e5c936961e3e3db}{ALARM\_NONE}};}
\DoxyCodeLine{113   \}}
\DoxyCodeLine{114   uint32\_t now = \mbox{\hyperlink{classTime_a7c7a8e067bdbd5aaf119521539d30940}{Time::getCurtime}}();}
\DoxyCodeLine{115   \textcolor{comment}{// time since start (forward or backwards)}}
\DoxyCodeLine{116   int32\_t timeDiff = (int32\_t)(int64\_t)(now -\/ \mbox{\hyperlink{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}{getStartTime}}());}
\DoxyCodeLine{117   \textcolor{keywordflow}{if} (timeDiff < 0) \{}
\DoxyCodeLine{118     \textcolor{keywordflow}{return} \mbox{\hyperlink{Timer_8h_a892c7442d151d1188e5c936961e3e3db}{ALARM\_NONE}};}
\DoxyCodeLine{119   \}}
\DoxyCodeLine{120   \textcolor{comment}{// if no time passed it's first alarm that is starting}}
\DoxyCodeLine{121   \textcolor{keywordflow}{if} (timeDiff == 0) \{}
\DoxyCodeLine{122     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{123   \}}
\DoxyCodeLine{124   uint32\_t alarmTime = \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}[\mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}}];}
\DoxyCodeLine{125   \textcolor{comment}{// if the current alarm duration is not a multiple of the current tick}}
\DoxyCodeLine{126   \textcolor{keywordflow}{if} (alarmTime \&\& (timeDiff \% alarmTime) != 0) \{}
\DoxyCodeLine{127     \textcolor{comment}{// then the alarm was not hit}}
\DoxyCodeLine{128     \textcolor{keywordflow}{return} \mbox{\hyperlink{Timer_8h_a892c7442d151d1188e5c936961e3e3db}{ALARM\_NONE}};}
\DoxyCodeLine{129   \}}
\DoxyCodeLine{130   \textcolor{comment}{// update the start time of the timer}}
\DoxyCodeLine{131   \mbox{\hyperlink{classTimer_a93776cc4842b649e7d30c39a0afe6ce7}{setStartTime}}(now);}
\DoxyCodeLine{132   \textcolor{comment}{// increment current alarm then return that id}}
\DoxyCodeLine{133   \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} = (\mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{AlarmID}})((\mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} + 1) \% \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}});}
\DoxyCodeLine{134   \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}};}
\DoxyCodeLine{135 \}}

\end{DoxyCode}


References ALARM\+\_\+\+NONE, Time\+::get\+Curtime(), get\+Start\+Time(), m\+\_\+alarms, m\+\_\+cur\+Alarm, m\+\_\+num\+Alarms, and set\+Start\+Time().



Referenced by Back\+Strobe\+Pattern\+::play(), Blink\+Step\+Pattern\+::play(), Drip\+Morph\+Pattern\+::play(), Hue\+Shift\+Pattern\+::play(), Lighthouse\+Pattern\+::play(), Materia\+Pattern\+::play(), Pulsish\+Pattern\+::play(), Sequenced\+Pattern\+::play(), Zigzag\+Pattern\+::play(), and Basic\+Pattern\+::play().

\mbox{\Hypertarget{classTimer_aa959b6b96fbccfb1d0bfc3174e95ada6}\label{classTimer_aa959b6b96fbccfb1d0bfc3174e95ada6}} 
\index{Timer@{Timer}!curAlarm@{curAlarm}}
\index{curAlarm@{curAlarm}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{curAlarm()}{curAlarm()}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::cur\+Alarm (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 64 of file Timer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{64 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}}; \}}

\end{DoxyCode}


References m\+\_\+cur\+Alarm.

\mbox{\Hypertarget{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}\label{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}} 
\index{Timer@{Timer}!getStartTime@{getStartTime}}
\index{getStartTime@{getStartTime}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{getStartTime()}{getStartTime()}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::get\+Start\+Time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 137 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{138 \{}
\DoxyCodeLine{139 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{140   \textcolor{comment}{// timers use a different 'start time' tracker in simulations so that}}
\DoxyCodeLine{141   \textcolor{comment}{// the startTime remains unchanged when the simulation ends}}
\DoxyCodeLine{142   \textcolor{keywordflow}{if} (Time::isSimulation() \&\& m\_simStartTime) \{}
\DoxyCodeLine{143     \textcolor{keywordflow}{return} m\_simStartTime;}
\DoxyCodeLine{144   \}}
\DoxyCodeLine{145 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{146   \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}};}
\DoxyCodeLine{147 \}}

\end{DoxyCode}


References m\+\_\+start\+Time.



Referenced by alarm(), on\+End(), and on\+Start().

\mbox{\Hypertarget{classTimer_a86ea4092d795f381126ca491df5d065b}\label{classTimer_a86ea4092d795f381126ca491df5d065b}} 
\index{Timer@{Timer}!init@{init}}
\index{init@{init}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily void Timer\+::init (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{flags = {\ttfamily \mbox{\hyperlink{Timer_8h_a0559e5671895fc55b82c39d7ed88365b}{TIMER\+\_\+\+FLAGS\+\_\+\+NONE}}},  }\item[{uint8\+\_\+t}]{alarm1 = {\ttfamily 0},  }\item[{uint8\+\_\+t}]{alarm2 = {\ttfamily 0},  }\item[{uint8\+\_\+t}]{alarm3 = {\ttfamily 0},  }\item[{uint8\+\_\+t}]{alarm4 = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 27 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{28 \{}
\DoxyCodeLine{29   \mbox{\hyperlink{classTimer_a9020542d73357a4eef512eefaf57524b}{reset}}();}
\DoxyCodeLine{30   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a8f4d97c03a636db209c56b5501a8c9e4}{TIMER\_ALARM\_MASK}}) >= \mbox{\hyperlink{Timer_8h_a101b629cc707630d6764404dd60a927d}{TIMER\_1\_ALARM}}) \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{addAlarm}}(alarm1);}
\DoxyCodeLine{31   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a8f4d97c03a636db209c56b5501a8c9e4}{TIMER\_ALARM\_MASK}}) >= \mbox{\hyperlink{Timer_8h_aedab36a618788c7a1d37154bf64da995}{TIMER\_2\_ALARMS}}) \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{addAlarm}}(alarm2);}
\DoxyCodeLine{32   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a8f4d97c03a636db209c56b5501a8c9e4}{TIMER\_ALARM\_MASK}}) >= \mbox{\hyperlink{Timer_8h_a1a0d8d6bb8cfe9ef6d710389b22623a0}{TIMER\_3\_ALARMS}}) \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{addAlarm}}(alarm3);}
\DoxyCodeLine{33   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a8f4d97c03a636db209c56b5501a8c9e4}{TIMER\_ALARM\_MASK}}) >= \mbox{\hyperlink{Timer_8h_ac43533068b15bc2a9c566b8f4f5694a3}{TIMER\_4\_ALARMS}}) \mbox{\hyperlink{classTimer_aecfcc5cd99115c67b5f5f7a485bd7a81}{addAlarm}}(alarm4);}
\DoxyCodeLine{34   \textcolor{keywordflow}{if} ((flags \& \mbox{\hyperlink{Timer_8h_a0534322773d9344f3d4c858e409ef175}{TIMER\_START}}) != 0) \mbox{\hyperlink{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}{start}}();}
\DoxyCodeLine{35 \}}

\end{DoxyCode}


References add\+Alarm(), reset(), start(), TIMER\+\_\+1\+\_\+\+ALARM, TIMER\+\_\+2\+\_\+\+ALARMS, TIMER\+\_\+3\+\_\+\+ALARMS, TIMER\+\_\+4\+\_\+\+ALARMS, TIMER\+\_\+\+ALARM\+\_\+\+MASK, and TIMER\+\_\+\+START.



Referenced by Basic\+Pattern\+::next\+State().

\mbox{\Hypertarget{classTimer_ad8defecc8a0848ebe5caba05326dfc15}\label{classTimer_ad8defecc8a0848ebe5caba05326dfc15}} 
\index{Timer@{Timer}!numAlarms@{numAlarms}}
\index{numAlarms@{numAlarms}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{numAlarms()}{numAlarms()}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::num\+Alarms (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 63 of file Timer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{63 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}; \}}

\end{DoxyCode}


References m\+\_\+num\+Alarms.

\mbox{\Hypertarget{classTimer_a24cdf190924a1465b5b1e40a5d369eb5}\label{classTimer_a24cdf190924a1465b5b1e40a5d369eb5}} 
\index{Timer@{Timer}!onEnd@{onEnd}}
\index{onEnd@{onEnd}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{onEnd()}{onEnd()}}
{\footnotesize\ttfamily bool Timer\+::on\+End (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 85 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{86 \{}
\DoxyCodeLine{87   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} || !\mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}}) \{}
\DoxyCodeLine{88     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{89   \}}
\DoxyCodeLine{90   \textcolor{comment}{// the tick for when this alarm triggers}}
\DoxyCodeLine{91   uint32\_t alarmTime = \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}}[\mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}}];}
\DoxyCodeLine{92   \textcolor{keywordflow}{if} (alarmTime <= 1) \{}
\DoxyCodeLine{93     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{94   \}}
\DoxyCodeLine{95   \textcolor{comment}{// grab curTime}}
\DoxyCodeLine{96   uint32\_t now = \mbox{\hyperlink{classTime_a7c7a8e067bdbd5aaf119521539d30940}{Time::getCurtime}}();}
\DoxyCodeLine{97   \textcolor{comment}{// get the start time of the timer}}
\DoxyCodeLine{98   uint32\_t \mbox{\hyperlink{classTimer_a35f384d70298841a8826720b1a57e255}{startTime}} = \mbox{\hyperlink{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}{getStartTime}}();}
\DoxyCodeLine{99   \textcolor{comment}{// time since start (forward or backwards)}}
\DoxyCodeLine{100   int32\_t timeDiff = (int32\_t)(int64\_t)(now -\/ \mbox{\hyperlink{classTimer_a35f384d70298841a8826720b1a57e255}{startTime}});}
\DoxyCodeLine{101   \textcolor{comment}{// if no time since start then this definitely isn't the end}}
\DoxyCodeLine{102   \textcolor{keywordflow}{if} (!timeDiff) \{}
\DoxyCodeLine{103     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{104   \}}
\DoxyCodeLine{105   \textcolor{comment}{// check if timediff is multiple of last tick in alarm}}
\DoxyCodeLine{106   \textcolor{keywordflow}{return} ((timeDiff \% (alarmTime -\/ 1)) == 0);}
\DoxyCodeLine{107 \}}

\end{DoxyCode}


References Time\+::get\+Curtime(), get\+Start\+Time(), m\+\_\+alarms, m\+\_\+cur\+Alarm, m\+\_\+num\+Alarms, and start\+Time().

\mbox{\Hypertarget{classTimer_aa31e5d7b7bfc90ae46c63496c3f8a86d}\label{classTimer_aa31e5d7b7bfc90ae46c63496c3f8a86d}} 
\index{Timer@{Timer}!onStart@{onStart}}
\index{onStart@{onStart}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{onStart()}{onStart()}}
{\footnotesize\ttfamily bool Timer\+::on\+Start (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const}



Definition at line 77 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{78 \{}
\DoxyCodeLine{79   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classTime_a7c7a8e067bdbd5aaf119521539d30940}{Time::getCurtime}}() == \mbox{\hyperlink{classTimer_a0d02f174a5858fb7ff0b0ac071d58b9b}{getStartTime}}() \&\& \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} == 0) \{}
\DoxyCodeLine{80     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{81   \}}
\DoxyCodeLine{82   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{83 \}}

\end{DoxyCode}


References Time\+::get\+Curtime(), get\+Start\+Time(), and m\+\_\+cur\+Alarm.



Referenced by Sequenced\+Pattern\+::play().

\mbox{\Hypertarget{classTimer_a9020542d73357a4eef512eefaf57524b}\label{classTimer_a9020542d73357a4eef512eefaf57524b}} 
\index{Timer@{Timer}!reset@{reset}}
\index{reset@{reset}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{reset()}{reset()}}
{\footnotesize\ttfamily void Timer\+::reset (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Definition at line 65 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{66 \{}
\DoxyCodeLine{67   \mbox{\hyperlink{Memory_8h_a126ac2e4edac2f4fb68713991db133d5}{vfree}}(\mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}});}
\DoxyCodeLine{68   \mbox{\hyperlink{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}{m\_alarms}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{69   \mbox{\hyperlink{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}{m\_numAlarms}} = 0;}
\DoxyCodeLine{70   \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} = 0;}
\DoxyCodeLine{71   \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}} = 0;}
\DoxyCodeLine{72 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{73   m\_simStartTime = 0;}
\DoxyCodeLine{74 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{75 \}}

\end{DoxyCode}


References m\+\_\+alarms, m\+\_\+cur\+Alarm, m\+\_\+num\+Alarms, m\+\_\+start\+Time, and vfree.



Referenced by Back\+Strobe\+Pattern\+::init(), Blink\+Step\+Pattern\+::init(), Drip\+Morph\+Pattern\+::init(), Hue\+Shift\+Pattern\+::init(), Lighthouse\+Pattern\+::init(), Materia\+Pattern\+::init(), Pulsish\+Pattern\+::init(), Sequenced\+Pattern\+::init(), Zigzag\+Pattern\+::init(), and init().

\mbox{\Hypertarget{classTimer_ae2bb6568a306973c24c38bb98d928d1a}\label{classTimer_ae2bb6568a306973c24c38bb98d928d1a}} 
\index{Timer@{Timer}!restart@{restart}}
\index{restart@{restart}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{restart()}{restart()}}
{\footnotesize\ttfamily void Timer\+::restart (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{offset = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 49 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{50 \{}
\DoxyCodeLine{51   \mbox{\hyperlink{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}{start}}(offset);}
\DoxyCodeLine{52   \textcolor{comment}{// reset the current alarm}}
\DoxyCodeLine{53   \mbox{\hyperlink{classTimer_aac562ec662bac7536addaabbf8d44d27}{m\_curAlarm}} = 0;}
\DoxyCodeLine{54 \}}

\end{DoxyCode}


References m\+\_\+cur\+Alarm, and start().

\mbox{\Hypertarget{classTimer_a93776cc4842b649e7d30c39a0afe6ce7}\label{classTimer_a93776cc4842b649e7d30c39a0afe6ce7}} 
\index{Timer@{Timer}!setStartTime@{setStartTime}}
\index{setStartTime@{setStartTime}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{setStartTime()}{setStartTime()}}
{\footnotesize\ttfamily void Timer\+::set\+Start\+Time (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{tick }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 149 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{150 \{}
\DoxyCodeLine{151 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{152   \textcolor{comment}{// if this timer is running in a simulation then don't actually update}}
\DoxyCodeLine{153   \textcolor{comment}{// the starttime, instead update the simulation start time so that when}}
\DoxyCodeLine{154   \textcolor{comment}{// the simulation ends the startTime will not have changed at all}}
\DoxyCodeLine{155   \textcolor{keywordflow}{if} (Time::isSimulation()) \{}
\DoxyCodeLine{156     \textcolor{comment}{// move the sim start time}}
\DoxyCodeLine{157     m\_simStartTime = tick;}
\DoxyCodeLine{158     \textcolor{keywordflow}{return};}
\DoxyCodeLine{159   \}}
\DoxyCodeLine{160 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{161   \textcolor{comment}{// move the start time forward}}
\DoxyCodeLine{162   \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}} = tick;}
\DoxyCodeLine{163 \}}

\end{DoxyCode}


References m\+\_\+start\+Time.



Referenced by alarm().

\mbox{\Hypertarget{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}\label{classTimer_a4f816271e1661c4eb03afc87e2f78c6a}} 
\index{Timer@{Timer}!start@{start}}
\index{start@{start}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{start()}{start()}}
{\footnotesize\ttfamily void Timer\+::start (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{offset = {\ttfamily 0} }\end{DoxyParamCaption})}



Definition at line 56 of file Timer.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{57 \{}
\DoxyCodeLine{58   \textcolor{comment}{// reset the start time}}
\DoxyCodeLine{59   \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}} = \mbox{\hyperlink{classTime_a7c7a8e067bdbd5aaf119521539d30940}{Time::getCurtime}}() + offset;}
\DoxyCodeLine{60 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{61   m\_simStartTime = \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}};}
\DoxyCodeLine{62 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{63 \}}

\end{DoxyCode}


References Time\+::get\+Curtime(), and m\+\_\+start\+Time.



Referenced by Back\+Strobe\+Pattern\+::init(), Blink\+Step\+Pattern\+::init(), Drip\+Morph\+Pattern\+::init(), Hue\+Shift\+Pattern\+::init(), Lighthouse\+Pattern\+::init(), Materia\+Pattern\+::init(), Pulsish\+Pattern\+::init(), Sequenced\+Pattern\+::init(), Zigzag\+Pattern\+::init(), init(), and restart().

\mbox{\Hypertarget{classTimer_a35f384d70298841a8826720b1a57e255}\label{classTimer_a35f384d70298841a8826720b1a57e255}} 
\index{Timer@{Timer}!startTime@{startTime}}
\index{startTime@{startTime}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{startTime()}{startTime()}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::start\+Time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption}) const\hspace{0.3cm}{\ttfamily [inline]}}



Definition at line 67 of file Timer.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{67 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classTimer_a934e0795404c28155a496127297154ce}{m\_startTime}}; \}}

\end{DoxyCode}


References m\+\_\+start\+Time.



Referenced by on\+End().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}\label{classTimer_a4f52e6f02c7774359a20be24cbb0fd42}} 
\index{Timer@{Timer}!m\_alarms@{m\_alarms}}
\index{m\_alarms@{m\_alarms}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{m\_alarms}{m\_alarms}}
{\footnotesize\ttfamily uint32\+\_\+t$\ast$ Timer\+::m\+\_\+alarms\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 79 of file Timer.\+h.



Referenced by add\+Alarm(), alarm(), on\+End(), reset(), and $\sim$\+Timer().

\mbox{\Hypertarget{classTimer_aac562ec662bac7536addaabbf8d44d27}\label{classTimer_aac562ec662bac7536addaabbf8d44d27}} 
\index{Timer@{Timer}!m\_curAlarm@{m\_curAlarm}}
\index{m\_curAlarm@{m\_curAlarm}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{m\_curAlarm}{m\_curAlarm}}
{\footnotesize\ttfamily \mbox{\hyperlink{Timer_8h_ac1042e0c476de4fa262aa4e5c6de17ca}{Alarm\+ID}} Timer\+::m\+\_\+cur\+Alarm\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 82 of file Timer.\+h.



Referenced by alarm(), cur\+Alarm(), on\+End(), on\+Start(), reset(), and restart().

\mbox{\Hypertarget{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}\label{classTimer_a3f1a532f75bafc1cc9a03c09033468f1}} 
\index{Timer@{Timer}!m\_numAlarms@{m\_numAlarms}}
\index{m\_numAlarms@{m\_numAlarms}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{m\_numAlarms}{m\_numAlarms}}
{\footnotesize\ttfamily uint8\+\_\+t Timer\+::m\+\_\+num\+Alarms\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 80 of file Timer.\+h.



Referenced by add\+Alarm(), alarm(), num\+Alarms(), on\+End(), and reset().

\mbox{\Hypertarget{classTimer_a934e0795404c28155a496127297154ce}\label{classTimer_a934e0795404c28155a496127297154ce}} 
\index{Timer@{Timer}!m\_startTime@{m\_startTime}}
\index{m\_startTime@{m\_startTime}!Timer@{Timer}}
\doxysubsubsection{\texorpdfstring{m\_startTime}{m\_startTime}}
{\footnotesize\ttfamily uint32\+\_\+t Timer\+::m\+\_\+start\+Time\hspace{0.3cm}{\ttfamily [private]}}



Definition at line 84 of file Timer.\+h.



Referenced by get\+Start\+Time(), reset(), set\+Start\+Time(), start(), and start\+Time().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Vortex\+Engine/src/\+Time/\mbox{\hyperlink{Timer_8h}{Timer.\+h}}\item 
Vortex\+Engine/src/\+Time/\mbox{\hyperlink{Timer_8cpp}{Timer.\+cpp}}\end{DoxyCompactItemize}

\hypertarget{classSerialComs}{}\doxysection{Serial\+Coms Class Reference}
\label{classSerialComs}\index{SerialComs@{SerialComs}}


{\ttfamily \#include $<$Serial.\+h$>$}

\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \mbox{\hyperlink{classSerialComs_a6403cc48e107d19f9f1bb7e69006d0bc}{init}} ()
\item 
static void \mbox{\hyperlink{classSerialComs_a4da654c236a9ca2ce7b47bc775303adf}{cleanup}} ()
\item 
static bool \mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{is\+Connected}} ()
\item 
static bool \mbox{\hyperlink{classSerialComs_a134c87080fce06fea5e1cd0bbf54d2da}{check\+Serial}} ()
\item 
static void \mbox{\hyperlink{classSerialComs_a9122c58c6da4240df7dcf3e9ef213245}{write}} (const char $\ast$msg,...)
\item 
static void \mbox{\hyperlink{classSerialComs_abe17d9868d282aa3cb990b9e7a7597c1}{write}} (\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&byte\+Stream)
\item 
static void \mbox{\hyperlink{classSerialComs_a713db35f7f3e79772a55a87979154b07}{read}} (\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&byte\+Stream)
\item 
static bool \mbox{\hyperlink{classSerialComs_a03bd0843bc99d2a9c13507b4e4c1e8a3}{data\+Ready}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static bool \mbox{\hyperlink{classSerialComs_a37f271645e04061426c44a769e82a1fe}{m\+\_\+serial\+Connected}} = false
\item 
static uint32\+\_\+t \mbox{\hyperlink{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}{m\+\_\+last\+Check}} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 9 of file Serial.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classSerialComs_a134c87080fce06fea5e1cd0bbf54d2da}\label{classSerialComs_a134c87080fce06fea5e1cd0bbf54d2da}} 
\index{SerialComs@{SerialComs}!checkSerial@{checkSerial}}
\index{checkSerial@{checkSerial}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{checkSerial()}{checkSerial()}}
{\footnotesize\ttfamily bool Serial\+Coms\+::check\+Serial (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 40 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{41 \{}
\DoxyCodeLine{42 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{43   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{44     \textcolor{comment}{// already connected}}
\DoxyCodeLine{45     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{46   \}}
\DoxyCodeLine{47   uint32\_t now = \mbox{\hyperlink{classTime_a7c7a8e067bdbd5aaf119521539d30940}{Time::getCurtime}}();}
\DoxyCodeLine{48   \textcolor{comment}{// don't check for serial too fast}}
\DoxyCodeLine{49   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}{m\_lastCheck}} \&\& (now -\/ \mbox{\hyperlink{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}{m\_lastCheck}}) < \mbox{\hyperlink{Timings_8h_aabf3a9ab42baac69e3195c785979615c}{MAX\_SERIAL\_CHECK\_INTERVAL}}) \{}
\DoxyCodeLine{50     \textcolor{comment}{// can't check yet too soon}}
\DoxyCodeLine{51     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{52   \}}
\DoxyCodeLine{53   \mbox{\hyperlink{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}{m\_lastCheck}} = now;}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{55   \textcolor{keywordflow}{if} (!Vortex::vcallbacks()-\/>serialCheck()) \{}
\DoxyCodeLine{56     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{57   \}}
\DoxyCodeLine{58   Vortex::vcallbacks()-\/>serialBegin(\mbox{\hyperlink{VortexConfig_8h_ad89976cc0b5340110179f6ce40df3028}{SERIAL\_BAUD\_RATE}});}
\DoxyCodeLine{59 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{60   \textcolor{comment}{// This will check if the serial communication is open}}
\DoxyCodeLine{61   \textcolor{keywordflow}{if} (!Serial.available()) \{}
\DoxyCodeLine{62     \textcolor{comment}{// serial is not connected}}
\DoxyCodeLine{63     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{64   \}}
\DoxyCodeLine{65   \textcolor{comment}{// Begin serial communications}}
\DoxyCodeLine{66   Serial.begin(\mbox{\hyperlink{VortexConfig_8h_ad89976cc0b5340110179f6ce40df3028}{SERIAL\_BAUD\_RATE}});}
\DoxyCodeLine{67 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{68 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{69   \textcolor{comment}{// serial is now connected}}
\DoxyCodeLine{70   \mbox{\hyperlink{classSerialComs_a37f271645e04061426c44a769e82a1fe}{m\_serialConnected}} = \textcolor{keyword}{true};}
\DoxyCodeLine{71   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{72 \}}

\end{DoxyCode}


References Time\+::get\+Curtime(), is\+Connected(), m\+\_\+last\+Check, m\+\_\+serial\+Connected, MAX\+\_\+\+SERIAL\+\_\+\+CHECK\+\_\+\+INTERVAL, and SERIAL\+\_\+\+BAUD\+\_\+\+RATE.



Referenced by Editor\+Connection\+::run().

\mbox{\Hypertarget{classSerialComs_a4da654c236a9ca2ce7b47bc775303adf}\label{classSerialComs_a4da654c236a9ca2ce7b47bc775303adf}} 
\index{SerialComs@{SerialComs}!cleanup@{cleanup}}
\index{cleanup@{cleanup}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{cleanup()}{cleanup()}}
{\footnotesize\ttfamily void Serial\+Coms\+::cleanup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 30 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{31 \{}
\DoxyCodeLine{32 \}}

\end{DoxyCode}


Referenced by Vortex\+Engine\+::cleanup().

\mbox{\Hypertarget{classSerialComs_a03bd0843bc99d2a9c13507b4e4c1e8a3}\label{classSerialComs_a03bd0843bc99d2a9c13507b4e4c1e8a3}} 
\index{SerialComs@{SerialComs}!dataReady@{dataReady}}
\index{dataReady@{dataReady}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{dataReady()}{dataReady()}}
{\footnotesize\ttfamily bool Serial\+Coms\+::data\+Ready (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 139 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{140 \{}
\DoxyCodeLine{141 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{142   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{143     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{144   \}}
\DoxyCodeLine{145 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{146   \textcolor{keywordflow}{return} (Vortex::vcallbacks()-\/>serialAvail() > 0);}
\DoxyCodeLine{147 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{148   \textcolor{keywordflow}{return} (Serial.available() > 0);}
\DoxyCodeLine{149 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{150 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{151   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{152 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{153 \}}

\end{DoxyCode}


References is\+Connected().

\mbox{\Hypertarget{classSerialComs_a6403cc48e107d19f9f1bb7e69006d0bc}\label{classSerialComs_a6403cc48e107d19f9f1bb7e69006d0bc}} 
\index{SerialComs@{SerialComs}!init@{init}}
\index{init@{init}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily bool Serial\+Coms\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 23 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{24 \{}
\DoxyCodeLine{25   \textcolor{comment}{// Try connecting serial ?}}
\DoxyCodeLine{26   \textcolor{comment}{//checkSerial();}}
\DoxyCodeLine{27   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{28 \}}

\end{DoxyCode}


Referenced by Vortex\+Engine\+::init().

\mbox{\Hypertarget{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}\label{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}} 
\index{SerialComs@{SerialComs}!isConnected@{isConnected}}
\index{isConnected@{isConnected}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{isConnected()}{isConnected()}}
{\footnotesize\ttfamily bool Serial\+Coms\+::is\+Connected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 34 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{35 \{}
\DoxyCodeLine{36   \textcolor{keywordflow}{return} \mbox{\hyperlink{classSerialComs_a37f271645e04061426c44a769e82a1fe}{m\_serialConnected}};}
\DoxyCodeLine{37 \}}

\end{DoxyCode}


References m\+\_\+serial\+Connected.



Referenced by check\+Serial(), data\+Ready(), read(), Editor\+Connection\+::run(), and write().

\mbox{\Hypertarget{classSerialComs_a713db35f7f3e79772a55a87979154b07}\label{classSerialComs_a713db35f7f3e79772a55a87979154b07}} 
\index{SerialComs@{SerialComs}!read@{read}}
\index{read@{read}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily void Serial\+Coms\+::read (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&}]{byte\+Stream }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 111 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{112 \{}
\DoxyCodeLine{113 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{114   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{115     \textcolor{keywordflow}{return};}
\DoxyCodeLine{116   \}}
\DoxyCodeLine{117 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{118   uint32\_t amt = Vortex::vcallbacks()-\/>serialAvail();}
\DoxyCodeLine{119 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{120   uint32\_t amt = Serial.available();}
\DoxyCodeLine{121 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{122   \textcolor{keywordflow}{if} (!amt) \{}
\DoxyCodeLine{123     \textcolor{keywordflow}{return};}
\DoxyCodeLine{124   \}}
\DoxyCodeLine{125   \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{126     uint8\_t \textcolor{keywordtype}{byte} = 0;}
\DoxyCodeLine{127 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{128     \textcolor{keywordflow}{if} (!Vortex::vcallbacks()-\/>serialRead((\textcolor{keywordtype}{char} *)\&\textcolor{keywordtype}{byte}, 1)) \{}
\DoxyCodeLine{129       \textcolor{keywordflow}{return};}
\DoxyCodeLine{130     \}}
\DoxyCodeLine{131 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{132     \textcolor{keywordtype}{byte} = Serial.read();}
\DoxyCodeLine{133 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{134     byteStream.\mbox{\hyperlink{classByteStream_ad3b413f399f22d30548a61a5e01ef3a7}{serialize8}}(\textcolor{keywordtype}{byte});}
\DoxyCodeLine{135   \} \textcolor{keywordflow}{while} (-\/-\/amt > 0);}
\DoxyCodeLine{136 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{137 \}}

\end{DoxyCode}


References is\+Connected(), and Byte\+Stream\+::serialize8().



Referenced by Editor\+Connection\+::receive\+Data().

\mbox{\Hypertarget{classSerialComs_abe17d9868d282aa3cb990b9e7a7597c1}\label{classSerialComs_abe17d9868d282aa3cb990b9e7a7597c1}} 
\index{SerialComs@{SerialComs}!write@{write}}
\index{write@{write}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{write()}{write()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Serial\+Coms\+::write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&}]{byte\+Stream }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 93 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{94 \{}
\DoxyCodeLine{95 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{96   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{97     \textcolor{keywordflow}{return};}
\DoxyCodeLine{98   \}}
\DoxyCodeLine{99   byteStream.\mbox{\hyperlink{classByteStream_a282f071ea249471c360d364642f9b3c7}{recalcCRC}}();}
\DoxyCodeLine{100   uint32\_t size = byteStream.\mbox{\hyperlink{classByteStream_a755097adde5b21b33d3c4e3623d04f97}{rawSize}}();}
\DoxyCodeLine{101 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{102   Vortex::vcallbacks()-\/>serialWrite((\textcolor{keyword}{const} uint8\_t *)\&size, \textcolor{keyword}{sizeof}(size));}
\DoxyCodeLine{103   Vortex::vcallbacks()-\/>serialWrite((\textcolor{keyword}{const} uint8\_t *)byteStream.\mbox{\hyperlink{classByteStream_a6993f9575592309a501156db31f82554}{rawData}}(), byteStream.\mbox{\hyperlink{classByteStream_a755097adde5b21b33d3c4e3623d04f97}{rawSize}}());}
\DoxyCodeLine{104 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{105   Serial.write((\textcolor{keyword}{const} uint8\_t *)\&size, \textcolor{keyword}{sizeof}(size));}
\DoxyCodeLine{106   Serial.write((\textcolor{keyword}{const} uint8\_t *)byteStream.\mbox{\hyperlink{classByteStream_a6993f9575592309a501156db31f82554}{rawData}}(), byteStream.\mbox{\hyperlink{classByteStream_a755097adde5b21b33d3c4e3623d04f97}{rawSize}}());}
\DoxyCodeLine{107 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{108 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{109 \}}

\end{DoxyCode}


References is\+Connected(), Byte\+Stream\+::raw\+Data(), Byte\+Stream\+::raw\+Size(), and Byte\+Stream\+::recalc\+CRC().

\mbox{\Hypertarget{classSerialComs_a9122c58c6da4240df7dcf3e9ef213245}\label{classSerialComs_a9122c58c6da4240df7dcf3e9ef213245}} 
\index{SerialComs@{SerialComs}!write@{write}}
\index{write@{write}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{write()}{write()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Serial\+Coms\+::write (\begin{DoxyParamCaption}\item[{const char $\ast$}]{msg,  }\item[{}]{... }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 74 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{75 \{}
\DoxyCodeLine{76 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{77   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{78     \textcolor{keywordflow}{return};}
\DoxyCodeLine{79   \}}
\DoxyCodeLine{80   va\_list list;}
\DoxyCodeLine{81   va\_start(list, msg);}
\DoxyCodeLine{82   uint8\_t buf[2048] = \{0\};}
\DoxyCodeLine{83   \textcolor{keywordtype}{int} len = vsnprintf((\textcolor{keywordtype}{char} *)buf, \textcolor{keyword}{sizeof}(buf), msg, list);}
\DoxyCodeLine{84 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{85   Vortex::vcallbacks()-\/>serialWrite(buf, len);}
\DoxyCodeLine{86 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{87   Serial.write(buf, len);}
\DoxyCodeLine{88 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{89   va\_end(list);}
\DoxyCodeLine{90 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{91 \}}

\end{DoxyCode}


References is\+Connected().



Referenced by Editor\+Connection\+::leave\+Menu(), Editor\+Connection\+::run(), and Editor\+Connection\+::send\+Modes().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}\label{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}} 
\index{SerialComs@{SerialComs}!m\_lastCheck@{m\_lastCheck}}
\index{m\_lastCheck@{m\_lastCheck}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{m\_lastCheck}{m\_lastCheck}}
{\footnotesize\ttfamily uint32\+\_\+t Serial\+Coms\+::m\+\_\+last\+Check = 0\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 38 of file Serial.\+h.



Referenced by check\+Serial().

\mbox{\Hypertarget{classSerialComs_a37f271645e04061426c44a769e82a1fe}\label{classSerialComs_a37f271645e04061426c44a769e82a1fe}} 
\index{SerialComs@{SerialComs}!m\_serialConnected@{m\_serialConnected}}
\index{m\_serialConnected@{m\_serialConnected}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{m\_serialConnected}{m\_serialConnected}}
{\footnotesize\ttfamily bool Serial\+Coms\+::m\+\_\+serial\+Connected = false\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 37 of file Serial.\+h.



Referenced by check\+Serial(), and is\+Connected().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Vortex\+Engine/src/\+Serial/\mbox{\hyperlink{Serial_8h}{Serial.\+h}}\item 
Vortex\+Engine/src/\+Serial/\mbox{\hyperlink{Serial_8cpp}{Serial.\+cpp}}\end{DoxyCompactItemize}

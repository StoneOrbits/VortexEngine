\hypertarget{Leds_8cpp}{}\doxysection{Vortex\+Engine/src/\+Leds/\+Leds.cpp File Reference}
\label{Leds_8cpp}\index{VortexEngine/src/Leds/Leds.cpp@{VortexEngine/src/Leds/Leds.cpp}}
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include \char`\"{}Led\+Stash.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Leds.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Time/\+Time\+Control.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Modes/\+Modes.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Vortex\+Config.\+h\char`\"{}}\newline
{\ttfamily \#include $<$Arduino.\+h$>$}\newline
{\ttfamily \#include $<$Fast\+LED.\+h$>$}\newline
{\ttfamily \#include $<$SPI.\+h$>$}\newline
Include dependency graph for Leds.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Leds_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{Leds_8cpp_a5f55b07707df2f2cf371f707207ed508}{LED\+\_\+\+DATA\+\_\+\+PIN}}~4
\item 
\#define \mbox{\hyperlink{Leds_8cpp_a10373868ec64e121b71abe9fec62c429}{ONBOARD\+\_\+\+LED\+\_\+\+SCK}}~8
\item 
\#define \mbox{\hyperlink{Leds_8cpp_a63c2ed8822945d5c2a012c86ae86deb1}{ONBOARD\+\_\+\+LED\+\_\+\+MOSI}}~7
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static void \mbox{\hyperlink{Leds_8cpp_a855d1ba213e378af7d518976d9f6b407}{transfer}} (uint8\+\_\+t byte)
\item 
static void \mbox{\hyperlink{Leds_8cpp_ab8f63a85e405af3f93826b2f94f7e361}{turn\+Off\+Onboard\+LED}} ()
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{Leds_8cpp_a5f55b07707df2f2cf371f707207ed508}\label{Leds_8cpp_a5f55b07707df2f2cf371f707207ed508}} 
\index{Leds.cpp@{Leds.cpp}!LED\_DATA\_PIN@{LED\_DATA\_PIN}}
\index{LED\_DATA\_PIN@{LED\_DATA\_PIN}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{LED\_DATA\_PIN}{LED\_DATA\_PIN}}
{\footnotesize\ttfamily \#define LED\+\_\+\+DATA\+\_\+\+PIN~4}



Definition at line 19 of file Leds.\+cpp.

\mbox{\Hypertarget{Leds_8cpp_a63c2ed8822945d5c2a012c86ae86deb1}\label{Leds_8cpp_a63c2ed8822945d5c2a012c86ae86deb1}} 
\index{Leds.cpp@{Leds.cpp}!ONBOARD\_LED\_MOSI@{ONBOARD\_LED\_MOSI}}
\index{ONBOARD\_LED\_MOSI@{ONBOARD\_LED\_MOSI}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{ONBOARD\_LED\_MOSI}{ONBOARD\_LED\_MOSI}}
{\footnotesize\ttfamily \#define ONBOARD\+\_\+\+LED\+\_\+\+MOSI~7}



Definition at line 21 of file Leds.\+cpp.

\mbox{\Hypertarget{Leds_8cpp_a10373868ec64e121b71abe9fec62c429}\label{Leds_8cpp_a10373868ec64e121b71abe9fec62c429}} 
\index{Leds.cpp@{Leds.cpp}!ONBOARD\_LED\_SCK@{ONBOARD\_LED\_SCK}}
\index{ONBOARD\_LED\_SCK@{ONBOARD\_LED\_SCK}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{ONBOARD\_LED\_SCK}{ONBOARD\_LED\_SCK}}
{\footnotesize\ttfamily \#define ONBOARD\+\_\+\+LED\+\_\+\+SCK~8}



Definition at line 20 of file Leds.\+cpp.



\doxysubsection{Function Documentation}
\mbox{\Hypertarget{Leds_8cpp_a855d1ba213e378af7d518976d9f6b407}\label{Leds_8cpp_a855d1ba213e378af7d518976d9f6b407}} 
\index{Leds.cpp@{Leds.cpp}!transfer@{transfer}}
\index{transfer@{transfer}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{transfer()}{transfer()}}
{\footnotesize\ttfamily static void transfer (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{byte }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 22 of file Leds.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{23 \{}
\DoxyCodeLine{24   uint8\_t startbit = 0x80;}
\DoxyCodeLine{25   \textcolor{keywordtype}{bool} lastmosi = !(\textcolor{keywordtype}{byte} \& startbit);}
\DoxyCodeLine{26   \textcolor{keywordflow}{for} (uint8\_t b = startbit; b != 0; b = b >> 1) \{}
\DoxyCodeLine{27     delayMicroseconds(4);}
\DoxyCodeLine{28     \textcolor{keywordtype}{bool} towrite = \textcolor{keywordtype}{byte} \& b;}
\DoxyCodeLine{29     \textcolor{keywordflow}{if} (lastmosi != towrite) \{}
\DoxyCodeLine{30       digitalWrite(\mbox{\hyperlink{Leds_8cpp_a63c2ed8822945d5c2a012c86ae86deb1}{ONBOARD\_LED\_MOSI}}, towrite);}
\DoxyCodeLine{31       lastmosi = towrite;}
\DoxyCodeLine{32     \}}
\DoxyCodeLine{33     digitalWrite(\mbox{\hyperlink{Leds_8cpp_a10373868ec64e121b71abe9fec62c429}{ONBOARD\_LED\_SCK}}, HIGH);}
\DoxyCodeLine{34     delayMicroseconds(4);}
\DoxyCodeLine{35     digitalWrite(\mbox{\hyperlink{Leds_8cpp_a10373868ec64e121b71abe9fec62c429}{ONBOARD\_LED\_SCK}}, LOW);}
\DoxyCodeLine{36   \}}
\DoxyCodeLine{37 \}}

\end{DoxyCode}


References ONBOARD\+\_\+\+LED\+\_\+\+MOSI, and ONBOARD\+\_\+\+LED\+\_\+\+SCK.



Referenced by turn\+Off\+Onboard\+LED().

\mbox{\Hypertarget{Leds_8cpp_ab8f63a85e405af3f93826b2f94f7e361}\label{Leds_8cpp_ab8f63a85e405af3f93826b2f94f7e361}} 
\index{Leds.cpp@{Leds.cpp}!turnOffOnboardLED@{turnOffOnboardLED}}
\index{turnOffOnboardLED@{turnOffOnboardLED}!Leds.cpp@{Leds.cpp}}
\doxysubsubsection{\texorpdfstring{turnOffOnboardLED()}{turnOffOnboardLED()}}
{\footnotesize\ttfamily static void turn\+Off\+Onboard\+LED (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 38 of file Leds.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{39 \{}
\DoxyCodeLine{40   \textcolor{comment}{// spi device begin}}
\DoxyCodeLine{41   pinMode(\mbox{\hyperlink{Leds_8cpp_a10373868ec64e121b71abe9fec62c429}{ONBOARD\_LED\_SCK}}, OUTPUT);}
\DoxyCodeLine{42   digitalWrite(\mbox{\hyperlink{Leds_8cpp_a10373868ec64e121b71abe9fec62c429}{ONBOARD\_LED\_SCK}}, LOW);}
\DoxyCodeLine{43   pinMode(\mbox{\hyperlink{Leds_8cpp_a63c2ed8822945d5c2a012c86ae86deb1}{ONBOARD\_LED\_MOSI}}, OUTPUT);}
\DoxyCodeLine{44   digitalWrite(\mbox{\hyperlink{Leds_8cpp_a63c2ed8822945d5c2a012c86ae86deb1}{ONBOARD\_LED\_MOSI}}, HIGH);}
\DoxyCodeLine{45   SPI.begin();}
\DoxyCodeLine{46   \textcolor{comment}{// Begin transaction, setting SPI frequency}}
\DoxyCodeLine{47   \textcolor{keyword}{static} \textcolor{keyword}{const} SPISettings mySPISettings(8000000, MSBFIRST, SPI\_MODE0);}
\DoxyCodeLine{48   SPI.beginTransaction(mySPISettings);}
\DoxyCodeLine{49   \textcolor{keywordflow}{for} (uint8\_t i = 0; i < 4; i++) \{}
\DoxyCodeLine{50     \mbox{\hyperlink{Leds_8cpp_a855d1ba213e378af7d518976d9f6b407}{transfer}}(0x00); \textcolor{comment}{// begin frame}}
\DoxyCodeLine{51   \}}
\DoxyCodeLine{52   \mbox{\hyperlink{Leds_8cpp_a855d1ba213e378af7d518976d9f6b407}{transfer}}(0xFF); \textcolor{comment}{//  Pixel start}}
\DoxyCodeLine{53   \textcolor{keywordflow}{for} (uint8\_t i = 0; i < 3; i++) \{}
\DoxyCodeLine{54     \mbox{\hyperlink{Leds_8cpp_a855d1ba213e378af7d518976d9f6b407}{transfer}}(0x00); \textcolor{comment}{// R,G,B}}
\DoxyCodeLine{55   \}}
\DoxyCodeLine{56   \mbox{\hyperlink{Leds_8cpp_a855d1ba213e378af7d518976d9f6b407}{transfer}}(0xFF); \textcolor{comment}{// end frame}}
\DoxyCodeLine{57   SPI.endTransaction();}
\DoxyCodeLine{58 }
\DoxyCodeLine{59   SPI.end();}
\DoxyCodeLine{60 \}}

\end{DoxyCode}


References ONBOARD\+\_\+\+LED\+\_\+\+MOSI, ONBOARD\+\_\+\+LED\+\_\+\+SCK, and transfer().



Referenced by Leds\+::init().


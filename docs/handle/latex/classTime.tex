\hypertarget{classTime}{}\doxysection{Time Class Reference}
\label{classTime}\index{Time@{Time}}


{\ttfamily \#include $<$Time\+Control.\+h$>$}

\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \mbox{\hyperlink{classTime_a0058db559daacf8050e8a0b1d4b9fd8c}{init}} ()
\item 
static void \mbox{\hyperlink{classTime_af813bd1f7e4c08f6d84f8831738fed32}{cleanup}} ()
\item 
static void \mbox{\hyperlink{classTime_a823b10e685d34b667e16e36fea96e150}{tick\+Clock}} ()
\item 
static uint32\+\_\+t \mbox{\hyperlink{classTime_a7c7a8e067bdbd5aaf119521539d30940}{get\+Curtime}} ()
\item 
static uint32\+\_\+t \mbox{\hyperlink{classTime_a719c88f4e11a83f7167f45a2a58f5d60}{get\+Real\+Curtime}} ()
\item 
static void \mbox{\hyperlink{classTime_aaf106aff340ea506f16a010b12f51769}{set\+Tickrate}} (uint32\+\_\+t tickrate=0)
\item 
static uint32\+\_\+t \mbox{\hyperlink{classTime_acb7cd2d49094647c3fb7112e15ad16d7}{get\+Tickrate}} ()
\item 
static uint32\+\_\+t \mbox{\hyperlink{classTime_ac44f4e49538456714372bb1aad3dd839}{microseconds}} ()
\item 
static void \mbox{\hyperlink{classTime_a1db7b0672f8b2d38994119ccc226f8ee}{delay\+Microseconds}} (uint32\+\_\+t us)
\item 
static void \mbox{\hyperlink{classTime_aa90c5d6860ae306048c96d80da2ea1b0}{delay\+Milliseconds}} (uint32\+\_\+t ms)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classTime_a4245e409c7347d1d671858962c2ca3b5}{Time}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static uint32\+\_\+t \mbox{\hyperlink{classTime_ac3f1dc3ad6b2ba8787643e73b17a4f1c}{m\+\_\+cur\+Tick}} = 0
\item 
static uint32\+\_\+t \mbox{\hyperlink{classTime_ac9ca1a16592b1653e33926064d3b99ad}{m\+\_\+prev\+Time}} = 0
\item 
static uint32\+\_\+t \mbox{\hyperlink{classTime_a9482556717a3933d303d18133d2e83eb}{m\+\_\+first\+Time}} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 23 of file Time\+Control.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classTime_a4245e409c7347d1d671858962c2ca3b5}\label{classTime_a4245e409c7347d1d671858962c2ca3b5}} 
\index{Time@{Time}!Time@{Time}}
\index{Time@{Time}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{Time()}{Time()}}
{\footnotesize\ttfamily Time\+::\+Time (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classTime_af813bd1f7e4c08f6d84f8831738fed32}\label{classTime_af813bd1f7e4c08f6d84f8831738fed32}} 
\index{Time@{Time}!cleanup@{cleanup}}
\index{cleanup@{cleanup}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{cleanup()}{cleanup()}}
{\footnotesize\ttfamily void Time\+::cleanup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 71 of file Time\+Control.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{72 \{}
\DoxyCodeLine{73 \}}

\end{DoxyCode}


Referenced by Vortex\+Engine\+::cleanup().

\mbox{\Hypertarget{classTime_a1db7b0672f8b2d38994119ccc226f8ee}\label{classTime_a1db7b0672f8b2d38994119ccc226f8ee}} 
\index{Time@{Time}!delayMicroseconds@{delayMicroseconds}}
\index{delayMicroseconds@{delayMicroseconds}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{delayMicroseconds()}{delayMicroseconds()}}
{\footnotesize\ttfamily void Time\+::delay\+Microseconds (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{us }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 195 of file Time\+Control.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{196 \{}
\DoxyCodeLine{197 \textcolor{preprocessor}{\#if defined(VORTEX\_EMBEDDED) || defined(\_WIN32)}}
\DoxyCodeLine{198   uint32\_t newtime = \mbox{\hyperlink{classTime_ac44f4e49538456714372bb1aad3dd839}{microseconds}}() + us;}
\DoxyCodeLine{199   \textcolor{keywordflow}{while} (\mbox{\hyperlink{classTime_ac44f4e49538456714372bb1aad3dd839}{microseconds}}() < newtime) \{}
\DoxyCodeLine{200     \textcolor{comment}{// busy loop}}
\DoxyCodeLine{201   \}}
\DoxyCodeLine{202 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{203   usleep(us);}
\DoxyCodeLine{204 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{205 \}}

\end{DoxyCode}


References microseconds().



Referenced by delay\+Milliseconds(), IRSender\+::send\+Mark(), VLSender\+::send\+Mark(), IRSender\+::send\+Space(), VLSender\+::send\+Space(), and tick\+Clock().

\mbox{\Hypertarget{classTime_aa90c5d6860ae306048c96d80da2ea1b0}\label{classTime_aa90c5d6860ae306048c96d80da2ea1b0}} 
\index{Time@{Time}!delayMilliseconds@{delayMilliseconds}}
\index{delayMilliseconds@{delayMilliseconds}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{delayMilliseconds()}{delayMilliseconds()}}
{\footnotesize\ttfamily void Time\+::delay\+Milliseconds (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{ms }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 207 of file Time\+Control.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{208 \{}
\DoxyCodeLine{209 \textcolor{preprocessor}{\#ifdef VORTEX\_EMBEDDED}}
\DoxyCodeLine{210   \textcolor{comment}{// not very accurate}}
\DoxyCodeLine{211   \textcolor{keywordflow}{for} (uint16\_t i = 0; i < ms; ++i) \{}
\DoxyCodeLine{212     \mbox{\hyperlink{classTime_a1db7b0672f8b2d38994119ccc226f8ee}{delayMicroseconds}}(1000);}
\DoxyCodeLine{213   \}}
\DoxyCodeLine{214 \textcolor{preprocessor}{\#elif defined(\_WIN32)}}
\DoxyCodeLine{215   Sleep(ms);}
\DoxyCodeLine{216 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{217   usleep(ms * 1000);}
\DoxyCodeLine{218 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{219 \}}

\end{DoxyCode}


References delay\+Microseconds().



Referenced by Leds\+::hold\+All().

\mbox{\Hypertarget{classTime_a7c7a8e067bdbd5aaf119521539d30940}\label{classTime_a7c7a8e067bdbd5aaf119521539d30940}} 
\index{Time@{Time}!getCurtime@{getCurtime}}
\index{getCurtime@{getCurtime}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{getCurtime()}{getCurtime()}}
{\footnotesize\ttfamily static uint32\+\_\+t Time\+::get\+Curtime (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 40 of file Time\+Control.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{40 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{classTime_ac3f1dc3ad6b2ba8787643e73b17a4f1c}{m\_curTick}} + \mbox{\hyperlink{TimeControl_8h_a95da11cf4c5f8b3d234f62b7a44203c2}{SIMULATION\_TICK}}; \}}

\end{DoxyCode}


References m\+\_\+cur\+Tick, and SIMULATION\+\_\+\+TICK.



Referenced by Timer\+::alarm(), Mode\+Sharing\+::begin\+Sending\+IR(), Leds\+::blink\+All(), Leds\+::blink\+Index(), Leds\+::blink\+Map(), Leds\+::blink\+Pair(), Leds\+::blink\+Pairs(), Leds\+::blink\+Range(), Serial\+Coms\+::check\+Serial(), Mode\+Sharing\+::continue\+Sending\+IR(), Timer\+::on\+End(), Timer\+::on\+Start(), Menus\+::open\+Menu\+Selection(), Mode\+Sharing\+::receive\+Mode\+IR(), Randomizer\+::run(), Vortex\+Engine\+::run\+Main\+Logic(), Menus\+::run\+Menu\+Selection(), IRSender\+::send(), VLSender\+::send(), Modes\+::set\+Cur\+Mode(), Menu\+::show\+Bulb\+Selection(), Color\+Select\+::show\+Full\+Set(), Color\+Select\+::show\+Selection(), Timer\+::start(), and Button\+::update().

\mbox{\Hypertarget{classTime_a719c88f4e11a83f7167f45a2a58f5d60}\label{classTime_a719c88f4e11a83f7167f45a2a58f5d60}} 
\index{Time@{Time}!getRealCurtime@{getRealCurtime}}
\index{getRealCurtime@{getRealCurtime}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{getRealCurtime()}{getRealCurtime()}}
{\footnotesize\ttfamily uint32\+\_\+t Time\+::get\+Real\+Curtime (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 129 of file Time\+Control.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{130 \{}
\DoxyCodeLine{131   \textcolor{keywordflow}{return} \mbox{\hyperlink{classTime_ac3f1dc3ad6b2ba8787643e73b17a4f1c}{m\_curTick}};}
\DoxyCodeLine{132 \}}

\end{DoxyCode}


References m\+\_\+cur\+Tick.

\mbox{\Hypertarget{classTime_acb7cd2d49094647c3fb7112e15ad16d7}\label{classTime_acb7cd2d49094647c3fb7112e15ad16d7}} 
\index{Time@{Time}!getTickrate@{getTickrate}}
\index{getTickrate@{getTickrate}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{getTickrate()}{getTickrate()}}
{\footnotesize\ttfamily uint32\+\_\+t Time\+::get\+Tickrate (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 134 of file Time\+Control.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{135 \{}
\DoxyCodeLine{136   \textcolor{keywordflow}{return} \mbox{\hyperlink{TimeControl_8cpp_a7f21fe9fdb3605017d51d802b41910ac}{TICKRATE}};}
\DoxyCodeLine{137 \}}

\end{DoxyCode}


References TICKRATE.

\mbox{\Hypertarget{classTime_a0058db559daacf8050e8a0b1d4b9fd8c}\label{classTime_a0058db559daacf8050e8a0b1d4b9fd8c}} 
\index{Time@{Time}!init@{init}}
\index{init@{init}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily bool Time\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 50 of file Time\+Control.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{51 \{}
\DoxyCodeLine{52   \mbox{\hyperlink{classTime_a9482556717a3933d303d18133d2e83eb}{m\_firstTime}} = \mbox{\hyperlink{classTime_ac9ca1a16592b1653e33926064d3b99ad}{m\_prevTime}} = \mbox{\hyperlink{classTime_ac44f4e49538456714372bb1aad3dd839}{microseconds}}();}
\DoxyCodeLine{53   \mbox{\hyperlink{classTime_ac3f1dc3ad6b2ba8787643e73b17a4f1c}{m\_curTick}} = 0;}
\DoxyCodeLine{54 \textcolor{preprocessor}{\#if VARIABLE\_TICKRATE == 1}}
\DoxyCodeLine{55   m\_tickrate = \mbox{\hyperlink{VortexConfig_8h_a97f6a37590c60f131bba4007c88d16eb}{DEFAULT\_TICKRATE}};}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{58   m\_simulationTick = 0;}
\DoxyCodeLine{59   m\_isSimulation = \textcolor{keyword}{false};}
\DoxyCodeLine{60   m\_instantTimestep = \textcolor{keyword}{false};}
\DoxyCodeLine{61 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{62 \textcolor{preprocessor}{\#if !defined(\_WIN32) || defined(WASM)}}
\DoxyCodeLine{63   \mbox{\hyperlink{TimeControl_8cpp_a6a51e9baeec9b06ae477cf6475efc71d}{start}} = \mbox{\hyperlink{classTime_ac44f4e49538456714372bb1aad3dd839}{microseconds}}();}
\DoxyCodeLine{64 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{65   QueryPerformanceFrequency(\&tps);}
\DoxyCodeLine{66   QueryPerformanceCounter(\&\mbox{\hyperlink{TimeControl_8cpp_a6a51e9baeec9b06ae477cf6475efc71d}{start}});}
\DoxyCodeLine{67 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{68   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{69 \}}

\end{DoxyCode}


References DEFAULT\+\_\+\+TICKRATE, m\+\_\+cur\+Tick, m\+\_\+first\+Time, m\+\_\+prev\+Time, microseconds(), and start.



Referenced by Vortex\+Engine\+::init().

\mbox{\Hypertarget{classTime_ac44f4e49538456714372bb1aad3dd839}\label{classTime_ac44f4e49538456714372bb1aad3dd839}} 
\index{Time@{Time}!microseconds@{microseconds}}
\index{microseconds@{microseconds}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{microseconds()}{microseconds()}}
{\footnotesize\ttfamily uint32\+\_\+t Time\+::microseconds (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 174 of file Time\+Control.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{175 \{}
\DoxyCodeLine{176 \textcolor{preprocessor}{\#ifndef VORTEX\_LIB }\textcolor{comment}{// Embedded avr devices}}
\DoxyCodeLine{177   \textcolor{comment}{// arduino micros, or whatever micro implementation you have chosen for the embedded device}}
\DoxyCodeLine{178   \textcolor{keywordflow}{return} micros();}
\DoxyCodeLine{179 \textcolor{preprocessor}{\#elif defined(\_WIN32) }\textcolor{comment}{// windows}}
\DoxyCodeLine{180   LARGE\_INTEGER now;}
\DoxyCodeLine{181   QueryPerformanceCounter(\&now);}
\DoxyCodeLine{182   \textcolor{keywordflow}{if} (!tps.QuadPart) \{}
\DoxyCodeLine{183     \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{184   \}}
\DoxyCodeLine{185   \textcolor{comment}{// yes, this will overflow, that's how arduino microseconds() works *shrug*}}
\DoxyCodeLine{186   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})((now.QuadPart -\/ \mbox{\hyperlink{TimeControl_8cpp_a6a51e9baeec9b06ae477cf6475efc71d}{start}}.QuadPart) * 1000000 / tps.QuadPart);}
\DoxyCodeLine{187 \textcolor{preprocessor}{\#else }\textcolor{comment}{// linux/wasm/etc}}
\DoxyCodeLine{188   \textcolor{keyword}{struct }timespec ts;}
\DoxyCodeLine{189   clock\_gettime(CLOCK\_MONOTONIC\_RAW, \&ts);}
\DoxyCodeLine{190   uint64\_t us = \mbox{\hyperlink{TimeControl_8cpp_ad4fb94c1ab9cbc945f797df08da3fcf1}{SEC\_TO\_US}}((uint64\_t)ts.tv\_sec) + \mbox{\hyperlink{TimeControl_8cpp_aba379c651cac0789cf71828509fec881}{NS\_TO\_US}}((uint64\_t)ts.tv\_nsec);}
\DoxyCodeLine{191   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{long})us;}
\DoxyCodeLine{192 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{193 \}}

\end{DoxyCode}


References NS\+\_\+\+TO\+\_\+\+US, SEC\+\_\+\+TO\+\_\+\+US, and start.



Referenced by delay\+Microseconds(), init(), IRReceiver\+::recv\+PCIHandler(), and tick\+Clock().

\mbox{\Hypertarget{classTime_aaf106aff340ea506f16a010b12f51769}\label{classTime_aaf106aff340ea506f16a010b12f51769}} 
\index{Time@{Time}!setTickrate@{setTickrate}}
\index{setTickrate@{setTickrate}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{setTickrate()}{setTickrate()}}
{\footnotesize\ttfamily void Time\+::set\+Tickrate (\begin{DoxyParamCaption}\item[{uint32\+\_\+t}]{tickrate = {\ttfamily 0} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 141 of file Time\+Control.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{142 \{}
\DoxyCodeLine{143 \textcolor{preprocessor}{\#if VARIABLE\_TICKRATE == 1}}
\DoxyCodeLine{144   \textcolor{keywordflow}{if} (!tickrate) \{}
\DoxyCodeLine{145     \textcolor{comment}{// can't set 0 tickrate, so 0 sets default}}
\DoxyCodeLine{146     tickrate = \mbox{\hyperlink{VortexConfig_8h_a97f6a37590c60f131bba4007c88d16eb}{DEFAULT\_TICKRATE}};}
\DoxyCodeLine{147   \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (tickrate > 1000000) \{}
\DoxyCodeLine{148     \textcolor{comment}{// more than 1 million ticks per second won't work anyway}}
\DoxyCodeLine{149     tickrate = 1000000;}
\DoxyCodeLine{150   \}}
\DoxyCodeLine{151   \textcolor{comment}{// update the tickrate}}
\DoxyCodeLine{152   m\_tickrate = tickrate;}
\DoxyCodeLine{153 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{154 \}}

\end{DoxyCode}


References DEFAULT\+\_\+\+TICKRATE.

\mbox{\Hypertarget{classTime_a823b10e685d34b667e16e36fea96e150}\label{classTime_a823b10e685d34b667e16e36fea96e150}} 
\index{Time@{Time}!tickClock@{tickClock}}
\index{tickClock@{tickClock}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{tickClock()}{tickClock()}}
{\footnotesize\ttfamily void Time\+::tick\+Clock (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 75 of file Time\+Control.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{76 \{}
\DoxyCodeLine{77   \textcolor{comment}{// tick clock forward}}
\DoxyCodeLine{78   \mbox{\hyperlink{classTime_ac3f1dc3ad6b2ba8787643e73b17a4f1c}{m\_curTick}}++;}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 \textcolor{preprocessor}{\#if DEBUG\_ALLOCATIONS == 1}}
\DoxyCodeLine{81   \textcolor{keywordflow}{if} ((\mbox{\hyperlink{classTime_ac3f1dc3ad6b2ba8787643e73b17a4f1c}{m\_curTick}} \% \mbox{\hyperlink{TimeControl_8h_a73adf9c10352865ff95b5f46e642c560}{MS\_TO\_TICKS}}(1000)) == 0) \{}
\DoxyCodeLine{82     \mbox{\hyperlink{Log_8h_a8bdccae09f7cdda8fb311e0bd81c35dc}{DEBUG\_LOGF}}(\textcolor{stringliteral}{"{}Cur Memory: \%u (\%u)"{}}, cur\_memory\_usage(), cur\_memory\_usage\_background());}
\DoxyCodeLine{83   \}}
\DoxyCodeLine{84 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{85 }
\DoxyCodeLine{86 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{87   \textcolor{keywordflow}{if} (m\_instantTimestep) \{}
\DoxyCodeLine{88     \textcolor{keywordflow}{return};}
\DoxyCodeLine{89   \}}
\DoxyCodeLine{90 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{91 }
\DoxyCodeLine{92   \textcolor{comment}{// perform timestep}}
\DoxyCodeLine{93   uint32\_t elapsed\_us;}
\DoxyCodeLine{94   uint32\_t us;}
\DoxyCodeLine{95   \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{96     us = \mbox{\hyperlink{classTime_ac44f4e49538456714372bb1aad3dd839}{microseconds}}();}
\DoxyCodeLine{97     \textcolor{comment}{// detect rollover of microsecond counter}}
\DoxyCodeLine{98     \textcolor{keywordflow}{if} (us < \mbox{\hyperlink{classTime_ac9ca1a16592b1653e33926064d3b99ad}{m\_prevTime}}) \{}
\DoxyCodeLine{99       \textcolor{comment}{// calculate wrapped around difference}}
\DoxyCodeLine{100       elapsed\_us = (uint32\_t)((UINT32\_MAX -\/ \mbox{\hyperlink{classTime_ac9ca1a16592b1653e33926064d3b99ad}{m\_prevTime}}) + us);}
\DoxyCodeLine{101     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{102       \textcolor{comment}{// otherwise calculate regular difference}}
\DoxyCodeLine{103       elapsed\_us = (uint32\_t)(us -\/ \mbox{\hyperlink{classTime_ac9ca1a16592b1653e33926064d3b99ad}{m\_prevTime}});}
\DoxyCodeLine{104     \}}
\DoxyCodeLine{105     \textcolor{comment}{// if building anywhere except visual studio then we can run alternate sleep code}}
\DoxyCodeLine{106     \textcolor{comment}{// because in visual studio + windows it's better to just spin and check the high}}
\DoxyCodeLine{107     \textcolor{comment}{// resolution clock instead of trying to sleep for microseconds.}}
\DoxyCodeLine{108 \textcolor{preprocessor}{\#if !defined(\_WIN32) \&\& defined(VORTEX\_LIB)}}
\DoxyCodeLine{109     uint32\_t required = (1000000 / \mbox{\hyperlink{TimeControl_8cpp_a7f21fe9fdb3605017d51d802b41910ac}{TICKRATE}});}
\DoxyCodeLine{110     uint32\_t sleepTime = 0;}
\DoxyCodeLine{111     \textcolor{keywordflow}{if} (required > elapsed\_us) \{}
\DoxyCodeLine{112       \textcolor{comment}{// in vortex lib on linux we can just sleep instead of spinning}}
\DoxyCodeLine{113       \textcolor{comment}{// but on embedded we must spin and on windows it actually ends}}
\DoxyCodeLine{114       \textcolor{comment}{// up being more accurate to poll QPF + QPC via microseconds()}}
\DoxyCodeLine{115       sleepTime = required -\/ elapsed\_us;}
\DoxyCodeLine{116     \}}
\DoxyCodeLine{117     \mbox{\hyperlink{classTime_a1db7b0672f8b2d38994119ccc226f8ee}{Time::delayMicroseconds}}(sleepTime);}
\DoxyCodeLine{118     \textcolor{keywordflow}{break};}
\DoxyCodeLine{119 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{120     \textcolor{comment}{// 1000us per ms, divided by tickrate gives}}
\DoxyCodeLine{121     \textcolor{comment}{// the number of microseconds per tick}}
\DoxyCodeLine{122   \} \textcolor{keywordflow}{while} (elapsed\_us < (1000000 / \mbox{\hyperlink{TimeControl_8cpp_a7f21fe9fdb3605017d51d802b41910ac}{TICKRATE}}));}
\DoxyCodeLine{123 }
\DoxyCodeLine{124   \textcolor{comment}{// store current time}}
\DoxyCodeLine{125   \mbox{\hyperlink{classTime_ac9ca1a16592b1653e33926064d3b99ad}{m\_prevTime}} = \mbox{\hyperlink{classTime_ac44f4e49538456714372bb1aad3dd839}{microseconds}}();}
\DoxyCodeLine{126 \}}

\end{DoxyCode}


References DEBUG\+\_\+\+LOGF, delay\+Microseconds(), m\+\_\+cur\+Tick, m\+\_\+prev\+Time, microseconds(), MS\+\_\+\+TO\+\_\+\+TICKS, and TICKRATE.



Referenced by Vortex\+Engine\+::tick().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classTime_ac3f1dc3ad6b2ba8787643e73b17a4f1c}\label{classTime_ac3f1dc3ad6b2ba8787643e73b17a4f1c}} 
\index{Time@{Time}!m\_curTick@{m\_curTick}}
\index{m\_curTick@{m\_curTick}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{m\_curTick}{m\_curTick}}
{\footnotesize\ttfamily uint32\+\_\+t Time\+::m\+\_\+cur\+Tick = 0\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 115 of file Time\+Control.\+h.



Referenced by get\+Curtime(), get\+Real\+Curtime(), init(), and tick\+Clock().

\mbox{\Hypertarget{classTime_a9482556717a3933d303d18133d2e83eb}\label{classTime_a9482556717a3933d303d18133d2e83eb}} 
\index{Time@{Time}!m\_firstTime@{m\_firstTime}}
\index{m\_firstTime@{m\_firstTime}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{m\_firstTime}{m\_firstTime}}
{\footnotesize\ttfamily uint32\+\_\+t Time\+::m\+\_\+first\+Time = 0\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 121 of file Time\+Control.\+h.



Referenced by init().

\mbox{\Hypertarget{classTime_ac9ca1a16592b1653e33926064d3b99ad}\label{classTime_ac9ca1a16592b1653e33926064d3b99ad}} 
\index{Time@{Time}!m\_prevTime@{m\_prevTime}}
\index{m\_prevTime@{m\_prevTime}!Time@{Time}}
\doxysubsubsection{\texorpdfstring{m\_prevTime}{m\_prevTime}}
{\footnotesize\ttfamily uint32\+\_\+t Time\+::m\+\_\+prev\+Time = 0\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 118 of file Time\+Control.\+h.



Referenced by init(), and tick\+Clock().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Vortex\+Engine/src/\+Time/\mbox{\hyperlink{TimeControl_8h}{Time\+Control.\+h}}\item 
Vortex\+Engine/src/\+Time/\mbox{\hyperlink{TimeControl_8cpp}{Time\+Control.\+cpp}}\end{DoxyCompactItemize}

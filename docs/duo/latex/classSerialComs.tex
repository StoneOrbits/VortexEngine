\hypertarget{classSerialComs}{}\doxysection{Serial\+Coms Class Reference}
\label{classSerialComs}\index{SerialComs@{SerialComs}}


{\ttfamily \#include $<$Serial.\+h$>$}

\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \mbox{\hyperlink{classSerialComs_a6403cc48e107d19f9f1bb7e69006d0bc}{init}} ()
\item 
static void \mbox{\hyperlink{classSerialComs_a4da654c236a9ca2ce7b47bc775303adf}{cleanup}} ()
\item 
static bool \mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{is\+Connected}} ()
\item 
static bool \mbox{\hyperlink{classSerialComs_a134c87080fce06fea5e1cd0bbf54d2da}{check\+Serial}} ()
\item 
static void \mbox{\hyperlink{classSerialComs_a9122c58c6da4240df7dcf3e9ef213245}{write}} (const char $\ast$msg,...)
\item 
static void \mbox{\hyperlink{classSerialComs_abe17d9868d282aa3cb990b9e7a7597c1}{write}} (\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&byte\+Stream)
\item 
static void \mbox{\hyperlink{classSerialComs_a713db35f7f3e79772a55a87979154b07}{read}} (\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&byte\+Stream)
\item 
static bool \mbox{\hyperlink{classSerialComs_a03bd0843bc99d2a9c13507b4e4c1e8a3}{data\+Ready}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static bool \mbox{\hyperlink{classSerialComs_a37f271645e04061426c44a769e82a1fe}{m\+\_\+serial\+Connected}} = false
\item 
static uint32\+\_\+t \mbox{\hyperlink{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}{m\+\_\+last\+Check}} = 0
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 9 of file Serial.\+h.



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classSerialComs_a134c87080fce06fea5e1cd0bbf54d2da}\label{classSerialComs_a134c87080fce06fea5e1cd0bbf54d2da}} 
\index{SerialComs@{SerialComs}!checkSerial@{checkSerial}}
\index{checkSerial@{checkSerial}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{checkSerial()}{checkSerial()}}
{\footnotesize\ttfamily bool Serial\+Coms\+::check\+Serial (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 36 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{37 \{}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{39   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{40     \textcolor{comment}{// already connected}}
\DoxyCodeLine{41     \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{42   \}}
\DoxyCodeLine{43   uint32\_t now = \mbox{\hyperlink{classTime_a7c7a8e067bdbd5aaf119521539d30940}{Time::getCurtime}}();}
\DoxyCodeLine{44   \textcolor{comment}{// don't check for serial too fast}}
\DoxyCodeLine{45   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}{m\_lastCheck}} \&\& (now -\/ \mbox{\hyperlink{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}{m\_lastCheck}}) < \mbox{\hyperlink{Timings_8h_aabf3a9ab42baac69e3195c785979615c}{MAX\_SERIAL\_CHECK\_INTERVAL}}) \{}
\DoxyCodeLine{46     \textcolor{comment}{// can't check yet too soon}}
\DoxyCodeLine{47     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{48   \}}
\DoxyCodeLine{49   \mbox{\hyperlink{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}{m\_lastCheck}} = now;}
\DoxyCodeLine{50 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{51   \textcolor{keywordflow}{if} (!Vortex::vcallbacks()-\/>serialCheck()) \{}
\DoxyCodeLine{52     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{53   \}}
\DoxyCodeLine{54   Vortex::vcallbacks()-\/>serialBegin(9600);}
\DoxyCodeLine{55 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{56   \textcolor{comment}{// This will check if the serial communication is open}}
\DoxyCodeLine{57   \textcolor{keywordflow}{if} (!Serial) \{}
\DoxyCodeLine{58     \textcolor{comment}{// serial is not connected}}
\DoxyCodeLine{59     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{60   \}}
\DoxyCodeLine{61   \textcolor{comment}{// Begin serial communications}}
\DoxyCodeLine{62   Serial.begin(9600);}
\DoxyCodeLine{63 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{64 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{65   \textcolor{comment}{// serial is now connected}}
\DoxyCodeLine{66   \mbox{\hyperlink{classSerialComs_a37f271645e04061426c44a769e82a1fe}{m\_serialConnected}} = \textcolor{keyword}{true};}
\DoxyCodeLine{67   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{68 \}}

\end{DoxyCode}


References Time\+::get\+Curtime(), is\+Connected(), m\+\_\+last\+Check, m\+\_\+serial\+Connected, and MAX\+\_\+\+SERIAL\+\_\+\+CHECK\+\_\+\+INTERVAL.



Referenced by Editor\+Connection\+::run().

\mbox{\Hypertarget{classSerialComs_a4da654c236a9ca2ce7b47bc775303adf}\label{classSerialComs_a4da654c236a9ca2ce7b47bc775303adf}} 
\index{SerialComs@{SerialComs}!cleanup@{cleanup}}
\index{cleanup@{cleanup}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{cleanup()}{cleanup()}}
{\footnotesize\ttfamily void Serial\+Coms\+::cleanup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 26 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{27 \{}
\DoxyCodeLine{28 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classSerialComs_a03bd0843bc99d2a9c13507b4e4c1e8a3}\label{classSerialComs_a03bd0843bc99d2a9c13507b4e4c1e8a3}} 
\index{SerialComs@{SerialComs}!dataReady@{dataReady}}
\index{dataReady@{dataReady}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{dataReady()}{dataReady()}}
{\footnotesize\ttfamily bool Serial\+Coms\+::data\+Ready (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 135 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{136 \{}
\DoxyCodeLine{137 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{138   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{139     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{140   \}}
\DoxyCodeLine{141 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{142   \textcolor{keywordflow}{return} (Vortex::vcallbacks()-\/>serialAvail() > 0);}
\DoxyCodeLine{143 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{144   \textcolor{keywordflow}{return} (Serial.available() > 0);}
\DoxyCodeLine{145 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{146 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{147   \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{148 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{149 \}}

\end{DoxyCode}


References is\+Connected().

\mbox{\Hypertarget{classSerialComs_a6403cc48e107d19f9f1bb7e69006d0bc}\label{classSerialComs_a6403cc48e107d19f9f1bb7e69006d0bc}} 
\index{SerialComs@{SerialComs}!init@{init}}
\index{init@{init}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily bool Serial\+Coms\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 19 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{20 \{}
\DoxyCodeLine{21   \textcolor{comment}{// Try connecting serial ?}}
\DoxyCodeLine{22   \textcolor{comment}{//checkSerial();}}
\DoxyCodeLine{23   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{24 \}}

\end{DoxyCode}
\mbox{\Hypertarget{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}\label{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}} 
\index{SerialComs@{SerialComs}!isConnected@{isConnected}}
\index{isConnected@{isConnected}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{isConnected()}{isConnected()}}
{\footnotesize\ttfamily bool Serial\+Coms\+::is\+Connected (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 30 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{31 \{}
\DoxyCodeLine{32   \textcolor{keywordflow}{return} \mbox{\hyperlink{classSerialComs_a37f271645e04061426c44a769e82a1fe}{m\_serialConnected}};}
\DoxyCodeLine{33 \}}

\end{DoxyCode}


References m\+\_\+serial\+Connected.



Referenced by check\+Serial(), data\+Ready(), read(), Editor\+Connection\+::run(), and write().

\mbox{\Hypertarget{classSerialComs_a713db35f7f3e79772a55a87979154b07}\label{classSerialComs_a713db35f7f3e79772a55a87979154b07}} 
\index{SerialComs@{SerialComs}!read@{read}}
\index{read@{read}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{read()}{read()}}
{\footnotesize\ttfamily void Serial\+Coms\+::read (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&}]{byte\+Stream }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 107 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{108 \{}
\DoxyCodeLine{109 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{110   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{111     \textcolor{keywordflow}{return};}
\DoxyCodeLine{112   \}}
\DoxyCodeLine{113 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{114   uint32\_t amt = Vortex::vcallbacks()-\/>serialAvail();}
\DoxyCodeLine{115 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{116   uint32\_t amt = Serial.available();}
\DoxyCodeLine{117 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{118   \textcolor{keywordflow}{if} (!amt) \{}
\DoxyCodeLine{119     \textcolor{keywordflow}{return};}
\DoxyCodeLine{120   \}}
\DoxyCodeLine{121   \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{122     uint8\_t \textcolor{keywordtype}{byte} = 0;}
\DoxyCodeLine{123 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{124     \textcolor{keywordflow}{if} (!Vortex::vcallbacks()-\/>serialRead((\textcolor{keywordtype}{char} *)\&\textcolor{keywordtype}{byte}, 1)) \{}
\DoxyCodeLine{125       \textcolor{keywordflow}{return};}
\DoxyCodeLine{126     \}}
\DoxyCodeLine{127 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{128     \textcolor{keywordtype}{byte} = Serial.read();}
\DoxyCodeLine{129 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{130     byteStream.\mbox{\hyperlink{classByteStream_a16016f5dc73e0d8b639f6bdbea252d4b}{serialize}}(\textcolor{keywordtype}{byte});}
\DoxyCodeLine{131   \} \textcolor{keywordflow}{while} (-\/-\/amt > 0);}
\DoxyCodeLine{132 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{133 \}}

\end{DoxyCode}


References is\+Connected(), and Byte\+Stream\+::serialize().



Referenced by Editor\+Connection\+::receive\+Data().

\mbox{\Hypertarget{classSerialComs_abe17d9868d282aa3cb990b9e7a7597c1}\label{classSerialComs_abe17d9868d282aa3cb990b9e7a7597c1}} 
\index{SerialComs@{SerialComs}!write@{write}}
\index{write@{write}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{write()}{write()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily void Serial\+Coms\+::write (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&}]{byte\+Stream }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 89 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{90 \{}
\DoxyCodeLine{91 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{92   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{93     \textcolor{keywordflow}{return};}
\DoxyCodeLine{94   \}}
\DoxyCodeLine{95   byteStream.\mbox{\hyperlink{classByteStream_a282f071ea249471c360d364642f9b3c7}{recalcCRC}}();}
\DoxyCodeLine{96   uint32\_t size = byteStream.\mbox{\hyperlink{classByteStream_a755097adde5b21b33d3c4e3623d04f97}{rawSize}}();}
\DoxyCodeLine{97 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{98   Vortex::vcallbacks()-\/>serialWrite((\textcolor{keyword}{const} uint8\_t *)\&size, \textcolor{keyword}{sizeof}(size));}
\DoxyCodeLine{99   Vortex::vcallbacks()-\/>serialWrite((\textcolor{keyword}{const} uint8\_t *)byteStream.\mbox{\hyperlink{classByteStream_a6993f9575592309a501156db31f82554}{rawData}}(), byteStream.\mbox{\hyperlink{classByteStream_a755097adde5b21b33d3c4e3623d04f97}{rawSize}}());}
\DoxyCodeLine{100 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{101   Serial.write((\textcolor{keyword}{const} uint8\_t *)\&size, \textcolor{keyword}{sizeof}(size));}
\DoxyCodeLine{102   Serial.write((\textcolor{keyword}{const} uint8\_t *)byteStream.\mbox{\hyperlink{classByteStream_a6993f9575592309a501156db31f82554}{rawData}}(), byteStream.\mbox{\hyperlink{classByteStream_a755097adde5b21b33d3c4e3623d04f97}{rawSize}}());}
\DoxyCodeLine{103 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{104 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{105 \}}

\end{DoxyCode}


References is\+Connected(), Byte\+Stream\+::raw\+Data(), Byte\+Stream\+::raw\+Size(), and Byte\+Stream\+::recalc\+CRC().

\mbox{\Hypertarget{classSerialComs_a9122c58c6da4240df7dcf3e9ef213245}\label{classSerialComs_a9122c58c6da4240df7dcf3e9ef213245}} 
\index{SerialComs@{SerialComs}!write@{write}}
\index{write@{write}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{write()}{write()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily void Serial\+Coms\+::write (\begin{DoxyParamCaption}\item[{const char $\ast$}]{msg,  }\item[{}]{... }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 70 of file Serial.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{71 \{}
\DoxyCodeLine{72 \textcolor{preprocessor}{\#if VORTEX\_SLIM == 0}}
\DoxyCodeLine{73   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classSerialComs_ac6a8cc107fd0997dcd0f87a2b81ecd82}{isConnected}}()) \{}
\DoxyCodeLine{74     \textcolor{keywordflow}{return};}
\DoxyCodeLine{75   \}}
\DoxyCodeLine{76   va\_list list;}
\DoxyCodeLine{77   va\_start(list, msg);}
\DoxyCodeLine{78   uint8\_t buf[2048] = \{0\};}
\DoxyCodeLine{79   \textcolor{keywordtype}{int} len = vsnprintf((\textcolor{keywordtype}{char} *)buf, \textcolor{keyword}{sizeof}(buf), msg, list);}
\DoxyCodeLine{80 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{81   Vortex::vcallbacks()-\/>serialWrite(buf, len);}
\DoxyCodeLine{82 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{83   Serial.write(buf, len);}
\DoxyCodeLine{84 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{85   va\_end(list);}
\DoxyCodeLine{86 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{87 \}}

\end{DoxyCode}


References is\+Connected().



Referenced by Editor\+Connection\+::leave\+Menu(), Editor\+Connection\+::run(), and Editor\+Connection\+::send\+Modes().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}\label{classSerialComs_a8f0805c088fb29b00827b63ef1e8a6c3}} 
\index{SerialComs@{SerialComs}!m\_lastCheck@{m\_lastCheck}}
\index{m\_lastCheck@{m\_lastCheck}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{m\_lastCheck}{m\_lastCheck}}
{\footnotesize\ttfamily uint32\+\_\+t Serial\+Coms\+::m\+\_\+last\+Check = 0\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 38 of file Serial.\+h.



Referenced by check\+Serial().

\mbox{\Hypertarget{classSerialComs_a37f271645e04061426c44a769e82a1fe}\label{classSerialComs_a37f271645e04061426c44a769e82a1fe}} 
\index{SerialComs@{SerialComs}!m\_serialConnected@{m\_serialConnected}}
\index{m\_serialConnected@{m\_serialConnected}!SerialComs@{SerialComs}}
\doxysubsubsection{\texorpdfstring{m\_serialConnected}{m\_serialConnected}}
{\footnotesize\ttfamily bool Serial\+Coms\+::m\+\_\+serial\+Connected = false\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 37 of file Serial.\+h.



Referenced by check\+Serial(), and is\+Connected().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Vortex\+Engine/src/\+Serial/\mbox{\hyperlink{Serial_8h}{Serial.\+h}}\item 
Vortex\+Engine/src/\+Serial/\mbox{\hyperlink{Serial_8cpp}{Serial.\+cpp}}\end{DoxyCompactItemize}

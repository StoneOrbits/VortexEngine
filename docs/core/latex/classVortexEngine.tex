\hypertarget{classVortexEngine}{}\doxysection{Vortex\+Engine Class Reference}
\label{classVortexEngine}\index{VortexEngine@{VortexEngine}}


{\ttfamily \#include $<$Vortex\+Engine.\+h$>$}

\doxysubsection*{Static Public Member Functions}
\begin{DoxyCompactItemize}
\item 
static bool \mbox{\hyperlink{classVortexEngine_a7d0883a55ea519ac58a24637c0cc38d2}{init}} ()
\item 
static void \mbox{\hyperlink{classVortexEngine_ae80679477cd0c0f726e610b26fc1a6db}{cleanup}} ()
\item 
static void \mbox{\hyperlink{classVortexEngine_ad824edd37d12e0ba7efafd8cd844e1b7}{tick}} ()
\item 
static void \mbox{\hyperlink{classVortexEngine_ad8500f86579f3e6d9f887698e181b4d2}{run\+Main\+Logic}} ()
\item 
static bool \mbox{\hyperlink{classVortexEngine_a194a57be4545c9e7d0ceb0df6cf3d7e8}{serialize\+Version}} (\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&stream)
\item 
static bool \mbox{\hyperlink{classVortexEngine_aa85a9e4f12bc72bedd7b0a9c5a9bd970}{check\+Version}} (uint8\+\_\+t major, uint8\+\_\+t minor)
\item 
static \mbox{\hyperlink{classMode}{Mode}} $\ast$ \mbox{\hyperlink{classVortexEngine_affa9de921adbc32fd04e0b10143a8e58}{cur\+Mode}} ()
\item 
static void \mbox{\hyperlink{classVortexEngine_a4b2b59ca72d6cd1115ac6cd7c1672e44}{enter\+Sleep}} (bool save=true)
\item 
static void \mbox{\hyperlink{classVortexEngine_a32e7878bb1f4e4c4d141e849ff7808fb}{wakeup}} (bool reset=true)
\item 
static void \mbox{\hyperlink{classVortexEngine_a82c5e580e41f61e12d52ba5baee97fdf}{set\+Auto\+Cycle}} (bool enabled)
\end{DoxyCompactItemize}
\doxysubsection*{Private Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{classVortexEngine_aa41d7d79ef441d989d1d8deaf3490ccd}{Vortex\+Engine}} ()
\end{DoxyCompactItemize}
\doxysubsection*{Static Private Attributes}
\begin{DoxyCompactItemize}
\item 
static volatile bool \mbox{\hyperlink{classVortexEngine_a68bdf824c4c7b2303a1b1a37da67f496}{m\+\_\+sleeping}} = false
\item 
static bool \mbox{\hyperlink{classVortexEngine_ae6812312d6c117bf487ea7d2754f8063}{m\+\_\+auto\+Cycle}} = false
\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}


Definition at line 10 of file Vortex\+Engine.\+h.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{classVortexEngine_aa41d7d79ef441d989d1d8deaf3490ccd}\label{classVortexEngine_aa41d7d79ef441d989d1d8deaf3490ccd}} 
\index{VortexEngine@{VortexEngine}!VortexEngine@{VortexEngine}}
\index{VortexEngine@{VortexEngine}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{VortexEngine()}{VortexEngine()}}
{\footnotesize\ttfamily Vortex\+Engine\+::\+Vortex\+Engine (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [private]}}



\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{classVortexEngine_aa85a9e4f12bc72bedd7b0a9c5a9bd970}\label{classVortexEngine_aa85a9e4f12bc72bedd7b0a9c5a9bd970}} 
\index{VortexEngine@{VortexEngine}!checkVersion@{checkVersion}}
\index{checkVersion@{checkVersion}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{checkVersion()}{checkVersion()}}
{\footnotesize\ttfamily bool Vortex\+Engine\+::check\+Version (\begin{DoxyParamCaption}\item[{uint8\+\_\+t}]{major,  }\item[{uint8\+\_\+t}]{minor }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 221 of file Vortex\+Engine.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{222 \{}
\DoxyCodeLine{223   \textcolor{keywordflow}{if} (major != \mbox{\hyperlink{VortexConfig_8h_ad51691e0bf3c0a33a9b4929507a7d4d8}{VORTEX\_VERSION\_MAJOR}}) \{}
\DoxyCodeLine{224     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{225   \}}
\DoxyCodeLine{226   \textcolor{comment}{// minor version doesn't matter}}
\DoxyCodeLine{227   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{228 \}}

\end{DoxyCode}


References V\+O\+R\+T\+E\+X\+\_\+\+V\+E\+R\+S\+I\+O\+N\+\_\+\+M\+A\+J\+OR.



Referenced by Mode\+::load\+From\+Buffer(), Vortex\+::load\+Json(), and Modes\+::unserialize\+Save\+Header().

\mbox{\Hypertarget{classVortexEngine_ae80679477cd0c0f726e610b26fc1a6db}\label{classVortexEngine_ae80679477cd0c0f726e610b26fc1a6db}} 
\index{VortexEngine@{VortexEngine}!cleanup@{cleanup}}
\index{cleanup@{cleanup}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{cleanup()}{cleanup()}}
{\footnotesize\ttfamily void Vortex\+Engine\+::cleanup (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 101 of file Vortex\+Engine.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{102 \{}
\DoxyCodeLine{103   \textcolor{comment}{// cleanup in reverse order}}
\DoxyCodeLine{104   \textcolor{comment}{// NOTE: the embedded doesn't actually cleanup,}}
\DoxyCodeLine{105   \textcolor{comment}{//       but the test frameworks do}}
\DoxyCodeLine{106 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{107   \mbox{\hyperlink{classModes_aa16cf03f84bc5d911d220580ba3aeb7a}{Modes::cleanup}}();}
\DoxyCodeLine{108   \mbox{\hyperlink{classMenus_afb9e47baa1d7322d865bc025202d7b9b}{Menus::cleanup}}();}
\DoxyCodeLine{109   \mbox{\hyperlink{classButtons_a4bee1374d1782a6006faee6f9d9bb792}{Buttons::cleanup}}();}
\DoxyCodeLine{110   \mbox{\hyperlink{classLeds_a2292420b1011485e315eff165bb201cf}{Leds::cleanup}}();}
\DoxyCodeLine{111 \textcolor{preprocessor}{\#if VL\_ENABLE\_SENDER == 1}}
\DoxyCodeLine{112   \mbox{\hyperlink{classVLSender_a49afba3c3cae06136ad8744e367fcdb3}{VLSender::cleanup}}();}
\DoxyCodeLine{113 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{114 \textcolor{preprocessor}{\#if VL\_ENABLE\_RECEIVER == 1}}
\DoxyCodeLine{115   \mbox{\hyperlink{classVLReceiver_a31fba601a6e82bc043c7d017d91ce015}{VLReceiver::cleanup}}();}
\DoxyCodeLine{116 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{117 \textcolor{preprocessor}{\#if IR\_ENABLE\_SENDER == 1}}
\DoxyCodeLine{118   \mbox{\hyperlink{classIRSender_a4d6de9609f8e501e494cb431082d800a}{IRSender::cleanup}}();}
\DoxyCodeLine{119 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{120 \textcolor{preprocessor}{\#if IR\_ENABLE\_RECEIVER == 1}}
\DoxyCodeLine{121   \mbox{\hyperlink{classIRReceiver_ad2ff2918f176f499520fcc457c56a089}{IRReceiver::cleanup}}();}
\DoxyCodeLine{122 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{123   \mbox{\hyperlink{classStorage_a2a1ce108c9a17f6175bfb9a9aba51703}{Storage::cleanup}}();}
\DoxyCodeLine{124   \mbox{\hyperlink{classTime_af813bd1f7e4c08f6d84f8831738fed32}{Time::cleanup}}();}
\DoxyCodeLine{125   \mbox{\hyperlink{classSerialComs_a4da654c236a9ca2ce7b47bc775303adf}{SerialComs::cleanup}}();}
\DoxyCodeLine{126 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{127 \}}

\end{DoxyCode}


References Serial\+Coms\+::cleanup(), V\+L\+Sender\+::cleanup(), Storage\+::cleanup(), I\+R\+Sender\+::cleanup(), Buttons\+::cleanup(), Leds\+::cleanup(), I\+R\+Receiver\+::cleanup(), V\+L\+Receiver\+::cleanup(), Time\+::cleanup(), Modes\+::cleanup(), and Menus\+::cleanup().



Referenced by Vortex\+::cleanup(), and wakeup().

\mbox{\Hypertarget{classVortexEngine_affa9de921adbc32fd04e0b10143a8e58}\label{classVortexEngine_affa9de921adbc32fd04e0b10143a8e58}} 
\index{VortexEngine@{VortexEngine}!curMode@{curMode}}
\index{curMode@{curMode}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{curMode()}{curMode()}}
{\footnotesize\ttfamily \mbox{\hyperlink{classMode}{Mode}} $\ast$ Vortex\+Engine\+::cur\+Mode (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 230 of file Vortex\+Engine.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{231 \{}
\DoxyCodeLine{232 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{233   \textcolor{keywordflow}{return} \mbox{\hyperlink{classModes_a1e520dc2ee457bc93a795e9945249dbd}{Modes::curMode}}();}
\DoxyCodeLine{234 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{235   \textcolor{comment}{// don't need this outside vortex lib}}
\DoxyCodeLine{236   \textcolor{keywordflow}{return} \textcolor{keyword}{nullptr};}
\DoxyCodeLine{237 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{238 \}}

\end{DoxyCode}


References Modes\+::cur\+Mode().

\mbox{\Hypertarget{classVortexEngine_a4b2b59ca72d6cd1115ac6cd7c1672e44}\label{classVortexEngine_a4b2b59ca72d6cd1115ac6cd7c1672e44}} 
\index{VortexEngine@{VortexEngine}!enterSleep@{enterSleep}}
\index{enterSleep@{enterSleep}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{enterSleep()}{enterSleep()}}
{\footnotesize\ttfamily void Vortex\+Engine\+::enter\+Sleep (\begin{DoxyParamCaption}\item[{bool}]{save = {\ttfamily true} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 252 of file Vortex\+Engine.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{253 \{}
\DoxyCodeLine{254   \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Sleeping"});}
\DoxyCodeLine{255   \textcolor{keywordflow}{if} (save) \{}
\DoxyCodeLine{256     \textcolor{comment}{// update the startup mode when going to sleep}}
\DoxyCodeLine{257     \mbox{\hyperlink{classModes_a86dc60444399ab04d49f77935f68e8dd}{Modes::setStartupMode}}(\mbox{\hyperlink{classModes_a7a1b8d5c48237ab106adbfc44ceb1055}{Modes::curModeIndex}}());}
\DoxyCodeLine{258     \textcolor{comment}{// save anything that hasn't been saved}}
\DoxyCodeLine{259     \mbox{\hyperlink{classModes_a1756081ee85dbcf672ddad5a3dcb4690}{Modes::saveStorage}}();}
\DoxyCodeLine{260   \}}
\DoxyCodeLine{261   \textcolor{comment}{// clear all the leds}}
\DoxyCodeLine{262   \mbox{\hyperlink{classLeds_a6f7c9cdfab407455403167fd8f2c350a}{Leds::clearAll}}();}
\DoxyCodeLine{263   \mbox{\hyperlink{classLeds_a7b552b40079b1179fd47f7aeea88878d}{Leds::update}}();}
\DoxyCodeLine{264   \textcolor{comment}{// enable the sleep bool}}
\DoxyCodeLine{265   \mbox{\hyperlink{classVortexEngine_a68bdf824c4c7b2303a1b1a37da67f496}{m\_sleeping}} = \textcolor{keyword}{true};}
\DoxyCodeLine{266 \}}

\end{DoxyCode}


References Leds\+::clear\+All(), Modes\+::cur\+Mode\+Index(), D\+E\+B\+U\+G\+\_\+\+L\+OG, m\+\_\+sleeping, Modes\+::save\+Storage(), Modes\+::set\+Startup\+Mode(), and Leds\+::update().



Referenced by Vortex\+::enter\+Sleep().

\mbox{\Hypertarget{classVortexEngine_a7d0883a55ea519ac58a24637c0cc38d2}\label{classVortexEngine_a7d0883a55ea519ac58a24637c0cc38d2}} 
\index{VortexEngine@{VortexEngine}!init@{init}}
\index{init@{init}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{init()}{init()}}
{\footnotesize\ttfamily bool Vortex\+Engine\+::init (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 30 of file Vortex\+Engine.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{31 \{}
\DoxyCodeLine{32   \textcolor{comment}{// all of the global controllers}}
\DoxyCodeLine{33   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classSerialComs_a6403cc48e107d19f9f1bb7e69006d0bc}{SerialComs::init}}()) \{}
\DoxyCodeLine{34     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Serial failed to initialize"});}
\DoxyCodeLine{35     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{36   \}}
\DoxyCodeLine{37   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classTime_a0058db559daacf8050e8a0b1d4b9fd8c}{Time::init}}()) \{}
\DoxyCodeLine{38     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Time failed to initialize"});}
\DoxyCodeLine{39     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{40   \}}
\DoxyCodeLine{41   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classStorage_a065812a8dbd82d731291b5aa7ce3edf9}{Storage::init}}()) \{}
\DoxyCodeLine{42     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Storage failed to initialize"});}
\DoxyCodeLine{43     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{44   \}}
\DoxyCodeLine{45 \textcolor{preprocessor}{\#if IR\_ENABLE\_RECEIVER == 1}}
\DoxyCodeLine{46   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classIRReceiver_aad4e38923e65bec4c02197c56ec6a4af}{IRReceiver::init}}()) \{}
\DoxyCodeLine{47     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"IRReceiver failed to initialize"});}
\DoxyCodeLine{48     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{49   \}}
\DoxyCodeLine{50 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{51 \textcolor{preprocessor}{\#if IR\_ENABLE\_SENDER == 1}}
\DoxyCodeLine{52   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classIRSender_afcdf3f0f7c226c706f905c33e784057a}{IRSender::init}}()) \{}
\DoxyCodeLine{53     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"IRSender failed to initialize"});}
\DoxyCodeLine{54     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{55   \}}
\DoxyCodeLine{56 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{57 \textcolor{preprocessor}{\#if VL\_ENABLE\_RECEIVER == 1}}
\DoxyCodeLine{58   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classVLReceiver_a406cd003a5d26bfe07470261fdb022c1}{VLReceiver::init}}()) \{}
\DoxyCodeLine{59     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"VLReceiver failed to initialize"});}
\DoxyCodeLine{60     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{61   \}}
\DoxyCodeLine{62 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{63 \textcolor{preprocessor}{\#if VL\_ENABLE\_SENDER == 1}}
\DoxyCodeLine{64   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classVLSender_afe2303e108c0aad37695e257f1ba4dad}{VLSender::init}}()) \{}
\DoxyCodeLine{65     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"VLSender failed to initialize"});}
\DoxyCodeLine{66     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{67   \}}
\DoxyCodeLine{68 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{69   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classLeds_aa470a02f29041f373be156dc698ed4c7}{Leds::init}}()) \{}
\DoxyCodeLine{70     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Leds failed to initialize"});}
\DoxyCodeLine{71     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{72   \}}
\DoxyCodeLine{73   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classButtons_ac5767a8af9ce64e39231833ad1b166ea}{Buttons::init}}()) \{}
\DoxyCodeLine{74     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Buttons failed to initialize"});}
\DoxyCodeLine{75     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{76   \}}
\DoxyCodeLine{77   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classMenus_a370c7e15fdcd035a2816b9db1adab189}{Menus::init}}()) \{}
\DoxyCodeLine{78     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Menus failed to initialize"});}
\DoxyCodeLine{79     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{80   \}}
\DoxyCodeLine{81   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classModes_a8b920de981d96ca9365b766a3f59fb73}{Modes::init}}()) \{}
\DoxyCodeLine{82     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Settings failed to initialize"});}
\DoxyCodeLine{83     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{84   \}}
\DoxyCodeLine{85 }
\DoxyCodeLine{86 \textcolor{preprocessor}{\#if COMPRESSION\_TEST == 1}}
\DoxyCodeLine{87   compressionTest();}
\DoxyCodeLine{88 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{89 }
\DoxyCodeLine{90 \textcolor{preprocessor}{\#if SERIALIZATION\_TEST == 1}}
\DoxyCodeLine{91   serializationTest();}
\DoxyCodeLine{92 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94 \textcolor{preprocessor}{\#if TIMER\_TEST == 1}}
\DoxyCodeLine{95   timerTest();}
\DoxyCodeLine{96 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{97 }
\DoxyCodeLine{98   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{99 \}}

\end{DoxyCode}


References D\+E\+B\+U\+G\+\_\+\+L\+OG, Serial\+Coms\+::init(), Storage\+::init(), V\+L\+Sender\+::init(), I\+R\+Sender\+::init(), Leds\+::init(), Buttons\+::init(), I\+R\+Receiver\+::init(), V\+L\+Receiver\+::init(), Time\+::init(), Modes\+::init(), and Menus\+::init().



Referenced by Vortex\+::init(), and wakeup().

\mbox{\Hypertarget{classVortexEngine_ad8500f86579f3e6d9f887698e181b4d2}\label{classVortexEngine_ad8500f86579f3e6d9f887698e181b4d2}} 
\index{VortexEngine@{VortexEngine}!runMainLogic@{runMainLogic}}
\index{runMainLogic@{runMainLogic}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{runMainLogic()}{runMainLogic()}}
{\footnotesize\ttfamily void Vortex\+Engine\+::run\+Main\+Logic (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 170 of file Vortex\+Engine.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{171 \{}
\DoxyCodeLine{172   \textcolor{comment}{// the current tick}}
\DoxyCodeLine{173   uint32\_t now = \mbox{\hyperlink{classTime_a7c7a8e067bdbd5aaf119521539d30940}{Time::getCurtime}}();}
\DoxyCodeLine{174 }
\DoxyCodeLine{175   \textcolor{comment}{// load modes if necessary}}
\DoxyCodeLine{176   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{classModes_a4d97b331857953933fe45825cdef1d3a}{Modes::load}}()) \{}
\DoxyCodeLine{177     \textcolor{comment}{// don't do anything if modes couldn't load}}
\DoxyCodeLine{178     \textcolor{keywordflow}{return};}
\DoxyCodeLine{179   \}}
\DoxyCodeLine{180 }
\DoxyCodeLine{181   \textcolor{comment}{// if the menus are open and running then just return}}
\DoxyCodeLine{182   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classMenus_ab7628e9188ad88b34acfb72f498b5a7c}{Menus::run}}()) \{}
\DoxyCodeLine{183     \textcolor{keywordflow}{return};}
\DoxyCodeLine{184   \}}
\DoxyCodeLine{185 }
\DoxyCodeLine{186   \textcolor{comment}{// check if we should enter the menu}}
\DoxyCodeLine{187   \textcolor{keywordflow}{if} (\mbox{\hyperlink{Button_8h_a0f2e1bfb2e10150496ad7fb75420713b}{g\_pButton}}-\/>\mbox{\hyperlink{classButton_a6ed2a4b4e00facf5c42a11ecd1f4e1c7}{isPressed}}() \&\& \mbox{\hyperlink{Button_8h_a0f2e1bfb2e10150496ad7fb75420713b}{g\_pButton}}-\/>\mbox{\hyperlink{classButton_a2e0dae337117cd85f69c8346d369504a}{holdDuration}}() > \mbox{\hyperlink{Timings_8h_a155fc794adbdc762cfbc71f55a04bc22}{MENU\_TRIGGER\_THRESHOLD\_TICKS}}) \{}
\DoxyCodeLine{188     \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Entering Menu Selection..."});}
\DoxyCodeLine{189     \mbox{\hyperlink{classMenus_a1f8dacb375bd4d1ec18da2ed5a3e8cb3}{Menus::openMenuSelection}}();}
\DoxyCodeLine{190     \textcolor{keywordflow}{return};}
\DoxyCodeLine{191   \}}
\DoxyCodeLine{192 }
\DoxyCodeLine{193   \textcolor{comment}{// toggle auto cycle mode with many clicks at main modes}}
\DoxyCodeLine{194   \textcolor{keywordflow}{if} ((\mbox{\hyperlink{Button_8h_a0f2e1bfb2e10150496ad7fb75420713b}{g\_pButton}}-\/>\mbox{\hyperlink{classButton_a277f0bc922ec0cb3a20b6aaf43e9b94e}{onRelease}}() \&\& \mbox{\hyperlink{classVortexEngine_ae6812312d6c117bf487ea7d2754f8063}{m\_autoCycle}}) || \mbox{\hyperlink{Button_8h_a0f2e1bfb2e10150496ad7fb75420713b}{g\_pButton}}-\/>\mbox{\hyperlink{classButton_af08888134084d0640b6a891bdb755f14}{onConsecutivePresses}}(\mbox{\hyperlink{VortexConfig_8h_a99fb9bcab397455dbf9c0e2aa904d2d9}{AUTO\_CYCLE\_MODES\_CLICKS}})) \{}
\DoxyCodeLine{195     \mbox{\hyperlink{classVortexEngine_ae6812312d6c117bf487ea7d2754f8063}{m\_autoCycle}} = !\mbox{\hyperlink{classVortexEngine_ae6812312d6c117bf487ea7d2754f8063}{m\_autoCycle}};}
\DoxyCodeLine{196     \mbox{\hyperlink{classLeds_a5a3e2c090aa782f4ee7c71c01e8d8a69}{Leds::holdAll}}(\mbox{\hyperlink{classVortexEngine_ae6812312d6c117bf487ea7d2754f8063}{m\_autoCycle}} ? \mbox{\hyperlink{ColorConstants_8h_ab6c97468034c02fe204fd37036d9be15}{RGB\_GREEN}} : \mbox{\hyperlink{ColorConstants_8h_aa039288455af8a3812a35aa1e7b903e4}{RGB\_RED}});}
\DoxyCodeLine{197   \}}
\DoxyCodeLine{198 }
\DoxyCodeLine{199   \textcolor{comment}{// if auto cycle is enabled and the last switch was more than the delay ago}}
\DoxyCodeLine{200   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classVortexEngine_ae6812312d6c117bf487ea7d2754f8063}{m\_autoCycle}} \&\& (\mbox{\hyperlink{classModes_ac20debd8d48811c3e669cc601996925d}{Modes::lastSwitchTime}}() + \mbox{\hyperlink{VortexConfig_8h_ae54a4f60fb47ad89ca3c3aafc3e77860}{AUTO\_RANDOM\_DELAY}} < now)) \{}
\DoxyCodeLine{201     \textcolor{comment}{// then switch to the next mode automatically}}
\DoxyCodeLine{202     \mbox{\hyperlink{classModes_ac9a4c95f7e899dc2732f65ebe78559c2}{Modes::nextMode}}();}
\DoxyCodeLine{203   \}}
\DoxyCodeLine{204 }
\DoxyCodeLine{205   \textcolor{comment}{// otherwise just play the modes}}
\DoxyCodeLine{206   \mbox{\hyperlink{classModes_a9e98b568fcd3d00b7c3f0705b5120925}{Modes::play}}();}
\DoxyCodeLine{207 \}}

\end{DoxyCode}


References A\+U\+T\+O\+\_\+\+C\+Y\+C\+L\+E\+\_\+\+M\+O\+D\+E\+S\+\_\+\+C\+L\+I\+C\+KS, A\+U\+T\+O\+\_\+\+R\+A\+N\+D\+O\+M\+\_\+\+D\+E\+L\+AY, D\+E\+B\+U\+G\+\_\+\+L\+OG, g\+\_\+p\+Button, Time\+::get\+Curtime(), Leds\+::hold\+All(), Button\+::hold\+Duration(), Button\+::is\+Pressed(), Modes\+::last\+Switch\+Time(), Modes\+::load(), m\+\_\+auto\+Cycle, M\+E\+N\+U\+\_\+\+T\+R\+I\+G\+G\+E\+R\+\_\+\+T\+H\+R\+E\+S\+H\+O\+L\+D\+\_\+\+T\+I\+C\+KS, Modes\+::next\+Mode(), Button\+::on\+Consecutive\+Presses(), Button\+::on\+Release(), Menus\+::open\+Menu\+Selection(), Modes\+::play(), R\+G\+B\+\_\+\+G\+R\+E\+EN, R\+G\+B\+\_\+\+R\+ED, and Menus\+::run().



Referenced by tick().

\mbox{\Hypertarget{classVortexEngine_a194a57be4545c9e7d0ceb0df6cf3d7e8}\label{classVortexEngine_a194a57be4545c9e7d0ceb0df6cf3d7e8}} 
\index{VortexEngine@{VortexEngine}!serializeVersion@{serializeVersion}}
\index{serializeVersion@{serializeVersion}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{serializeVersion()}{serializeVersion()}}
{\footnotesize\ttfamily bool Vortex\+Engine\+::serialize\+Version (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{classByteStream}{Byte\+Stream}} \&}]{stream }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 209 of file Vortex\+Engine.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{210 \{}
\DoxyCodeLine{211   \textcolor{comment}{// serialize the vortex version}}
\DoxyCodeLine{212   \textcolor{keywordflow}{if} (!stream.\mbox{\hyperlink{classByteStream_ad3b413f399f22d30548a61a5e01ef3a7}{serialize8}}((uint8\_t)\mbox{\hyperlink{VortexConfig_8h_ad51691e0bf3c0a33a9b4929507a7d4d8}{VORTEX\_VERSION\_MAJOR}})) \{}
\DoxyCodeLine{213     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{214   \}}
\DoxyCodeLine{215   \textcolor{keywordflow}{if} (!stream.\mbox{\hyperlink{classByteStream_ad3b413f399f22d30548a61a5e01ef3a7}{serialize8}}((uint8\_t)\mbox{\hyperlink{VortexConfig_8h_a5192bd4a7eea3a54e5b00405185d9d4d}{VORTEX\_VERSION\_MINOR}})) \{}
\DoxyCodeLine{216     \textcolor{keywordflow}{return} \textcolor{keyword}{false};}
\DoxyCodeLine{217   \}}
\DoxyCodeLine{218   \textcolor{keywordflow}{return} \textcolor{keyword}{true};}
\DoxyCodeLine{219 \}}

\end{DoxyCode}


References Byte\+Stream\+::serialize8(), V\+O\+R\+T\+E\+X\+\_\+\+V\+E\+R\+S\+I\+O\+N\+\_\+\+M\+A\+J\+OR, and V\+O\+R\+T\+E\+X\+\_\+\+V\+E\+R\+S\+I\+O\+N\+\_\+\+M\+I\+N\+OR.



Referenced by Mode\+::save\+To\+Buffer(), and Modes\+::serialize\+Save\+Header().

\mbox{\Hypertarget{classVortexEngine_a82c5e580e41f61e12d52ba5baee97fdf}\label{classVortexEngine_a82c5e580e41f61e12d52ba5baee97fdf}} 
\index{VortexEngine@{VortexEngine}!setAutoCycle@{setAutoCycle}}
\index{setAutoCycle@{setAutoCycle}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{setAutoCycle()}{setAutoCycle()}}
{\footnotesize\ttfamily static void Vortex\+Engine\+::set\+Auto\+Cycle (\begin{DoxyParamCaption}\item[{bool}]{enabled }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [static]}}



Definition at line 48 of file Vortex\+Engine.\+h.


\begin{DoxyCode}{0}
\DoxyCodeLine{48 \{ \mbox{\hyperlink{classVortexEngine_ae6812312d6c117bf487ea7d2754f8063}{m\_autoCycle}} = enabled; \}}

\end{DoxyCode}


References m\+\_\+auto\+Cycle.



Referenced by Factory\+Reset\+::on\+Long\+Click().

\mbox{\Hypertarget{classVortexEngine_ad824edd37d12e0ba7efafd8cd844e1b7}\label{classVortexEngine_ad824edd37d12e0ba7efafd8cd844e1b7}} 
\index{VortexEngine@{VortexEngine}!tick@{tick}}
\index{tick@{tick}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{tick()}{tick()}}
{\footnotesize\ttfamily void Vortex\+Engine\+::tick (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 129 of file Vortex\+Engine.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{130 \{}
\DoxyCodeLine{131 \textcolor{preprocessor}{\#ifdef VORTEX\_LIB}}
\DoxyCodeLine{132   \textcolor{keywordflow}{if} (\mbox{\hyperlink{classVortexEngine_a68bdf824c4c7b2303a1b1a37da67f496}{m\_sleeping}}) \{}
\DoxyCodeLine{133     \textcolor{comment}{// update the buttons to check for wake}}
\DoxyCodeLine{134     \mbox{\hyperlink{classButtons_a4e775beebe1f2c6dce04c82ed14741cb}{Buttons::update}}();}
\DoxyCodeLine{135     \textcolor{comment}{// several fast clicks will unlock the device}}
\DoxyCodeLine{136     \textcolor{keywordflow}{if} (\mbox{\hyperlink{classModes_abe515fae0059b1213ba544b613051e97}{Modes::locked}}() \&\& \mbox{\hyperlink{Button_8h_a0f2e1bfb2e10150496ad7fb75420713b}{g\_pButton}}-\/>\mbox{\hyperlink{classButton_af08888134084d0640b6a891bdb755f14}{onConsecutivePresses}}(\mbox{\hyperlink{VortexConfig_8h_a2f5ef442fae5fcc560776b23fa1ccef3}{DEVICE\_LOCK\_CLICKS}} -\/ 1)) \{}
\DoxyCodeLine{137       \textcolor{comment}{// turn off the lock flag and save it to disk}}
\DoxyCodeLine{138       \mbox{\hyperlink{classModes_a1ae90978222b457a941f0cbf7dd9b46b}{Modes::setLocked}}(\textcolor{keyword}{false});}
\DoxyCodeLine{139     \}}
\DoxyCodeLine{140     \textcolor{comment}{// check for any kind of press to wakeup}}
\DoxyCodeLine{141     \textcolor{keywordflow}{if} (\mbox{\hyperlink{Button_8h_a0f2e1bfb2e10150496ad7fb75420713b}{g\_pButton}}-\/>\mbox{\hyperlink{classButton_a0a4fbfb56d10cb2c6e69a35eb62b7292}{check}}() || \mbox{\hyperlink{Button_8h_a0f2e1bfb2e10150496ad7fb75420713b}{g\_pButton}}-\/>\mbox{\hyperlink{classButton_a277f0bc922ec0cb3a20b6aaf43e9b94e}{onRelease}}() || !\mbox{\hyperlink{classVortex_a4505d4c0636f135eb71163617277dd67}{Vortex::sleepEnabled}}()) \{}
\DoxyCodeLine{142       \mbox{\hyperlink{classVortexEngine_a32e7878bb1f4e4c4d141e849ff7808fb}{wakeup}}();}
\DoxyCodeLine{143     \}}
\DoxyCodeLine{144     \textcolor{keywordflow}{return};}
\DoxyCodeLine{145   \}}
\DoxyCodeLine{146 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{147   \textcolor{comment}{// handle any fatal errors that may have occurred}}
\DoxyCodeLine{148   \textcolor{comment}{// but only if the error blinker is enabled}}
\DoxyCodeLine{149 \textcolor{preprocessor}{\#if VORTEX\_ERROR\_BLINK == 1}}
\DoxyCodeLine{150   \textcolor{keywordflow}{if} (getError() != ERROR\_NONE) \{}
\DoxyCodeLine{151     \textcolor{comment}{// just blink the error and don't run anything}}
\DoxyCodeLine{152     blinkError();}
\DoxyCodeLine{153     \textcolor{keywordflow}{return};}
\DoxyCodeLine{154   \}}
\DoxyCodeLine{155 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{156 }
\DoxyCodeLine{157   \textcolor{comment}{// tick the current time counter forward}}
\DoxyCodeLine{158   \mbox{\hyperlink{classTime_a823b10e685d34b667e16e36fea96e150}{Time::tickClock}}();}
\DoxyCodeLine{159 }
\DoxyCodeLine{160   \textcolor{comment}{// poll the button(s) and update the button object states}}
\DoxyCodeLine{161   \mbox{\hyperlink{classButtons_a4e775beebe1f2c6dce04c82ed14741cb}{Buttons::update}}();}
\DoxyCodeLine{162 }
\DoxyCodeLine{163   \textcolor{comment}{// run the main logic for the engine}}
\DoxyCodeLine{164   \mbox{\hyperlink{classVortexEngine_ad8500f86579f3e6d9f887698e181b4d2}{runMainLogic}}();}
\DoxyCodeLine{165 }
\DoxyCodeLine{166   \textcolor{comment}{// update the leds}}
\DoxyCodeLine{167   \mbox{\hyperlink{classLeds_a7b552b40079b1179fd47f7aeea88878d}{Leds::update}}();}
\DoxyCodeLine{168 \}}

\end{DoxyCode}


References Button\+::check(), D\+E\+V\+I\+C\+E\+\_\+\+L\+O\+C\+K\+\_\+\+C\+L\+I\+C\+KS, g\+\_\+p\+Button, Modes\+::locked(), m\+\_\+sleeping, Button\+::on\+Consecutive\+Presses(), Button\+::on\+Release(), run\+Main\+Logic(), Modes\+::set\+Locked(), Vortex\+::sleep\+Enabled(), Time\+::tick\+Clock(), Buttons\+::update(), Leds\+::update(), and wakeup().



Referenced by Vortex\+::handle\+Input\+Queue(), and Vortex\+::tick().

\mbox{\Hypertarget{classVortexEngine_a32e7878bb1f4e4c4d141e849ff7808fb}\label{classVortexEngine_a32e7878bb1f4e4c4d141e849ff7808fb}} 
\index{VortexEngine@{VortexEngine}!wakeup@{wakeup}}
\index{wakeup@{wakeup}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{wakeup()}{wakeup()}}
{\footnotesize\ttfamily void Vortex\+Engine\+::wakeup (\begin{DoxyParamCaption}\item[{bool}]{reset = {\ttfamily true} }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 268 of file Vortex\+Engine.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{269 \{}
\DoxyCodeLine{270   \mbox{\hyperlink{Log_8h_a5d2f30bd1cbcf49f829a7e8eb6173c06}{DEBUG\_LOG}}(\textcolor{stringliteral}{"Waking up"});}
\DoxyCodeLine{271   \mbox{\hyperlink{classVortexEngine_a68bdf824c4c7b2303a1b1a37da67f496}{m\_sleeping}} = \textcolor{keyword}{false};}
\DoxyCodeLine{272   \textcolor{comment}{// need to fake the reset in vortexlib, lol this works I guess}}
\DoxyCodeLine{273   \textcolor{keywordflow}{if} (reset) \{}
\DoxyCodeLine{274     \mbox{\hyperlink{classVortexEngine_ae80679477cd0c0f726e610b26fc1a6db}{cleanup}}();}
\DoxyCodeLine{275     \mbox{\hyperlink{classVortexEngine_a7d0883a55ea519ac58a24637c0cc38d2}{init}}();}
\DoxyCodeLine{276   \}}
\DoxyCodeLine{277 \}}

\end{DoxyCode}


References cleanup(), D\+E\+B\+U\+G\+\_\+\+L\+OG, init(), and m\+\_\+sleeping.



Referenced by tick().



\doxysubsection{Member Data Documentation}
\mbox{\Hypertarget{classVortexEngine_ae6812312d6c117bf487ea7d2754f8063}\label{classVortexEngine_ae6812312d6c117bf487ea7d2754f8063}} 
\index{VortexEngine@{VortexEngine}!m\_autoCycle@{m\_autoCycle}}
\index{m\_autoCycle@{m\_autoCycle}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{m\_autoCycle}{m\_autoCycle}}
{\footnotesize\ttfamily bool Vortex\+Engine\+::m\+\_\+auto\+Cycle = false\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 55 of file Vortex\+Engine.\+h.



Referenced by run\+Main\+Logic(), and set\+Auto\+Cycle().

\mbox{\Hypertarget{classVortexEngine_a68bdf824c4c7b2303a1b1a37da67f496}\label{classVortexEngine_a68bdf824c4c7b2303a1b1a37da67f496}} 
\index{VortexEngine@{VortexEngine}!m\_sleeping@{m\_sleeping}}
\index{m\_sleeping@{m\_sleeping}!VortexEngine@{VortexEngine}}
\doxysubsubsection{\texorpdfstring{m\_sleeping}{m\_sleeping}}
{\footnotesize\ttfamily volatile bool Vortex\+Engine\+::m\+\_\+sleeping = false\hspace{0.3cm}{\ttfamily [static]}, {\ttfamily [private]}}



Definition at line 52 of file Vortex\+Engine.\+h.



Referenced by enter\+Sleep(), tick(), and wakeup().



The documentation for this class was generated from the following files\+:\begin{DoxyCompactItemize}
\item 
Vortex\+Engine/src/\mbox{\hyperlink{VortexEngine_8h}{Vortex\+Engine.\+h}}\item 
Vortex\+Engine/src/\mbox{\hyperlink{VortexEngine_8cpp}{Vortex\+Engine.\+cpp}}\end{DoxyCompactItemize}

\hypertarget{Compression_8cpp}{}\doxysection{Vortex\+Engine/src/\+Serial/\+Compression.cpp File Reference}
\label{Compression_8cpp}\index{VortexEngine/src/Serial/Compression.cpp@{VortexEngine/src/Serial/Compression.cpp}}
{\ttfamily \#include \char`\"{}Compression.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Memory/\+Memory.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}../\+Vortex\+Config.\+h\char`\"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$limits.\+h$>$}\newline
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stddef.\+h$>$}\newline
Include dependency graph for Compression.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{Compression_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a7d26a1c40d6107cf2f19558492591e67}{expect}}(expr,  value)~(expr)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_aa0672ea7123854cc5f51902a06c473fb}{likely}}(expr)~\mbox{\hyperlink{Compression_8cpp_a7d26a1c40d6107cf2f19558492591e67}{expect}}((expr) != 0, 1)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(expr)~\mbox{\hyperlink{Compression_8cpp_a7d26a1c40d6107cf2f19558492591e67}{expect}}((expr) != 0, 0)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a6c439b01b6c27280593774a911bfa4ac}{LZ4\+\_\+\+ALIGN\+\_\+\+TEST}}~0
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}}~4
\item 
\#define \mbox{\hyperlink{Compression_8cpp_ade83a0730ce39465e00284b8d1b29784}{WILDCOPYLENGTH}}~8
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}}~5   /$\ast$ see ../doc/lz4\+\_\+\+Block\+\_\+format.\+md\#parsing-\/restrictions $\ast$/
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}}~12   /$\ast$ see ../doc/lz4\+\_\+\+Block\+\_\+format.\+md\#parsing-\/restrictions $\ast$/
\item 
\#define \mbox{\hyperlink{Compression_8cpp_acd67b050f5c5a9c22357493223a620c0}{MATCH\+\_\+\+SAFEGUARD\+\_\+\+DISTANCE}}~((2$\ast$\mbox{\hyperlink{Compression_8cpp_ade83a0730ce39465e00284b8d1b29784}{WILDCOPYLENGTH}}) -\/ \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}})   /$\ast$ ensure it\textquotesingle{}s possible to write 2 x wildcopy\+Length without overflowing output buffer $\ast$/
\item 
\#define \mbox{\hyperlink{Compression_8cpp_aa7091dfd46e0c63c7974aa8cecae6207}{FASTLOOP\+\_\+\+SAFE\+\_\+\+DISTANCE}}~64
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a1841fd1a462d245d8c73dce55e2f45da}{KB}}~$\ast$(1 $<$$<$10)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_aa6b38d492364d98453284934ed7caee9}{MB}}~$\ast$(1 $<$$<$20)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a44172ac633c517cb4c9e278cef36b000}{GB}}~$\ast$(1U$<$$<$30)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a677dd41923a5dc079254ea9f689d78dd}{LZ4\+\_\+\+DISTANCE\+\_\+\+ABSOLUTE\+\_\+\+MAX}}~65535
\item 
\#define \mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\+\_\+\+BITS}}~4
\item 
\#define \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\+\_\+\+MASK}}~((1U$<$$<$\mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\+\_\+\+BITS}})-\/1)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_ae6261d794dfe7c6816e3b342c643f56f}{RUN\+\_\+\+BITS}}~(8-\/\mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\+\_\+\+BITS}})
\item 
\#define \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\+\_\+\+MASK}}~((1U$<$$<$\mbox{\hyperlink{Compression_8cpp_ae6261d794dfe7c6816e3b342c643f56f}{RUN\+\_\+\+BITS}})-\/1)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(condition)~((void)0)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a233a86aeac0d8f5c00236b4d8d055761}{LZ4\+\_\+\+STATIC\+\_\+\+ASSERT}}(c)~\{ enum \{ LZ4\+\_\+static\+\_\+assert = 1/(int)(!!(c)) \}; \}   /$\ast$ use after variable declarations $\ast$/
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(l, ...)~\{\}    /$\ast$ disabled $\ast$/
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\+\_\+memcpy}}(dst,  src,  size)~memcpy(dst, src, size)
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}{STEPSIZE}}~sizeof(\mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\+\_\+t}})
\item 
\#define \mbox{\hyperlink{Compression_8cpp_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}}(a,  b)~( (a) $<$ (b) ? (a) \+: (b) )
\end{DoxyCompactItemize}
\doxysubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef uint8\+\_\+t \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}}
\item 
typedef uint16\+\_\+t \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}}
\item 
typedef uint32\+\_\+t \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}
\item 
typedef int32\+\_\+t \mbox{\hyperlink{Compression_8cpp_a39c786017723555afb9e8b85accec0de}{S32}}
\item 
typedef uint64\+\_\+t \mbox{\hyperlink{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}{U64}}
\item 
typedef uintptr\+\_\+t \mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}}
\item 
typedef size\+\_\+t \mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\+\_\+t}}
\end{DoxyCompactItemize}
\doxysubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28}{limited\+Output\+\_\+directive}} \{ \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28adc568f9214a2932542608f43124efcff}{not\+Limited}} = 0
, \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a06ce6334cca200bdb7d30cf1422ca5aa}{limited\+Output}} = 1
, \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fill\+Output}} = 2
 \}
\item 
enum \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} \{ \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a160636a34765ad36416d316e62406d31}{cleared\+Table}} = 0
, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{by\+Ptr}}
, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{by\+U32}}
, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{by\+U16}}
 \}
\item 
enum \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}{dict\+\_\+directive}} \{ \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}{no\+Dict}} = 0
, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca34c34b9cfe0046130ff97acf6914519d}{with\+Prefix64k}}
, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}{using\+Ext\+Dict}}
, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{using\+Dict\+Ctx}}
 \}
\item 
enum \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351}{dict\+Issue\+\_\+directive}} \{ \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a2a95ee19c5c0704200f9154a4abcf115}{no\+Dict\+Issue}} = 0
, \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a4609b423b2c861fd5968b33837c76236}{dict\+Small}}
 \}
\item 
enum \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746}{end\+Condition\+\_\+directive}} \{ \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a92d766b3022f9d86ccf764d716a46b2a}{end\+On\+Output\+Size}} = 0
, \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a2a30c7b77002529763d202e7ac636539}{end\+On\+Input\+Size}} = 1
 \}
\item 
enum \mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994c}{early\+End\+\_\+directive}} \{ \mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994ca5551916aeb552806ac850d0875151113}{decode\+\_\+full\+\_\+block}} = 0
, \mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994ca032ce1b03f03cde2ed5ab8cfdf0d5e7f}{partial\+\_\+decode}} = 1
 \}
\item 
enum \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}{variable\+\_\+length\+\_\+error}} \{ \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a19c5cc5c8516ea67ef3b2ec2de6fc484}{loop\+\_\+error}} = -\/2
, \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a4dd6136f5d290f53a4ac8864c0a12f99}{initial\+\_\+error}} = -\/1
, \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}{ok}} = 0
 \}
\end{DoxyCompactItemize}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
static int \mbox{\hyperlink{Compression_8cpp_ac33d4ec2f474813cee3ee86163eba2ef}{LZ4\+\_\+is\+Aligned}} (const void $\ast$ptr, size\+\_\+t alignment)
\item 
static unsigned \mbox{\hyperlink{Compression_8cpp_aa8a9ba402bf00e8e6c21691085ae9601}{LZ4\+\_\+is\+Little\+Endian}} (void)
\item 
static \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} \mbox{\hyperlink{Compression_8cpp_adceb4c7713e1bed1554da37458db6fb6}{LZ4\+\_\+read16}} (const void $\ast$mem\+Ptr)
\item 
static \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\+\_\+read32}} (const void $\ast$mem\+Ptr)
\item 
static \mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\+\_\+t}} \mbox{\hyperlink{Compression_8cpp_a9f1c5198d0fac6d72364edbb87a390e4}{LZ4\+\_\+read\+\_\+\+ARCH}} (const void $\ast$mem\+Ptr)
\item 
static void \mbox{\hyperlink{Compression_8cpp_abdc399170f6061c35dd18315896339f8}{LZ4\+\_\+write16}} (void $\ast$mem\+Ptr, \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} value)
\item 
static void \mbox{\hyperlink{Compression_8cpp_a2e50fa2df2ee7536797308f96806df83}{LZ4\+\_\+write32}} (void $\ast$mem\+Ptr, \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} value)
\item 
static \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} \mbox{\hyperlink{Compression_8cpp_a69a8c81f7731ff4ae0d292541bbb2d69}{LZ4\+\_\+read\+LE16}} (const void $\ast$mem\+Ptr)
\item 
static void \mbox{\hyperlink{Compression_8cpp_a3a6a0833a6f5ee0e99c80cbae73ca3a7}{LZ4\+\_\+write\+LE16}} (void $\ast$mem\+Ptr, \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} value)
\item 
void \mbox{\hyperlink{Compression_8cpp_a107b5345286641379a50762ff7f5e906}{LZ4\+\_\+wild\+Copy8}} (void $\ast$dst\+Ptr, const void $\ast$src\+Ptr, void $\ast$dst\+End)
\item 
void \mbox{\hyperlink{Compression_8cpp_a4623ba84527053b711afd61375ac7d10}{LZ4\+\_\+memcpy\+\_\+using\+\_\+offset\+\_\+base}} (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$dst\+Ptr, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$src\+Ptr, \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$dst\+End, const size\+\_\+t offset)
\item 
void \mbox{\hyperlink{Compression_8cpp_a5279938c8ccf6c4a556db8eecd1190a8}{LZ4\+\_\+wild\+Copy32}} (void $\ast$dst\+Ptr, const void $\ast$src\+Ptr, void $\ast$dst\+End)
\item 
void \mbox{\hyperlink{Compression_8cpp_ac7c1a188fa7bd65cf4bf9f923040674c}{LZ4\+\_\+memcpy\+\_\+using\+\_\+offset}} (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$dst\+Ptr, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$src\+Ptr, \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$dst\+End, const size\+\_\+t offset)
\item 
static unsigned \mbox{\hyperlink{Compression_8cpp_a9a5ac6aa4f9fe1d17496b0deb44babf7}{LZ4\+\_\+\+Nb\+Common\+Bytes}} (\mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\+\_\+t}} val)
\item 
unsigned \mbox{\hyperlink{Compression_8cpp_a51be50a3bfabcb0a79edbe86e7d03d05}{LZ4\+\_\+count}} (const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$p\+In, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$p\+Match, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$p\+In\+Limit)
\item 
int \mbox{\hyperlink{Compression_8cpp_a2b09f5ca41ce609bb136d3637beffe04}{LZ4\+\_\+compress\+Bound}} (int isize)
\item 
\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \mbox{\hyperlink{Compression_8cpp_a3aa75886f3a0aa7a1e0fb0fdfb1964b0}{LZ4\+\_\+hash4}} (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} sequence, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const table\+Type)
\item 
\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \mbox{\hyperlink{Compression_8cpp_ac709e2d2a37fd4d14a5e41a3b410b8a2}{LZ4\+\_\+hash5}} (\mbox{\hyperlink{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}{U64}} sequence, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const table\+Type)
\item 
\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \mbox{\hyperlink{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}{LZ4\+\_\+hash\+Position}} (const void $\ast$const p, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const table\+Type)
\item 
void \mbox{\hyperlink{Compression_8cpp_aa78ea8add85520d31f262506d5adb830}{LZ4\+\_\+clear\+Hash}} (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} h, void $\ast$table\+Base, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const table\+Type)
\item 
void \mbox{\hyperlink{Compression_8cpp_afb1abdff740d4120870a053ff9afb1e5}{LZ4\+\_\+put\+Index\+On\+Hash}} (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} idx, \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} h, void $\ast$table\+Base, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const table\+Type)
\item 
void \mbox{\hyperlink{Compression_8cpp_ac31271a152c15422122862ef508fe13a}{LZ4\+\_\+put\+Position\+On\+Hash}} (const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$p, \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} h, void $\ast$table\+Base, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const table\+Type, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$src\+Base)
\item 
void \mbox{\hyperlink{Compression_8cpp_a758ae6d5b0a32072c833b9a03be20a37}{LZ4\+\_\+put\+Position}} (const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$p, void $\ast$table\+Base, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} table\+Type, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$src\+Base)
\item 
\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \mbox{\hyperlink{Compression_8cpp_a473d1db23ade92ad1be19e7720e56201}{LZ4\+\_\+get\+Index\+On\+Hash}} (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} h, const void $\ast$table\+Base, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} table\+Type)
\item 
static const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$ \mbox{\hyperlink{Compression_8cpp_abdc1313fe20c80eb1790fdf0fbdb30a0}{LZ4\+\_\+get\+Position\+On\+Hash}} (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} h, const void $\ast$table\+Base, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} table\+Type, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$src\+Base)
\item 
const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$ \mbox{\hyperlink{Compression_8cpp_ad90828b9bc0e6eaa8a880300d1292d4e}{LZ4\+\_\+get\+Position}} (const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$p, const void $\ast$table\+Base, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} table\+Type, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$src\+Base)
\item 
int \mbox{\hyperlink{Compression_8cpp_a9a690f1f67712d1ace9c4442696a4b88}{LZ4\+\_\+compress\+\_\+generic\+\_\+validated}} (\mbox{\hyperlink{structLZ4__stream__t__internal}{LZ4\+\_\+stream\+\_\+t\+\_\+internal}} $\ast$const cctx, const char $\ast$const source, char $\ast$const dest, const int input\+Size, int $\ast$input\+Consumed, const int max\+Output\+Size, const \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28}{limited\+Output\+\_\+directive}} output\+Directive, const \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} table\+Type, const \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}{dict\+\_\+directive}} dict\+Directive, const \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351}{dict\+Issue\+\_\+directive}} dict\+Issue, const int acceleration)
\item 
int \mbox{\hyperlink{Compression_8cpp_a7d75fe9e5e79ce7eaecfb3e3bdc92432}{LZ4\+\_\+compress\+\_\+generic}} (\mbox{\hyperlink{structLZ4__stream__t__internal}{LZ4\+\_\+stream\+\_\+t\+\_\+internal}} $\ast$const cctx, const char $\ast$const src, char $\ast$const dst, const int src\+Size, int $\ast$input\+Consumed, const int dst\+Capacity, const \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28}{limited\+Output\+\_\+directive}} output\+Directive, const \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} table\+Type, const \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}{dict\+\_\+directive}} dict\+Directive, const \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351}{dict\+Issue\+\_\+directive}} dict\+Issue, const int acceleration)
\item 
int \mbox{\hyperlink{Compression_8cpp_a19a6258c0092d5b3255a41d7566248d7}{LZ4\+\_\+compress\+\_\+fast\+\_\+ext\+State}} (void $\ast$state, const char $\ast$source, char $\ast$dest, int input\+Size, int max\+Output\+Size, int acceleration)
\item 
int \mbox{\hyperlink{Compression_8cpp_a7466a8eca8f7b2eeec7887c9371d21e1}{LZ4\+\_\+compress\+\_\+fast}} (const char $\ast$source, char $\ast$dest, int input\+Size, int max\+Output\+Size, int acceleration)
\item 
int \mbox{\hyperlink{Compression_8cpp_a4a0eddbe2e6f52ce91e259fa57459fbd}{LZ4\+\_\+compress\+\_\+default}} (const char $\ast$src, char $\ast$dst, int src\+Size, int max\+Output\+Size)
\item 
static size\+\_\+t \mbox{\hyperlink{Compression_8cpp_adc972484e4b4a228506ba1a99f18661a}{LZ4\+\_\+stream\+\_\+t\+\_\+alignment}} (void)
\item 
\mbox{\hyperlink{Compression_8h_a4fb9ac4ce6d5e25edc9188f9d6633498}{LZ4\+\_\+stream\+\_\+t}} $\ast$ \mbox{\hyperlink{Compression_8cpp_a43fc7d0a99a5a66f6056d73ce3e8aa5c}{LZ4\+\_\+init\+Stream}} (void $\ast$buffer, size\+\_\+t size)
\item 
unsigned \mbox{\hyperlink{Compression_8cpp_a5c5ad2e93f6fef517f3227f90e0791b1}{read\+\_\+variable\+\_\+length}} (const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$$\ast$ip, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$lencheck, int loop\+\_\+check, int initial\+\_\+check, \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}{variable\+\_\+length\+\_\+error}} $\ast$error)
\item 
int \mbox{\hyperlink{Compression_8cpp_a3d19938a7f5d37bf6485ef0e7cecde4c}{LZ4\+\_\+decompress\+\_\+generic}} (const char $\ast$const src, char $\ast$const dst, int src\+Size, int output\+Size, \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746}{end\+Condition\+\_\+directive}} end\+On\+Input, \mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994c}{early\+End\+\_\+directive}} partial\+Decoding, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}{dict\+\_\+directive}} dict, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$const low\+Prefix, const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$const dict\+Start, const size\+\_\+t dict\+Size)
\item 
int \mbox{\hyperlink{Compression_8cpp_a0826f3dc340fdea6dfa985f6ac26642f}{LZ4\+\_\+decompress\+\_\+safe}} (const char $\ast$source, char $\ast$dest, int compressed\+Size, int max\+Decompressed\+Size)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
static const int \mbox{\hyperlink{Compression_8cpp_a008b9fd5094e20eec7d8f504530d113c}{LZ4\+\_\+min\+Length}} = (\mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}} + 1)
\item 
static const unsigned \mbox{\hyperlink{Compression_8cpp_a451c82499501c4916ad44f7c1202f88a}{inc32table}} \mbox{[}8\mbox{]} = \{ 0, 1, 2, 1, 0, 4, 4, 4 \}
\item 
static const int \mbox{\hyperlink{Compression_8cpp_a541b3dda85be857eac8aabcf43ee83d8}{dec64table}} \mbox{[}8\mbox{]} = \{ 0, 0, 0, -\/1, -\/4, 1, 2, 3 \}
\item 
static const int \mbox{\hyperlink{Compression_8cpp_ac55e8e70f9d03d1f06d823de23222fee}{LZ4\+\_\+64\+Klimit}} = ((64 \mbox{\hyperlink{Compression_8cpp_a1841fd1a462d245d8c73dce55e2f45da}{KB}}) + (\mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}} -\/ 1))
\item 
static const \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \mbox{\hyperlink{Compression_8cpp_aa32dfc3b58308fccc1eb52d8aa2c7e3c}{LZ4\+\_\+skip\+Trigger}} = 6
\end{DoxyCompactItemize}


\doxysubsection{Macro Definition Documentation}
\mbox{\Hypertarget{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}\label{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}} 
\index{Compression.cpp@{Compression.cpp}!assert@{assert}}
\index{assert@{assert}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{assert}{assert}}
{\footnotesize\ttfamily \#define assert(\begin{DoxyParamCaption}\item[{}]{condition }\end{DoxyParamCaption})~((void)0)}



Definition at line 68 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}\label{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}} 
\index{Compression.cpp@{Compression.cpp}!DEBUGLOG@{DEBUGLOG}}
\index{DEBUGLOG@{DEBUGLOG}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{DEBUGLOG}{DEBUGLOG}}
{\footnotesize\ttfamily \#define DEBUGLOG(\begin{DoxyParamCaption}\item[{}]{l,  }\item[{}]{... }\end{DoxyParamCaption})~\{\}    /$\ast$ disabled $\ast$/}



Definition at line 73 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a7d26a1c40d6107cf2f19558492591e67}\label{Compression_8cpp_a7d26a1c40d6107cf2f19558492591e67}} 
\index{Compression.cpp@{Compression.cpp}!expect@{expect}}
\index{expect@{expect}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{expect}{expect}}
{\footnotesize\ttfamily \#define expect(\begin{DoxyParamCaption}\item[{}]{expr,  }\item[{}]{value }\end{DoxyParamCaption})~(expr)}



Definition at line 21 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_aa7091dfd46e0c63c7974aa8cecae6207}\label{Compression_8cpp_aa7091dfd46e0c63c7974aa8cecae6207}} 
\index{Compression.cpp@{Compression.cpp}!FASTLOOP\_SAFE\_DISTANCE@{FASTLOOP\_SAFE\_DISTANCE}}
\index{FASTLOOP\_SAFE\_DISTANCE@{FASTLOOP\_SAFE\_DISTANCE}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{FASTLOOP\_SAFE\_DISTANCE}{FASTLOOP\_SAFE\_DISTANCE}}
{\footnotesize\ttfamily \#define FASTLOOP\+\_\+\+SAFE\+\_\+\+DISTANCE~64}



Definition at line 43 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a44172ac633c517cb4c9e278cef36b000}\label{Compression_8cpp_a44172ac633c517cb4c9e278cef36b000}} 
\index{Compression.cpp@{Compression.cpp}!GB@{GB}}
\index{GB@{GB}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{GB}{GB}}
{\footnotesize\ttfamily \#define GB~$\ast$(1U$<$$<$30)}



Definition at line 48 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a1841fd1a462d245d8c73dce55e2f45da}\label{Compression_8cpp_a1841fd1a462d245d8c73dce55e2f45da}} 
\index{Compression.cpp@{Compression.cpp}!KB@{KB}}
\index{KB@{KB}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{KB}{KB}}
{\footnotesize\ttfamily \#define KB~$\ast$(1 $<$$<$10)}



Definition at line 46 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}\label{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}} 
\index{Compression.cpp@{Compression.cpp}!LASTLITERALS@{LASTLITERALS}}
\index{LASTLITERALS@{LASTLITERALS}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LASTLITERALS}{LASTLITERALS}}
{\footnotesize\ttfamily \#define LASTLITERALS~5   /$\ast$ see ../doc/lz4\+\_\+\+Block\+\_\+format.\+md\#parsing-\/restrictions $\ast$/}



Definition at line 40 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_aa0672ea7123854cc5f51902a06c473fb}\label{Compression_8cpp_aa0672ea7123854cc5f51902a06c473fb}} 
\index{Compression.cpp@{Compression.cpp}!likely@{likely}}
\index{likely@{likely}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{likely}{likely}}
{\footnotesize\ttfamily \#define likely(\begin{DoxyParamCaption}\item[{}]{expr }\end{DoxyParamCaption})~\mbox{\hyperlink{Compression_8cpp_a7d26a1c40d6107cf2f19558492591e67}{expect}}((expr) != 0, 1)}



Definition at line 25 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a6c439b01b6c27280593774a911bfa4ac}\label{Compression_8cpp_a6c439b01b6c27280593774a911bfa4ac}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_ALIGN\_TEST@{LZ4\_ALIGN\_TEST}}
\index{LZ4\_ALIGN\_TEST@{LZ4\_ALIGN\_TEST}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_ALIGN\_TEST}{LZ4\_ALIGN\_TEST}}
{\footnotesize\ttfamily \#define LZ4\+\_\+\+ALIGN\+\_\+\+TEST~0}



Definition at line 34 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a677dd41923a5dc079254ea9f689d78dd}\label{Compression_8cpp_a677dd41923a5dc079254ea9f689d78dd}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_DISTANCE\_ABSOLUTE\_MAX@{LZ4\_DISTANCE\_ABSOLUTE\_MAX}}
\index{LZ4\_DISTANCE\_ABSOLUTE\_MAX@{LZ4\_DISTANCE\_ABSOLUTE\_MAX}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_DISTANCE\_ABSOLUTE\_MAX}{LZ4\_DISTANCE\_ABSOLUTE\_MAX}}
{\footnotesize\ttfamily \#define LZ4\+\_\+\+DISTANCE\+\_\+\+ABSOLUTE\+\_\+\+MAX~65535}



Definition at line 50 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}\label{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_memcpy@{LZ4\_memcpy}}
\index{LZ4\_memcpy@{LZ4\_memcpy}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_memcpy}{LZ4\_memcpy}}
{\footnotesize\ttfamily \#define LZ4\+\_\+memcpy(\begin{DoxyParamCaption}\item[{}]{dst,  }\item[{}]{src,  }\item[{}]{size }\end{DoxyParamCaption})~memcpy(dst, src, size)}

LZ4 relies on memcpy with a constant size being inlined. In freestanding environments, the compiler can\textquotesingle{}t assume the implementation of memcpy() is standard compliant, so it can\textquotesingle{}t apply its specialized memcpy() inlining logic. When possible, use \+\_\+\+\_\+builtin\+\_\+memcpy() to tell the compiler to analyze memcpy() as if it were standard compliant, so it can inline it in freestanding environments. This is needed when decompressing the Linux Kernel, for example. 

Definition at line 119 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a233a86aeac0d8f5c00236b4d8d055761}\label{Compression_8cpp_a233a86aeac0d8f5c00236b4d8d055761}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_STATIC\_ASSERT@{LZ4\_STATIC\_ASSERT}}
\index{LZ4\_STATIC\_ASSERT@{LZ4\_STATIC\_ASSERT}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_STATIC\_ASSERT}{LZ4\_STATIC\_ASSERT}}
{\footnotesize\ttfamily \#define LZ4\+\_\+\+STATIC\+\_\+\+ASSERT(\begin{DoxyParamCaption}\item[{}]{c }\end{DoxyParamCaption})~\{ enum \{ LZ4\+\_\+static\+\_\+assert = 1/(int)(!!(c)) \}; \}   /$\ast$ use after variable declarations $\ast$/}



Definition at line 72 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_acd67b050f5c5a9c22357493223a620c0}\label{Compression_8cpp_acd67b050f5c5a9c22357493223a620c0}} 
\index{Compression.cpp@{Compression.cpp}!MATCH\_SAFEGUARD\_DISTANCE@{MATCH\_SAFEGUARD\_DISTANCE}}
\index{MATCH\_SAFEGUARD\_DISTANCE@{MATCH\_SAFEGUARD\_DISTANCE}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{MATCH\_SAFEGUARD\_DISTANCE}{MATCH\_SAFEGUARD\_DISTANCE}}
{\footnotesize\ttfamily \#define MATCH\+\_\+\+SAFEGUARD\+\_\+\+DISTANCE~((2$\ast$\mbox{\hyperlink{Compression_8cpp_ade83a0730ce39465e00284b8d1b29784}{WILDCOPYLENGTH}}) -\/ \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}})   /$\ast$ ensure it\textquotesingle{}s possible to write 2 x wildcopy\+Length without overflowing output buffer $\ast$/}



Definition at line 42 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_aa6b38d492364d98453284934ed7caee9}\label{Compression_8cpp_aa6b38d492364d98453284934ed7caee9}} 
\index{Compression.cpp@{Compression.cpp}!MB@{MB}}
\index{MB@{MB}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{MB}{MB}}
{\footnotesize\ttfamily \#define MB~$\ast$(1 $<$$<$20)}



Definition at line 47 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}\label{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}} 
\index{Compression.cpp@{Compression.cpp}!MFLIMIT@{MFLIMIT}}
\index{MFLIMIT@{MFLIMIT}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{MFLIMIT}{MFLIMIT}}
{\footnotesize\ttfamily \#define MFLIMIT~12   /$\ast$ see ../doc/lz4\+\_\+\+Block\+\_\+format.\+md\#parsing-\/restrictions $\ast$/}



Definition at line 41 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a3acffbd305ee72dcd4593c0d8af64a4f}\label{Compression_8cpp_a3acffbd305ee72dcd4593c0d8af64a4f}} 
\index{Compression.cpp@{Compression.cpp}!MIN@{MIN}}
\index{MIN@{MIN}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{MIN}{MIN}}
{\footnotesize\ttfamily \#define MIN(\begin{DoxyParamCaption}\item[{}]{a,  }\item[{}]{b }\end{DoxyParamCaption})~( (a) $<$ (b) ? (a) \+: (b) )}



Definition at line 993 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}\label{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}} 
\index{Compression.cpp@{Compression.cpp}!MINMATCH@{MINMATCH}}
\index{MINMATCH@{MINMATCH}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{MINMATCH}{MINMATCH}}
{\footnotesize\ttfamily \#define MINMATCH~4}



Definition at line 37 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}\label{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}} 
\index{Compression.cpp@{Compression.cpp}!ML\_BITS@{ML\_BITS}}
\index{ML\_BITS@{ML\_BITS}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{ML\_BITS}{ML\_BITS}}
{\footnotesize\ttfamily \#define ML\+\_\+\+BITS~4}



Definition at line 55 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}\label{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}} 
\index{Compression.cpp@{Compression.cpp}!ML\_MASK@{ML\_MASK}}
\index{ML\_MASK@{ML\_MASK}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{ML\_MASK}{ML\_MASK}}
{\footnotesize\ttfamily \#define ML\+\_\+\+MASK~((1U$<$$<$\mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\+\_\+\+BITS}})-\/1)}



Definition at line 56 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_ae6261d794dfe7c6816e3b342c643f56f}\label{Compression_8cpp_ae6261d794dfe7c6816e3b342c643f56f}} 
\index{Compression.cpp@{Compression.cpp}!RUN\_BITS@{RUN\_BITS}}
\index{RUN\_BITS@{RUN\_BITS}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{RUN\_BITS}{RUN\_BITS}}
{\footnotesize\ttfamily \#define RUN\+\_\+\+BITS~(8-\/\mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\+\_\+\+BITS}})}



Definition at line 57 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}\label{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}} 
\index{Compression.cpp@{Compression.cpp}!RUN\_MASK@{RUN\_MASK}}
\index{RUN\_MASK@{RUN\_MASK}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{RUN\_MASK}{RUN\_MASK}}
{\footnotesize\ttfamily \#define RUN\+\_\+\+MASK~((1U$<$$<$\mbox{\hyperlink{Compression_8cpp_ae6261d794dfe7c6816e3b342c643f56f}{RUN\+\_\+\+BITS}})-\/1)}



Definition at line 58 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}\label{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}} 
\index{Compression.cpp@{Compression.cpp}!STEPSIZE@{STEPSIZE}}
\index{STEPSIZE@{STEPSIZE}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{STEPSIZE}{STEPSIZE}}
{\footnotesize\ttfamily \#define STEPSIZE~sizeof(\mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\+\_\+t}})}



Definition at line 300 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}\label{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}} 
\index{Compression.cpp@{Compression.cpp}!unlikely@{unlikely}}
\index{unlikely@{unlikely}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{unlikely}{unlikely}}
{\footnotesize\ttfamily \#define unlikely(\begin{DoxyParamCaption}\item[{}]{expr }\end{DoxyParamCaption})~\mbox{\hyperlink{Compression_8cpp_a7d26a1c40d6107cf2f19558492591e67}{expect}}((expr) != 0, 0)}



Definition at line 28 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_ade83a0730ce39465e00284b8d1b29784}\label{Compression_8cpp_ade83a0730ce39465e00284b8d1b29784}} 
\index{Compression.cpp@{Compression.cpp}!WILDCOPYLENGTH@{WILDCOPYLENGTH}}
\index{WILDCOPYLENGTH@{WILDCOPYLENGTH}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{WILDCOPYLENGTH}{WILDCOPYLENGTH}}
{\footnotesize\ttfamily \#define WILDCOPYLENGTH~8}



Definition at line 39 of file Compression.\+cpp.



\doxysubsection{Typedef Documentation}
\mbox{\Hypertarget{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}\label{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}} 
\index{Compression.cpp@{Compression.cpp}!BYTE@{BYTE}}
\index{BYTE@{BYTE}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{BYTE}{BYTE}}
{\footnotesize\ttfamily typedef uint8\+\_\+t \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}}}



Definition at line 83 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}\label{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}} 
\index{Compression.cpp@{Compression.cpp}!reg\_t@{reg\_t}}
\index{reg\_t@{reg\_t}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{reg\_t}{reg\_t}}
{\footnotesize\ttfamily typedef size\+\_\+t \mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\+\_\+t}}}



Definition at line 93 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a39c786017723555afb9e8b85accec0de}\label{Compression_8cpp_a39c786017723555afb9e8b85accec0de}} 
\index{Compression.cpp@{Compression.cpp}!S32@{S32}}
\index{S32@{S32}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{S32}{S32}}
{\footnotesize\ttfamily typedef int32\+\_\+t \mbox{\hyperlink{Compression_8cpp_a39c786017723555afb9e8b85accec0de}{S32}}}



Definition at line 86 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}\label{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}} 
\index{Compression.cpp@{Compression.cpp}!U16@{U16}}
\index{U16@{U16}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{U16}{U16}}
{\footnotesize\ttfamily typedef uint16\+\_\+t \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}}}



Definition at line 84 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}\label{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}} 
\index{Compression.cpp@{Compression.cpp}!U32@{U32}}
\index{U32@{U32}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{U32}{U32}}
{\footnotesize\ttfamily typedef uint32\+\_\+t \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}}



Definition at line 85 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}\label{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}} 
\index{Compression.cpp@{Compression.cpp}!U64@{U64}}
\index{U64@{U64}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{U64}{U64}}
{\footnotesize\ttfamily typedef uint64\+\_\+t \mbox{\hyperlink{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}{U64}}}



Definition at line 87 of file Compression.\+cpp.

\mbox{\Hypertarget{Compression_8cpp_ae36a6736ee678cada514feec5060088a}\label{Compression_8cpp_ae36a6736ee678cada514feec5060088a}} 
\index{Compression.cpp@{Compression.cpp}!uptrval@{uptrval}}
\index{uptrval@{uptrval}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{uptrval}{uptrval}}
{\footnotesize\ttfamily typedef uintptr\+\_\+t \mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}}}



Definition at line 88 of file Compression.\+cpp.



\doxysubsection{Enumeration Type Documentation}
\mbox{\Hypertarget{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}\label{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}} 
\index{Compression.cpp@{Compression.cpp}!dict\_directive@{dict\_directive}}
\index{dict\_directive@{dict\_directive}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{dict\_directive}{dict\_directive}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}{dict\+\_\+directive}}}

This enum distinguishes several different modes of accessing previous content in the stream.


\begin{DoxyItemize}
\item no\+Dict \+: There is no preceding content.
\item with\+Prefix64k \+: Table entries up to ctx-\/$>$dict\+Size before the current blob blob being compressed are valid and refer to the preceding content (of length ctx-\/$>$dict\+Size), which is available contiguously preceding in memory the content currently being compressed.
\item using\+Ext\+Dict \+: Like with\+Prefix64k, but the preceding content is somewhere else in memory, starting at ctx-\/$>$dictionary with length ctx-\/$>$dict\+Size.
\item using\+Dict\+Ctx \+: Everything concerning the preceding content is in a separate context, pointed to by ctx-\/$>$dict\+Ctx. ctx-\/$>$dictionary, ctx-\/$>$dict\+Size, and table entries in the current context that refer to positions preceding the beginning of the current compression are ignored. Instead, ctx-\/$>$dict\+Ctx-\/$>$dictionary and ctx-\/$>$dict\+Ctx -\/$>$dict\+Size describe the location and size of the preceding content, and matches are found by looking in the ctx -\/$>$dict\+Ctx-\/$>$hash\+Table. 
\end{DoxyItemize}\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{noDict@{noDict}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!noDict@{noDict}}}\mbox{\Hypertarget{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}\label{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}} 
no\+Dict&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{withPrefix64k@{withPrefix64k}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!withPrefix64k@{withPrefix64k}}}\mbox{\Hypertarget{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca34c34b9cfe0046130ff97acf6914519d}\label{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca34c34b9cfe0046130ff97acf6914519d}} 
with\+Prefix64k&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{usingExtDict@{usingExtDict}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!usingExtDict@{usingExtDict}}}\mbox{\Hypertarget{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}\label{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}} 
using\+Ext\+Dict&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{usingDictCtx@{usingDictCtx}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!usingDictCtx@{usingDictCtx}}}\mbox{\Hypertarget{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}\label{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}} 
using\+Dict\+Ctx&\\
\hline

\end{DoxyEnumFields}


Definition at line 363 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{363 \{ \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}{noDict}} = 0, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca34c34b9cfe0046130ff97acf6914519d}{withPrefix64k}}, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}{usingExtDict}}, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}} \} \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}{dict\_directive}};}

\end{DoxyCode}
\mbox{\Hypertarget{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351}\label{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351}} 
\index{Compression.cpp@{Compression.cpp}!dictIssue\_directive@{dictIssue\_directive}}
\index{dictIssue\_directive@{dictIssue\_directive}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{dictIssue\_directive}{dictIssue\_directive}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351}{dict\+Issue\+\_\+directive}}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{noDictIssue@{noDictIssue}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!noDictIssue@{noDictIssue}}}\mbox{\Hypertarget{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a2a95ee19c5c0704200f9154a4abcf115}\label{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a2a95ee19c5c0704200f9154a4abcf115}} 
no\+Dict\+Issue&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{dictSmall@{dictSmall}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!dictSmall@{dictSmall}}}\mbox{\Hypertarget{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a4609b423b2c861fd5968b33837c76236}\label{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a4609b423b2c861fd5968b33837c76236}} 
dict\+Small&\\
\hline

\end{DoxyEnumFields}


Definition at line 364 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{364 \{ \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a2a95ee19c5c0704200f9154a4abcf115}{noDictIssue}} = 0, \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a4609b423b2c861fd5968b33837c76236}{dictSmall}} \} \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351}{dictIssue\_directive}};}

\end{DoxyCode}
\mbox{\Hypertarget{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994c}\label{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994c}} 
\index{Compression.cpp@{Compression.cpp}!earlyEnd\_directive@{earlyEnd\_directive}}
\index{earlyEnd\_directive@{earlyEnd\_directive}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{earlyEnd\_directive}{earlyEnd\_directive}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994c}{early\+End\+\_\+directive}}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{decode\_full\_block@{decode\_full\_block}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!decode\_full\_block@{decode\_full\_block}}}\mbox{\Hypertarget{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994ca5551916aeb552806ac850d0875151113}\label{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994ca5551916aeb552806ac850d0875151113}} 
decode\+\_\+full\+\_\+block&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{partial\_decode@{partial\_decode}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!partial\_decode@{partial\_decode}}}\mbox{\Hypertarget{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994ca032ce1b03f03cde2ed5ab8cfdf0d5e7f}\label{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994ca032ce1b03f03cde2ed5ab8cfdf0d5e7f}} 
partial\+\_\+decode&\\
\hline

\end{DoxyEnumFields}


Definition at line 990 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{990 \{ \mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994ca5551916aeb552806ac850d0875151113}{decode\_full\_block}} = 0, \mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994ca032ce1b03f03cde2ed5ab8cfdf0d5e7f}{partial\_decode}} = 1 \} \mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994c}{earlyEnd\_directive}};}

\end{DoxyCode}
\mbox{\Hypertarget{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746}\label{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746}} 
\index{Compression.cpp@{Compression.cpp}!endCondition\_directive@{endCondition\_directive}}
\index{endCondition\_directive@{endCondition\_directive}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{endCondition\_directive}{endCondition\_directive}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746}{end\+Condition\+\_\+directive}}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{endOnOutputSize@{endOnOutputSize}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!endOnOutputSize@{endOnOutputSize}}}\mbox{\Hypertarget{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a92d766b3022f9d86ccf764d716a46b2a}\label{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a92d766b3022f9d86ccf764d716a46b2a}} 
end\+On\+Output\+Size&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{endOnInputSize@{endOnInputSize}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!endOnInputSize@{endOnInputSize}}}\mbox{\Hypertarget{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a2a30c7b77002529763d202e7ac636539}\label{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a2a30c7b77002529763d202e7ac636539}} 
end\+On\+Input\+Size&\\
\hline

\end{DoxyEnumFields}


Definition at line 989 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{989 \{ \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a92d766b3022f9d86ccf764d716a46b2a}{endOnOutputSize}} = 0, \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a2a30c7b77002529763d202e7ac636539}{endOnInputSize}} = 1 \} \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746}{endCondition\_directive}};}

\end{DoxyCode}
\mbox{\Hypertarget{Compression_8cpp_ab93acf685743debab05876250a1cbe28}\label{Compression_8cpp_ab93acf685743debab05876250a1cbe28}} 
\index{Compression.cpp@{Compression.cpp}!limitedOutput\_directive@{limitedOutput\_directive}}
\index{limitedOutput\_directive@{limitedOutput\_directive}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{limitedOutput\_directive}{limitedOutput\_directive}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28}{limited\+Output\+\_\+directive}}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{notLimited@{notLimited}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!notLimited@{notLimited}}}\mbox{\Hypertarget{Compression_8cpp_ab93acf685743debab05876250a1cbe28adc568f9214a2932542608f43124efcff}\label{Compression_8cpp_ab93acf685743debab05876250a1cbe28adc568f9214a2932542608f43124efcff}} 
not\+Limited&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{limitedOutput@{limitedOutput}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!limitedOutput@{limitedOutput}}}\mbox{\Hypertarget{Compression_8cpp_ab93acf685743debab05876250a1cbe28a06ce6334cca200bdb7d30cf1422ca5aa}\label{Compression_8cpp_ab93acf685743debab05876250a1cbe28a06ce6334cca200bdb7d30cf1422ca5aa}} 
limited\+Output&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{fillOutput@{fillOutput}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!fillOutput@{fillOutput}}}\mbox{\Hypertarget{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}\label{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}} 
fill\+Output&\\
\hline

\end{DoxyEnumFields}


Definition at line 96 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{97 \{}
\DoxyCodeLine{98   \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28adc568f9214a2932542608f43124efcff}{notLimited}} = 0,}
\DoxyCodeLine{99   \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a06ce6334cca200bdb7d30cf1422ca5aa}{limitedOutput}} = 1,}
\DoxyCodeLine{100   \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fillOutput}} = 2}
\DoxyCodeLine{101 \} \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28}{limitedOutput\_directive}};}

\end{DoxyCode}
\mbox{\Hypertarget{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}\label{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}} 
\index{Compression.cpp@{Compression.cpp}!tableType\_t@{tableType\_t}}
\index{tableType\_t@{tableType\_t}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{tableType\_t}{tableType\_t}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{clearedTable@{clearedTable}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!clearedTable@{clearedTable}}}\mbox{\Hypertarget{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a160636a34765ad36416d316e62406d31}\label{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a160636a34765ad36416d316e62406d31}} 
cleared\+Table&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{byPtr@{byPtr}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!byPtr@{byPtr}}}\mbox{\Hypertarget{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}\label{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}} 
by\+Ptr&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{byU32@{byU32}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!byU32@{byU32}}}\mbox{\Hypertarget{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}\label{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}} 
by\+U32&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{byU16@{byU16}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!byU16@{byU16}}}\mbox{\Hypertarget{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}\label{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}} 
by\+U16&\\
\hline

\end{DoxyEnumFields}


Definition at line 338 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{338 \{ \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a160636a34765ad36416d316e62406d31}{clearedTable}} = 0, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}}, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}}, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}} \} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{tableType\_t}};}

\end{DoxyCode}
\mbox{\Hypertarget{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}\label{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}} 
\index{Compression.cpp@{Compression.cpp}!variable\_length\_error@{variable\_length\_error}}
\index{variable\_length\_error@{variable\_length\_error}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{variable\_length\_error}{variable\_length\_error}}
{\footnotesize\ttfamily enum \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}{variable\+\_\+length\+\_\+error}}}

\begin{DoxyEnumFields}{Enumerator}
\raisebox{\heightof{T}}[0pt][0pt]{\index{loop\_error@{loop\_error}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!loop\_error@{loop\_error}}}\mbox{\Hypertarget{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a19c5cc5c8516ea67ef3b2ec2de6fc484}\label{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a19c5cc5c8516ea67ef3b2ec2de6fc484}} 
loop\+\_\+error&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{initial\_error@{initial\_error}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!initial\_error@{initial\_error}}}\mbox{\Hypertarget{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a4dd6136f5d290f53a4ac8864c0a12f99}\label{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a4dd6136f5d290f53a4ac8864c0a12f99}} 
initial\+\_\+error&\\
\hline

\raisebox{\heightof{T}}[0pt][0pt]{\index{ok@{ok}!Compression.cpp@{Compression.cpp}}\index{Compression.cpp@{Compression.cpp}!ok@{ok}}}\mbox{\Hypertarget{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}\label{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}} 
ok&\\
\hline

\end{DoxyEnumFields}


Definition at line 1003 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{1003 \{ \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a19c5cc5c8516ea67ef3b2ec2de6fc484}{loop\_error}} = -\/2, \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a4dd6136f5d290f53a4ac8864c0a12f99}{initial\_error}} = -\/1, \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}{ok}} = 0 \} \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}{variable\_length\_error}};}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{Compression_8cpp_aa78ea8add85520d31f262506d5adb830}\label{Compression_8cpp_aa78ea8add85520d31f262506d5adb830}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_clearHash@{LZ4\_clearHash}}
\index{LZ4\_clearHash@{LZ4\_clearHash}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_clearHash()}{LZ4\_clearHash()}}
{\footnotesize\ttfamily void LZ4\+\_\+clear\+Hash (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}}]{h,  }\item[{void $\ast$}]{table\+Base,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const}]{table\+Type }\end{DoxyParamCaption})}



Definition at line 401 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{402 \{}
\DoxyCodeLine{403   \textcolor{keywordflow}{switch} (tableType) \{}
\DoxyCodeLine{404   \textcolor{keywordflow}{default}: \textcolor{comment}{/* fallthrough */}}
\DoxyCodeLine{405   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a160636a34765ad36416d316e62406d31}{clearedTable}}: \{ \textcolor{comment}{/* illegal! */} \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(0); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{406   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}}: \{ \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} **hashTable = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} **)tableBase; hashTable[h] = NULL; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{407   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}}: \{ \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *hashTable = (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *)tableBase; hashTable[h] = 0; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{408   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}: \{ \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *hashTable = (\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *)tableBase; hashTable[h] = 0; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{409   \}}
\DoxyCodeLine{410 \}}

\end{DoxyCode}


References assert, by\+Ptr, by\+U16, by\+U32, and cleared\+Table.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

\mbox{\Hypertarget{Compression_8cpp_a4a0eddbe2e6f52ce91e259fa57459fbd}\label{Compression_8cpp_a4a0eddbe2e6f52ce91e259fa57459fbd}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_compress\_default@{LZ4\_compress\_default}}
\index{LZ4\_compress\_default@{LZ4\_compress\_default}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_compress\_default()}{LZ4\_compress\_default()}}
{\footnotesize\ttfamily int LZ4\+\_\+compress\+\_\+default (\begin{DoxyParamCaption}\item[{const char $\ast$}]{src,  }\item[{char $\ast$}]{dst,  }\item[{int}]{src\+Size,  }\item[{int}]{dst\+Capacity }\end{DoxyParamCaption})}

\mbox{\hyperlink{Compression_8h_aacc5de6f21665d10fd8ec9e5ac0b9d40}{LZ4\+\_\+compress\+\_\+default()}} \+: Compresses \textquotesingle{}src\+Size\textquotesingle{} bytes from buffer \textquotesingle{}src\textquotesingle{} into already allocated \textquotesingle{}dst\textquotesingle{} buffer of size \textquotesingle{}dst\+Capacity\textquotesingle{}. Compression is guaranteed to succeed if \textquotesingle{}dst\+Capacity\textquotesingle{} $>$= LZ4\+\_\+compress\+Bound(src\+Size). It also runs faster, so it\textquotesingle{}s a recommended setting. If the function cannot compress \textquotesingle{}src\textquotesingle{} into a more limited \textquotesingle{}dst\textquotesingle{} budget, compression stops {\itshape immediately}, and the function result is zero. In which case, \textquotesingle{}dst\textquotesingle{} content is undefined (invalid). src\+Size \+: max supported value is LZ4\+\_\+\+MAX\+\_\+\+INPUT\+\_\+\+SIZE. dst\+Capacity \+: size of buffer \textquotesingle{}dst\textquotesingle{} (which must be already allocated) \begin{DoxyReturn}{Returns}
\+: the number of bytes written into buffer \textquotesingle{}dst\textquotesingle{} (necessarily $<$= dst\+Capacity) or 0 if compression fails Note \+: This function is protected against buffer overflow scenarios (never writes outside \textquotesingle{}dst\textquotesingle{} buffer, nor read outside \textquotesingle{}source\textquotesingle{} buffer). 
\end{DoxyReturn}


Definition at line 955 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{956 \{}
\DoxyCodeLine{957   \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_a7466a8eca8f7b2eeec7887c9371d21e1}{LZ4\_compress\_fast}}(src, dst, srcSize, maxOutputSize, 1);}
\DoxyCodeLine{958 \}}

\end{DoxyCode}


References LZ4\+\_\+compress\+\_\+fast().

\mbox{\Hypertarget{Compression_8cpp_a7466a8eca8f7b2eeec7887c9371d21e1}\label{Compression_8cpp_a7466a8eca8f7b2eeec7887c9371d21e1}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_compress\_fast@{LZ4\_compress\_fast}}
\index{LZ4\_compress\_fast@{LZ4\_compress\_fast}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_compress\_fast()}{LZ4\_compress\_fast()}}
{\footnotesize\ttfamily int LZ4\+\_\+compress\+\_\+fast (\begin{DoxyParamCaption}\item[{const char $\ast$}]{src,  }\item[{char $\ast$}]{dst,  }\item[{int}]{src\+Size,  }\item[{int}]{dst\+Capacity,  }\item[{int}]{acceleration }\end{DoxyParamCaption})}

\mbox{\hyperlink{Compression_8h_a1af5fb2f539203c891e9c9c5b6e598a5}{LZ4\+\_\+compress\+\_\+fast()}} \+: Same as \mbox{\hyperlink{Compression_8h_aacc5de6f21665d10fd8ec9e5ac0b9d40}{LZ4\+\_\+compress\+\_\+default()}}, but allows selection of \char`\"{}acceleration\char`\"{} factor. The larger the acceleration value, the faster the algorithm, but also the lesser the compression. It\textquotesingle{}s a trade-\/off. It can be fine tuned, with each successive value providing roughly +$\sim$3\% to speed. An acceleration value of \char`\"{}1\char`\"{} is the same as regular \mbox{\hyperlink{Compression_8h_aacc5de6f21665d10fd8ec9e5ac0b9d40}{LZ4\+\_\+compress\+\_\+default()}} Values $<$= 0 will be replaced by LZ4\+\_\+\+ACCELERATION\+\_\+\+DEFAULT (currently == 1, see lz4.\+c). Values $>$ LZ4\+\_\+\+ACCELERATION\+\_\+\+MAX will be replaced by LZ4\+\_\+\+ACCELERATION\+\_\+\+MAX (currently == 65537, see lz4.\+c). 

Definition at line 945 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{946 \{}
\DoxyCodeLine{947   \textcolor{keywordtype}{int} result;}
\DoxyCodeLine{948   \mbox{\hyperlink{unionLZ4__stream__u}{LZ4\_stream\_t}} *ctxPtr = (\mbox{\hyperlink{unionLZ4__stream__u}{LZ4\_stream\_t}} *)\mbox{\hyperlink{Memory_8h_a4f56b4291fc0ba1af3d9ebebb6f83c80}{vmalloc}}(\textcolor{keyword}{sizeof}(\mbox{\hyperlink{unionLZ4__stream__u}{LZ4\_stream\_t}}));   \textcolor{comment}{/* malloc-\/calloc always properly aligned */}}
\DoxyCodeLine{949   \textcolor{keywordflow}{if} (ctxPtr == NULL) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{950   result = \mbox{\hyperlink{Compression_8cpp_a19a6258c0092d5b3255a41d7566248d7}{LZ4\_compress\_fast\_extState}}(ctxPtr, source, dest, inputSize, maxOutputSize, acceleration);}
\DoxyCodeLine{951   \mbox{\hyperlink{Memory_8h_a126ac2e4edac2f4fb68713991db133d5}{vfree}}(ctxPtr);}
\DoxyCodeLine{952   \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{953 \}}

\end{DoxyCode}


References LZ4\+\_\+compress\+\_\+fast\+\_\+ext\+State(), vfree, and vmalloc.



Referenced by LZ4\+\_\+compress\+\_\+default().

\mbox{\Hypertarget{Compression_8cpp_a19a6258c0092d5b3255a41d7566248d7}\label{Compression_8cpp_a19a6258c0092d5b3255a41d7566248d7}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_compress\_fast\_extState@{LZ4\_compress\_fast\_extState}}
\index{LZ4\_compress\_fast\_extState@{LZ4\_compress\_fast\_extState}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_compress\_fast\_extState()}{LZ4\_compress\_fast\_extState()}}
{\footnotesize\ttfamily int LZ4\+\_\+compress\+\_\+fast\+\_\+ext\+State (\begin{DoxyParamCaption}\item[{void $\ast$}]{state,  }\item[{const char $\ast$}]{src,  }\item[{char $\ast$}]{dst,  }\item[{int}]{src\+Size,  }\item[{int}]{dst\+Capacity,  }\item[{int}]{acceleration }\end{DoxyParamCaption})}

\mbox{\hyperlink{Compression_8h_a2b241266a74fc87e1c126a17b852c934}{LZ4\+\_\+compress\+\_\+fast\+\_\+ext\+State()}} \+: Same as \mbox{\hyperlink{Compression_8h_a1af5fb2f539203c891e9c9c5b6e598a5}{LZ4\+\_\+compress\+\_\+fast()}}, using an externally allocated memory space for its state. Use LZ4\+\_\+sizeof\+State() to know how much memory must be allocated, and allocate it on 8-\/bytes boundaries (using {\ttfamily malloc()} typically). Then, provide this buffer as {\ttfamily void$\ast$ state} to compression function. 

Definition at line 922 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{923 \{}
\DoxyCodeLine{924   \mbox{\hyperlink{structLZ4__stream__t__internal}{LZ4\_stream\_t\_internal}} *\textcolor{keyword}{const} ctx = \&\mbox{\hyperlink{Compression_8cpp_a43fc7d0a99a5a66f6056d73ce3e8aa5c}{LZ4\_initStream}}(state, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{unionLZ4__stream__u}{LZ4\_stream\_t}}))-\/>\mbox{\hyperlink{unionLZ4__stream__u_a0791f2829d7100e12eb5f99094d8855e}{internal\_donotuse}};}
\DoxyCodeLine{925   \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(ctx != NULL);}
\DoxyCodeLine{926   \textcolor{keywordflow}{if} (acceleration < 1) acceleration = 1;}
\DoxyCodeLine{927   \textcolor{keywordflow}{if} (acceleration > 65537) acceleration = 65537;}
\DoxyCodeLine{928   \textcolor{keywordflow}{if} (maxOutputSize >= \mbox{\hyperlink{Compression_8cpp_a2b09f5ca41ce609bb136d3637beffe04}{LZ4\_compressBound}}(inputSize)) \{}
\DoxyCodeLine{929     \textcolor{keywordflow}{if} (inputSize < \mbox{\hyperlink{Compression_8cpp_ac55e8e70f9d03d1f06d823de23222fee}{LZ4\_64Klimit}}) \{}
\DoxyCodeLine{930       \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_a7d75fe9e5e79ce7eaecfb3e3bdc92432}{LZ4\_compress\_generic}}(ctx, source, dest, inputSize, NULL, 0, \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28adc568f9214a2932542608f43124efcff}{notLimited}}, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}{noDict}}, \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a2a95ee19c5c0704200f9154a4abcf115}{noDictIssue}}, acceleration);}
\DoxyCodeLine{931     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{932       \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{tableType\_t}} tableType = ((\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void} *) == 4) \&\& ((\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})source > \mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}})) ? \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}} : \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}};}
\DoxyCodeLine{933       \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_a7d75fe9e5e79ce7eaecfb3e3bdc92432}{LZ4\_compress\_generic}}(ctx, source, dest, inputSize, NULL, 0, \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28adc568f9214a2932542608f43124efcff}{notLimited}}, tableType, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}{noDict}}, \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a2a95ee19c5c0704200f9154a4abcf115}{noDictIssue}}, acceleration);}
\DoxyCodeLine{934     \}}
\DoxyCodeLine{935   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{936     \textcolor{keywordflow}{if} (inputSize < \mbox{\hyperlink{Compression_8cpp_ac55e8e70f9d03d1f06d823de23222fee}{LZ4\_64Klimit}}) \{}
\DoxyCodeLine{937       \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_a7d75fe9e5e79ce7eaecfb3e3bdc92432}{LZ4\_compress\_generic}}(ctx, source, dest, inputSize, NULL, maxOutputSize, \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a06ce6334cca200bdb7d30cf1422ca5aa}{limitedOutput}}, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}{noDict}}, \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a2a95ee19c5c0704200f9154a4abcf115}{noDictIssue}}, acceleration);}
\DoxyCodeLine{938     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{939       \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{tableType\_t}} tableType = ((\textcolor{keyword}{sizeof}(\textcolor{keywordtype}{void} *) == 4) \&\& ((\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})source > \mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}})) ? \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}} : \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}};}
\DoxyCodeLine{940       \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_a7d75fe9e5e79ce7eaecfb3e3bdc92432}{LZ4\_compress\_generic}}(ctx, source, dest, inputSize, NULL, maxOutputSize, \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a06ce6334cca200bdb7d30cf1422ca5aa}{limitedOutput}}, tableType, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}{noDict}}, \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a2a95ee19c5c0704200f9154a4abcf115}{noDictIssue}}, acceleration);}
\DoxyCodeLine{941     \}}
\DoxyCodeLine{942   \}}
\DoxyCodeLine{943 \}}

\end{DoxyCode}


References assert, by\+Ptr, by\+U16, by\+U32, LZ4\+\_\+stream\+\_\+u\+::internal\+\_\+donotuse, limited\+Output, LZ4\+\_\+64\+Klimit, LZ4\+\_\+compress\+\_\+generic(), LZ4\+\_\+compress\+Bound(), LZ4\+\_\+\+DISTANCE\+\_\+\+MAX, LZ4\+\_\+init\+Stream(), no\+Dict, no\+Dict\+Issue, and not\+Limited.



Referenced by LZ4\+\_\+compress\+\_\+fast().

\mbox{\Hypertarget{Compression_8cpp_a7d75fe9e5e79ce7eaecfb3e3bdc92432}\label{Compression_8cpp_a7d75fe9e5e79ce7eaecfb3e3bdc92432}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_compress\_generic@{LZ4\_compress\_generic}}
\index{LZ4\_compress\_generic@{LZ4\_compress\_generic}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_compress\_generic()}{LZ4\_compress\_generic()}}
{\footnotesize\ttfamily int LZ4\+\_\+compress\+\_\+generic (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structLZ4__stream__t__internal}{LZ4\+\_\+stream\+\_\+t\+\_\+internal}} $\ast$const}]{cctx,  }\item[{const char $\ast$const}]{src,  }\item[{char $\ast$const}]{dst,  }\item[{const int}]{src\+Size,  }\item[{int $\ast$}]{input\+Consumed,  }\item[{const int}]{dst\+Capacity,  }\item[{const \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28}{limited\+Output\+\_\+directive}}}]{output\+Directive,  }\item[{const \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}}}]{table\+Type,  }\item[{const \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}{dict\+\_\+directive}}}]{dict\+Directive,  }\item[{const \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351}{dict\+Issue\+\_\+directive}}}]{dict\+Issue,  }\item[{const int}]{acceleration }\end{DoxyParamCaption})}

\mbox{\hyperlink{Compression_8cpp_a7d75fe9e5e79ce7eaecfb3e3bdc92432}{LZ4\+\_\+compress\+\_\+generic()}} \+: inlined, to ensure branches are decided at compilation time; takes care of src == (NULL, 0) and forward the rest to LZ4\+\_\+compress\+\_\+generic\+\_\+validated 

Definition at line 885 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{897 \{}
\DoxyCodeLine{898   \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(5, \textcolor{stringliteral}{"{}LZ4\_compress\_generic: srcSize=\%i, dstCapacity=\%i"{}},}
\DoxyCodeLine{899     srcSize, dstCapacity);}
\DoxyCodeLine{900 }
\DoxyCodeLine{901   \textcolor{keywordflow}{if} ((\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})srcSize > (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})\mbox{\hyperlink{Compression_8h_a88ee51e36ca74cd0533e731c20572ea6}{LZ4\_MAX\_INPUT\_SIZE}}) \{ \textcolor{keywordflow}{return} 0; \}  \textcolor{comment}{/* Unsupported srcSize, too large (or negative) */}}
\DoxyCodeLine{902   \textcolor{keywordflow}{if} (srcSize == 0) \{   \textcolor{comment}{/* src == NULL supported if srcSize == 0 */}}
\DoxyCodeLine{903     \textcolor{keywordflow}{if} (outputDirective != \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28adc568f9214a2932542608f43124efcff}{notLimited}} \&\& dstCapacity <= 0) \textcolor{keywordflow}{return} 0;  \textcolor{comment}{/* no output, can't write anything */}}
\DoxyCodeLine{904     \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(5, \textcolor{stringliteral}{"{}Generating an empty block"{}});}
\DoxyCodeLine{905     \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28adc568f9214a2932542608f43124efcff}{notLimited}} || dstCapacity >= 1);}
\DoxyCodeLine{906     \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(dst != NULL);}
\DoxyCodeLine{907     dst[0] = 0;}
\DoxyCodeLine{908     \textcolor{keywordflow}{if} (outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fillOutput}}) \{}
\DoxyCodeLine{909       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(inputConsumed != NULL);}
\DoxyCodeLine{910       *inputConsumed = 0;}
\DoxyCodeLine{911     \}}
\DoxyCodeLine{912     \textcolor{keywordflow}{return} 1;}
\DoxyCodeLine{913   \}}
\DoxyCodeLine{914   \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(src != NULL);}
\DoxyCodeLine{915 }
\DoxyCodeLine{916   \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_a9a690f1f67712d1ace9c4442696a4b88}{LZ4\_compress\_generic\_validated}}(cctx, src, dst, srcSize,}
\DoxyCodeLine{917     inputConsumed, \textcolor{comment}{/* only written into if outputDirective == fillOutput */}}
\DoxyCodeLine{918     dstCapacity, outputDirective,}
\DoxyCodeLine{919     tableType, dictDirective, dictIssue, acceleration);}
\DoxyCodeLine{920 \}}

\end{DoxyCode}


References assert, DEBUGLOG, fill\+Output, LZ4\+\_\+compress\+\_\+generic\+\_\+validated(), LZ4\+\_\+\+MAX\+\_\+\+INPUT\+\_\+\+SIZE, and not\+Limited.



Referenced by LZ4\+\_\+compress\+\_\+fast\+\_\+ext\+State().

\mbox{\Hypertarget{Compression_8cpp_a9a690f1f67712d1ace9c4442696a4b88}\label{Compression_8cpp_a9a690f1f67712d1ace9c4442696a4b88}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_compress\_generic\_validated@{LZ4\_compress\_generic\_validated}}
\index{LZ4\_compress\_generic\_validated@{LZ4\_compress\_generic\_validated}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_compress\_generic\_validated()}{LZ4\_compress\_generic\_validated()}}
{\footnotesize\ttfamily int LZ4\+\_\+compress\+\_\+generic\+\_\+validated (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{structLZ4__stream__t__internal}{LZ4\+\_\+stream\+\_\+t\+\_\+internal}} $\ast$const}]{cctx,  }\item[{const char $\ast$const}]{source,  }\item[{char $\ast$const}]{dest,  }\item[{const int}]{input\+Size,  }\item[{int $\ast$}]{input\+Consumed,  }\item[{const int}]{max\+Output\+Size,  }\item[{const \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28}{limited\+Output\+\_\+directive}}}]{output\+Directive,  }\item[{const \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}}}]{table\+Type,  }\item[{const \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}{dict\+\_\+directive}}}]{dict\+Directive,  }\item[{const \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351}{dict\+Issue\+\_\+directive}}}]{dict\+Issue,  }\item[{const int}]{acceleration }\end{DoxyParamCaption})}

\mbox{\hyperlink{Compression_8cpp_a7d75fe9e5e79ce7eaecfb3e3bdc92432}{LZ4\+\_\+compress\+\_\+generic()}} \+: inlined, to ensure branches are decided at compilation time. Presumed already validated at this stage\+:
\begin{DoxyItemize}
\item source != NULL
\item input\+Size $>$ 0 
\end{DoxyItemize}

Definition at line 484 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{496 \{}
\DoxyCodeLine{497   \textcolor{keywordtype}{int} result;}
\DoxyCodeLine{498   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *ip = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source;}
\DoxyCodeLine{499 }
\DoxyCodeLine{500   \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} startIndex = cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ab3bd2c19764d29ca31461d6a3fc3345f}{currentOffset}};}
\DoxyCodeLine{501   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *base = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source -\/ startIndex;}
\DoxyCodeLine{502   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *lowLimit;}
\DoxyCodeLine{503 }
\DoxyCodeLine{504   \textcolor{keyword}{const} \mbox{\hyperlink{structLZ4__stream__t__internal}{LZ4\_stream\_t\_internal}} *dictCtx = (\textcolor{keyword}{const} \mbox{\hyperlink{structLZ4__stream__t__internal}{LZ4\_stream\_t\_internal}} *)cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_a149d776fc4b59881d47aa61c487138c4}{dictCtx}};}
\DoxyCodeLine{505   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} dictionary =}
\DoxyCodeLine{506     dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}} ? dictCtx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ac49d2dcc57fb65fba2534f2bb231c8b9}{dictionary}} : cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ac49d2dcc57fb65fba2534f2bb231c8b9}{dictionary}};}
\DoxyCodeLine{507   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} dictSize =}
\DoxyCodeLine{508     dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}} ? dictCtx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ae91b94da38c2a459926645c0bd28a814}{dictSize}} : cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ae91b94da38c2a459926645c0bd28a814}{dictSize}};}
\DoxyCodeLine{509   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} dictDelta = (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}}) ? startIndex -\/ dictCtx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ab3bd2c19764d29ca31461d6a3fc3345f}{currentOffset}} : 0;   \textcolor{comment}{/* make indexes in dictCtx comparable with index in current context */}}
\DoxyCodeLine{510 }
\DoxyCodeLine{511   \textcolor{keywordtype}{int} \textcolor{keyword}{const} maybe\_extMem = (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}{usingExtDict}}) || (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}});}
\DoxyCodeLine{512   \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} prefixIdxLimit = startIndex -\/ dictSize;   \textcolor{comment}{/* used when dictDirective == dictSmall */}}
\DoxyCodeLine{513   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} dictEnd = dictionary ? dictionary + dictSize : dictionary;}
\DoxyCodeLine{514   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *anchor = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source;}
\DoxyCodeLine{515   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} iend = ip + inputSize;}
\DoxyCodeLine{516   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} mflimitPlusOne = iend -\/ \mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}} + 1;}
\DoxyCodeLine{517   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} matchlimit = iend -\/ \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}};}
\DoxyCodeLine{518 }
\DoxyCodeLine{519   \textcolor{comment}{/* the dictCtx currentOffset is indexed on the start of the dictionary,}}
\DoxyCodeLine{520 \textcolor{comment}{   * while a dictionary in the current context precedes the currentOffset */}}
\DoxyCodeLine{521   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *dictBase = (dictionary == NULL) ? NULL :}
\DoxyCodeLine{522     (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}}) ?}
\DoxyCodeLine{523     dictionary + dictSize -\/ dictCtx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ab3bd2c19764d29ca31461d6a3fc3345f}{currentOffset}} :}
\DoxyCodeLine{524     dictionary + dictSize -\/ startIndex;}
\DoxyCodeLine{525 }
\DoxyCodeLine{526   \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *op = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)dest;}
\DoxyCodeLine{527   \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} olimit = op + maxOutputSize;}
\DoxyCodeLine{528 }
\DoxyCodeLine{529   \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} offset = 0;}
\DoxyCodeLine{530   \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} forwardH;}
\DoxyCodeLine{531 }
\DoxyCodeLine{532   \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(5, \textcolor{stringliteral}{"{}LZ4\_compress\_generic\_validated: srcSize=\%i, tableType=\%u"{}}, inputSize, tableType);}
\DoxyCodeLine{533   \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(ip != NULL);}
\DoxyCodeLine{534   \textcolor{comment}{/* If init conditions are not met, we don't have to mark stream}}
\DoxyCodeLine{535 \textcolor{comment}{   * as having dirty context, since no action was taken yet */}}
\DoxyCodeLine{536   \textcolor{keywordflow}{if} (outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fillOutput}} \&\& maxOutputSize < 1) \{ \textcolor{keywordflow}{return} 0; \} \textcolor{comment}{/* Impossible to store anything */}}
\DoxyCodeLine{537   \textcolor{keywordflow}{if} ((tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}) \&\& (inputSize >= \mbox{\hyperlink{Compression_8cpp_ac55e8e70f9d03d1f06d823de23222fee}{LZ4\_64Klimit}})) \{ \textcolor{keywordflow}{return} 0; \}  \textcolor{comment}{/* Size too large (not within 64K limit) */}}
\DoxyCodeLine{538   \textcolor{keywordflow}{if} (tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}}) \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}{noDict}});      \textcolor{comment}{/* only supported use case with byPtr */}}
\DoxyCodeLine{539   \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(acceleration >= 1);}
\DoxyCodeLine{540 }
\DoxyCodeLine{541   lowLimit = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source -\/ (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca34c34b9cfe0046130ff97acf6914519d}{withPrefix64k}} ? dictSize : 0);}
\DoxyCodeLine{542 }
\DoxyCodeLine{543   \textcolor{comment}{/* Update context state */}}
\DoxyCodeLine{544   \textcolor{keywordflow}{if} (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}}) \{}
\DoxyCodeLine{545     \textcolor{comment}{/* Subsequent linked blocks can't use the dictionary. */}}
\DoxyCodeLine{546     \textcolor{comment}{/* Instead, they use the block we just compressed. */}}
\DoxyCodeLine{547     cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_a149d776fc4b59881d47aa61c487138c4}{dictCtx}} = NULL;}
\DoxyCodeLine{548     cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ae91b94da38c2a459926645c0bd28a814}{dictSize}} = (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})inputSize;}
\DoxyCodeLine{549   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{550     cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ae91b94da38c2a459926645c0bd28a814}{dictSize}} += (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})inputSize;}
\DoxyCodeLine{551   \}}
\DoxyCodeLine{552   cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_ab3bd2c19764d29ca31461d6a3fc3345f}{currentOffset}} += (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})inputSize;}
\DoxyCodeLine{553   cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_a9f0c6d5c94e20c8716dbd4a07d7e1fe3}{tableType}} = (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})tableType;}
\DoxyCodeLine{554 }
\DoxyCodeLine{555   \textcolor{keywordflow}{if} (inputSize < \mbox{\hyperlink{Compression_8cpp_a008b9fd5094e20eec7d8f504530d113c}{LZ4\_minLength}}) \textcolor{keywordflow}{goto} \_last\_literals;        \textcolor{comment}{/* Input too small, no compression (all literals) */}}
\DoxyCodeLine{556 }
\DoxyCodeLine{557   \textcolor{comment}{/* First Byte */}}
\DoxyCodeLine{558   \mbox{\hyperlink{Compression_8cpp_a758ae6d5b0a32072c833b9a03be20a37}{LZ4\_putPosition}}(ip, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType, base);}
\DoxyCodeLine{559   ip++; forwardH = \mbox{\hyperlink{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}{LZ4\_hashPosition}}(ip, tableType);}
\DoxyCodeLine{560 }
\DoxyCodeLine{561   \textcolor{comment}{/* Main Loop */}}
\DoxyCodeLine{562   \textcolor{keywordflow}{for} (; ; ) \{}
\DoxyCodeLine{563     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *match;}
\DoxyCodeLine{564     \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *token;}
\DoxyCodeLine{565     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *filledIp;}
\DoxyCodeLine{566 }
\DoxyCodeLine{567     \textcolor{comment}{/* Find a match */}}
\DoxyCodeLine{568     \textcolor{keywordflow}{if} (tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}}) \{}
\DoxyCodeLine{569       \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *forwardIp = ip;}
\DoxyCodeLine{570       \textcolor{keywordtype}{int} step = 1;}
\DoxyCodeLine{571       \textcolor{keywordtype}{int} searchMatchNb = acceleration << \mbox{\hyperlink{Compression_8cpp_aa32dfc3b58308fccc1eb52d8aa2c7e3c}{LZ4\_skipTrigger}};}
\DoxyCodeLine{572       \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{573         \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} h = forwardH;}
\DoxyCodeLine{574         ip = forwardIp;}
\DoxyCodeLine{575         forwardIp += step;}
\DoxyCodeLine{576         step = (searchMatchNb++ >> \mbox{\hyperlink{Compression_8cpp_aa32dfc3b58308fccc1eb52d8aa2c7e3c}{LZ4\_skipTrigger}});}
\DoxyCodeLine{577 }
\DoxyCodeLine{578         \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(forwardIp > mflimitPlusOne)) \textcolor{keywordflow}{goto} \_last\_literals;}
\DoxyCodeLine{579         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(ip < mflimitPlusOne);}
\DoxyCodeLine{580 }
\DoxyCodeLine{581         match = \mbox{\hyperlink{Compression_8cpp_abdc1313fe20c80eb1790fdf0fbdb30a0}{LZ4\_getPositionOnHash}}(h, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType, base);}
\DoxyCodeLine{582         forwardH = \mbox{\hyperlink{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}{LZ4\_hashPosition}}(forwardIp, tableType);}
\DoxyCodeLine{583         \mbox{\hyperlink{Compression_8cpp_ac31271a152c15422122862ef508fe13a}{LZ4\_putPositionOnHash}}(ip, h, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType, base);}
\DoxyCodeLine{584 }
\DoxyCodeLine{585       \} \textcolor{keywordflow}{while} ((match + \mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}} < ip)}
\DoxyCodeLine{586         || (\mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(match) != \mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(ip)));}
\DoxyCodeLine{587 }
\DoxyCodeLine{588     \} \textcolor{keywordflow}{else} \{   \textcolor{comment}{/* byU32, byU16 */}}
\DoxyCodeLine{589 }
\DoxyCodeLine{590       \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *forwardIp = ip;}
\DoxyCodeLine{591       \textcolor{keywordtype}{int} step = 1;}
\DoxyCodeLine{592       \textcolor{keywordtype}{int} searchMatchNb = acceleration << \mbox{\hyperlink{Compression_8cpp_aa32dfc3b58308fccc1eb52d8aa2c7e3c}{LZ4\_skipTrigger}};}
\DoxyCodeLine{593       \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{594         \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} h = forwardH;}
\DoxyCodeLine{595         \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} current = (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})(forwardIp -\/ base);}
\DoxyCodeLine{596         \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} matchIndex = \mbox{\hyperlink{Compression_8cpp_a473d1db23ade92ad1be19e7720e56201}{LZ4\_getIndexOnHash}}(h, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType);}
\DoxyCodeLine{597         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(matchIndex <= current);}
\DoxyCodeLine{598         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(forwardIp -\/ base < (ptrdiff\_t)(2 \mbox{\hyperlink{Compression_8cpp_a44172ac633c517cb4c9e278cef36b000}{GB}} -\/ 1));}
\DoxyCodeLine{599         ip = forwardIp;}
\DoxyCodeLine{600         forwardIp += step;}
\DoxyCodeLine{601         step = (searchMatchNb++ >> \mbox{\hyperlink{Compression_8cpp_aa32dfc3b58308fccc1eb52d8aa2c7e3c}{LZ4\_skipTrigger}});}
\DoxyCodeLine{602 }
\DoxyCodeLine{603         \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(forwardIp > mflimitPlusOne)) \textcolor{keywordflow}{goto} \_last\_literals;}
\DoxyCodeLine{604         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(ip < mflimitPlusOne);}
\DoxyCodeLine{605 }
\DoxyCodeLine{606         \textcolor{keywordflow}{if} (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}}) \{}
\DoxyCodeLine{607           \textcolor{keywordflow}{if} (matchIndex < startIndex) \{}
\DoxyCodeLine{608             \textcolor{comment}{/* there was no match, try the dictionary */}}
\DoxyCodeLine{609             \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}});}
\DoxyCodeLine{610             matchIndex = \mbox{\hyperlink{Compression_8cpp_a473d1db23ade92ad1be19e7720e56201}{LZ4\_getIndexOnHash}}(h, dictCtx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}});}
\DoxyCodeLine{611             match = dictBase + matchIndex;}
\DoxyCodeLine{612             matchIndex += dictDelta;   \textcolor{comment}{/* make dictCtx index comparable with current context */}}
\DoxyCodeLine{613             lowLimit = dictionary;}
\DoxyCodeLine{614           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{615             match = base + matchIndex;}
\DoxyCodeLine{616             lowLimit = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source;}
\DoxyCodeLine{617           \}}
\DoxyCodeLine{618         \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}{usingExtDict}}) \{}
\DoxyCodeLine{619           \textcolor{keywordflow}{if} (matchIndex < startIndex) \{}
\DoxyCodeLine{620             \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(7, \textcolor{stringliteral}{"{}extDict candidate: matchIndex=\%5u  <  startIndex=\%5u"{}}, matchIndex, startIndex);}
\DoxyCodeLine{621             \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(startIndex -\/ matchIndex >= \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}});}
\DoxyCodeLine{622             \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(dictBase);}
\DoxyCodeLine{623             match = dictBase + matchIndex;}
\DoxyCodeLine{624             lowLimit = dictionary;}
\DoxyCodeLine{625           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{626             match = base + matchIndex;}
\DoxyCodeLine{627             lowLimit = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source;}
\DoxyCodeLine{628           \}}
\DoxyCodeLine{629         \} \textcolor{keywordflow}{else} \{   \textcolor{comment}{/* single continuous memory segment */}}
\DoxyCodeLine{630           match = base + matchIndex;}
\DoxyCodeLine{631         \}}
\DoxyCodeLine{632         forwardH = \mbox{\hyperlink{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}{LZ4\_hashPosition}}(forwardIp, tableType);}
\DoxyCodeLine{633         \mbox{\hyperlink{Compression_8cpp_afb1abdff740d4120870a053ff9afb1e5}{LZ4\_putIndexOnHash}}(current, h, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType);}
\DoxyCodeLine{634 }
\DoxyCodeLine{635         \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(7, \textcolor{stringliteral}{"{}candidate at pos=\%u  (offset=\%u \(\backslash\)n"{}}, matchIndex, current -\/ matchIndex);}
\DoxyCodeLine{636         \textcolor{keywordflow}{if} ((dictIssue == \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a4609b423b2c861fd5968b33837c76236}{dictSmall}}) \&\& (matchIndex < prefixIdxLimit)) \{ \textcolor{keywordflow}{continue}; \}    \textcolor{comment}{/* match outside of valid area */}}
\DoxyCodeLine{637         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(matchIndex < current);}
\DoxyCodeLine{638         \textcolor{keywordflow}{if} (((tableType != \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}) || (\mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}} < \mbox{\hyperlink{Compression_8cpp_a677dd41923a5dc079254ea9f689d78dd}{LZ4\_DISTANCE\_ABSOLUTE\_MAX}}))}
\DoxyCodeLine{639           \&\& (matchIndex + \mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}} < current)) \{}
\DoxyCodeLine{640           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{641         \} \textcolor{comment}{/* too far */}}
\DoxyCodeLine{642         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}((current -\/ matchIndex) <= \mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}});  \textcolor{comment}{/* match now expected within distance */}}
\DoxyCodeLine{643 }
\DoxyCodeLine{644         \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(match) == \mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(ip)) \{}
\DoxyCodeLine{645           \textcolor{keywordflow}{if} (maybe\_extMem) offset = current -\/ matchIndex;}
\DoxyCodeLine{646           \textcolor{keywordflow}{break};   \textcolor{comment}{/* match found */}}
\DoxyCodeLine{647         \}}
\DoxyCodeLine{648 }
\DoxyCodeLine{649       \} \textcolor{keywordflow}{while} (1);}
\DoxyCodeLine{650     \}}
\DoxyCodeLine{651 }
\DoxyCodeLine{652     \textcolor{comment}{/* Catch up */}}
\DoxyCodeLine{653     filledIp = ip;}
\DoxyCodeLine{654     \textcolor{keywordflow}{while} (((ip > anchor) \& (match > lowLimit)) \&\& (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(ip[-\/1] == match[-\/1]))) \{ ip-\/-\/; match-\/-\/; \}}
\DoxyCodeLine{655 }
\DoxyCodeLine{656     \textcolor{comment}{/* Encode Literals */}}
\DoxyCodeLine{657     \{}
\DoxyCodeLine{658       \textcolor{keywordtype}{unsigned} \textcolor{keyword}{const} litLength = (unsigned)(ip -\/ anchor);}
\DoxyCodeLine{659       token = op++;}
\DoxyCodeLine{660       \textcolor{keywordflow}{if} ((outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a06ce6334cca200bdb7d30cf1422ca5aa}{limitedOutput}}) \&\&  \textcolor{comment}{/* Check output buffer overflow */}}
\DoxyCodeLine{661         (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(op + litLength + (2 + 1 + \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}}) + (litLength / 255) > olimit))) \{}
\DoxyCodeLine{662         \textcolor{keywordflow}{return} 0;   \textcolor{comment}{/* cannot compress within `dst` budget. Stored indexes in hash table are nonetheless fine */}}
\DoxyCodeLine{663       \}}
\DoxyCodeLine{664       \textcolor{keywordflow}{if} ((outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fillOutput}}) \&\&}
\DoxyCodeLine{665         (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(op + (litLength + 240) / 255 \textcolor{comment}{/* litlen */} + litLength \textcolor{comment}{/* literals */} + 2 \textcolor{comment}{/* offset */} + 1 \textcolor{comment}{/* token */} + \mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}} -\/ \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}} \textcolor{comment}{/* min last literals so last match is <= end -\/ MFLIMIT */} > olimit))) \{}
\DoxyCodeLine{666         op-\/-\/;}
\DoxyCodeLine{667         \textcolor{keywordflow}{goto} \_last\_literals;}
\DoxyCodeLine{668       \}}
\DoxyCodeLine{669       \textcolor{keywordflow}{if} (litLength >= \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}}) \{}
\DoxyCodeLine{670         \textcolor{keywordtype}{int} len = (int)(litLength -\/ \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}});}
\DoxyCodeLine{671         *token = (\mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}} << \mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\_BITS}});}
\DoxyCodeLine{672         \textcolor{keywordflow}{for} (; len >= 255; len -\/= 255) *op++ = 255;}
\DoxyCodeLine{673         *op++ = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}})len;}
\DoxyCodeLine{674       \} \textcolor{keywordflow}{else} *token = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}})(litLength << \mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\_BITS}});}
\DoxyCodeLine{675 }
\DoxyCodeLine{676       \textcolor{comment}{/* Copy Literals */}}
\DoxyCodeLine{677       \mbox{\hyperlink{Compression_8cpp_a107b5345286641379a50762ff7f5e906}{LZ4\_wildCopy8}}(op, anchor, op + litLength);}
\DoxyCodeLine{678       op += litLength;}
\DoxyCodeLine{679       \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, \textcolor{stringliteral}{"{}seq.start:\%i, literals=\%u, match.start:\%i"{}},}
\DoxyCodeLine{680         (\textcolor{keywordtype}{int})(anchor -\/ (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source), litLength, (\textcolor{keywordtype}{int})(ip -\/ (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source));}
\DoxyCodeLine{681     \}}
\DoxyCodeLine{682 }
\DoxyCodeLine{683   \_next\_match:}
\DoxyCodeLine{684     \textcolor{comment}{/* at this stage, the following variables must be correctly set :}}
\DoxyCodeLine{685 \textcolor{comment}{     * -\/ ip : at start of LZ operation}}
\DoxyCodeLine{686 \textcolor{comment}{     * -\/ match : at start of previous pattern occurrence; can be within current prefix, or within extDict}}
\DoxyCodeLine{687 \textcolor{comment}{     * -\/ offset : if maybe\_ext\_memSegment==1 (constant)}}
\DoxyCodeLine{688 \textcolor{comment}{     * -\/ lowLimit : must be == dictionary to mean "{}match is within extDict"{}; must be == source otherwise}}
\DoxyCodeLine{689 \textcolor{comment}{     * -\/ token and *token : position to write 4-\/bits for match length; higher 4-\/bits for literal length supposed already written}}
\DoxyCodeLine{690 \textcolor{comment}{     */}}
\DoxyCodeLine{691 }
\DoxyCodeLine{692     \textcolor{keywordflow}{if} ((outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fillOutput}}) \&\&}
\DoxyCodeLine{693       (op + 2 \textcolor{comment}{/* offset */} + 1 \textcolor{comment}{/* token */} + \mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}} -\/ \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}} \textcolor{comment}{/* min last literals so last match is <= end -\/ MFLIMIT */} > olimit)) \{}
\DoxyCodeLine{694       \textcolor{comment}{/* the match was too close to the end, rewind and go to last literals */}}
\DoxyCodeLine{695       op = token;}
\DoxyCodeLine{696       \textcolor{keywordflow}{goto} \_last\_literals;}
\DoxyCodeLine{697     \}}
\DoxyCodeLine{698 }
\DoxyCodeLine{699     \textcolor{comment}{/* Encode Offset */}}
\DoxyCodeLine{700     \textcolor{keywordflow}{if} (maybe\_extMem) \{   \textcolor{comment}{/* static test */}}
\DoxyCodeLine{701       \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, \textcolor{stringliteral}{"{}             with offset=\%u  (ext if > \%i)"{}}, offset, (\textcolor{keywordtype}{int})(ip -\/ (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source));}
\DoxyCodeLine{702       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(offset <= LZ4\_DISTANCE\_MAX \&\& offset > 0);}
\DoxyCodeLine{703       \mbox{\hyperlink{Compression_8cpp_a3a6a0833a6f5ee0e99c80cbae73ca3a7}{LZ4\_writeLE16}}(op, (\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}})offset); op += 2;}
\DoxyCodeLine{704     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{705       \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, \textcolor{stringliteral}{"{}             with offset=\%u  (same segment)"{}}, (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})(ip -\/ match));}
\DoxyCodeLine{706       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(ip -\/ match <= \mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}});}
\DoxyCodeLine{707       \mbox{\hyperlink{Compression_8cpp_a3a6a0833a6f5ee0e99c80cbae73ca3a7}{LZ4\_writeLE16}}(op, (\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}})(ip -\/ match)); op += 2;}
\DoxyCodeLine{708     \}}
\DoxyCodeLine{709 }
\DoxyCodeLine{710     \textcolor{comment}{/* Encode MatchLength */}}
\DoxyCodeLine{711     \{}
\DoxyCodeLine{712       \textcolor{keywordtype}{unsigned} matchCode;}
\DoxyCodeLine{713 }
\DoxyCodeLine{714       \textcolor{keywordflow}{if} ((dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}{usingExtDict}} || dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}})}
\DoxyCodeLine{715         \&\& (lowLimit == dictionary) \textcolor{comment}{/* match within extDict */}) \{}
\DoxyCodeLine{716         \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *limit = ip + (dictEnd -\/ match);}
\DoxyCodeLine{717         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(dictEnd > match);}
\DoxyCodeLine{718         \textcolor{keywordflow}{if} (limit > matchlimit) limit = matchlimit;}
\DoxyCodeLine{719         matchCode = \mbox{\hyperlink{Compression_8cpp_a51be50a3bfabcb0a79edbe86e7d03d05}{LZ4\_count}}(ip + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}}, match + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}}, limit);}
\DoxyCodeLine{720         ip += (size\_t)matchCode + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}};}
\DoxyCodeLine{721         \textcolor{keywordflow}{if} (ip == limit) \{}
\DoxyCodeLine{722           \textcolor{keywordtype}{unsigned} \textcolor{keyword}{const} more = \mbox{\hyperlink{Compression_8cpp_a51be50a3bfabcb0a79edbe86e7d03d05}{LZ4\_count}}(limit, (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source, matchlimit);}
\DoxyCodeLine{723           matchCode += more;}
\DoxyCodeLine{724           ip += more;}
\DoxyCodeLine{725         \}}
\DoxyCodeLine{726         \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, \textcolor{stringliteral}{"{}             with matchLength=\%u starting in extDict"{}}, matchCode + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}});}
\DoxyCodeLine{727       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{728         matchCode = \mbox{\hyperlink{Compression_8cpp_a51be50a3bfabcb0a79edbe86e7d03d05}{LZ4\_count}}(ip + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}}, match + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}}, matchlimit);}
\DoxyCodeLine{729         ip += (size\_t)matchCode + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}};}
\DoxyCodeLine{730         \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, \textcolor{stringliteral}{"{}             with matchLength=\%u"{}}, matchCode + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}});}
\DoxyCodeLine{731       \}}
\DoxyCodeLine{732 }
\DoxyCodeLine{733       \textcolor{keywordflow}{if} ((outputDirective) \&\&    \textcolor{comment}{/* Check output buffer overflow */}}
\DoxyCodeLine{734         (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(op + (1 + \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}}) + (matchCode + 240) / 255 > olimit))) \{}
\DoxyCodeLine{735         \textcolor{keywordflow}{if} (outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fillOutput}}) \{}
\DoxyCodeLine{736           \textcolor{comment}{/* Match description too long : reduce it */}}
\DoxyCodeLine{737           \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} newMatchCode = 15 \textcolor{comment}{/* in token */} -\/ 1 \textcolor{comment}{/* to avoid needing a zero byte */} + ((\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})(olimit -\/ op) -\/ 1 -\/ \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}}) * 255;}
\DoxyCodeLine{738           ip -\/= matchCode -\/ newMatchCode;}
\DoxyCodeLine{739           \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(newMatchCode < matchCode);}
\DoxyCodeLine{740           matchCode = newMatchCode;}
\DoxyCodeLine{741           \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(ip <= filledIp)) \{}
\DoxyCodeLine{742             \textcolor{comment}{/* We have already filled up to filledIp so if ip ends up less than filledIp}}
\DoxyCodeLine{743 \textcolor{comment}{             * we have positions in the hash table beyond the current position. This is}}
\DoxyCodeLine{744 \textcolor{comment}{             * a problem if we reuse the hash table. So we have to remove these positions}}
\DoxyCodeLine{745 \textcolor{comment}{             * from the hash table.}}
\DoxyCodeLine{746 \textcolor{comment}{             */}}
\DoxyCodeLine{747             \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *ptr;}
\DoxyCodeLine{748             \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(5, \textcolor{stringliteral}{"{}Clearing \%u positions"{}}, (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})(filledIp -\/ ip));}
\DoxyCodeLine{749             \textcolor{keywordflow}{for} (ptr = ip; ptr <= filledIp; ++ptr) \{}
\DoxyCodeLine{750               \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} h = \mbox{\hyperlink{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}{LZ4\_hashPosition}}(ptr, tableType);}
\DoxyCodeLine{751               \mbox{\hyperlink{Compression_8cpp_aa78ea8add85520d31f262506d5adb830}{LZ4\_clearHash}}(h, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType);}
\DoxyCodeLine{752             \}}
\DoxyCodeLine{753           \}}
\DoxyCodeLine{754         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{755           \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a06ce6334cca200bdb7d30cf1422ca5aa}{limitedOutput}});}
\DoxyCodeLine{756           \textcolor{keywordflow}{return} 0;   \textcolor{comment}{/* cannot compress within `dst` budget. Stored indexes in hash table are nonetheless fine */}}
\DoxyCodeLine{757         \}}
\DoxyCodeLine{758       \}}
\DoxyCodeLine{759       \textcolor{keywordflow}{if} (matchCode >= \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\_MASK}}) \{}
\DoxyCodeLine{760         *token += \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\_MASK}};}
\DoxyCodeLine{761         matchCode -\/= \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\_MASK}};}
\DoxyCodeLine{762         \mbox{\hyperlink{Compression_8cpp_a2e50fa2df2ee7536797308f96806df83}{LZ4\_write32}}(op, 0xFFFFFFFF);}
\DoxyCodeLine{763         \textcolor{keywordflow}{while} (matchCode >= 4 * 255) \{}
\DoxyCodeLine{764           op += 4;}
\DoxyCodeLine{765           \mbox{\hyperlink{Compression_8cpp_a2e50fa2df2ee7536797308f96806df83}{LZ4\_write32}}(op, 0xFFFFFFFF);}
\DoxyCodeLine{766           matchCode -\/= 4 * 255;}
\DoxyCodeLine{767         \}}
\DoxyCodeLine{768         op += matchCode / 255;}
\DoxyCodeLine{769         *op++ = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}})(matchCode \% 255);}
\DoxyCodeLine{770       \} \textcolor{keywordflow}{else}}
\DoxyCodeLine{771         *token += (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}})(matchCode);}
\DoxyCodeLine{772     \}}
\DoxyCodeLine{773     \textcolor{comment}{/* Ensure we have enough space for the last literals. */}}
\DoxyCodeLine{774     \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(!(outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fillOutput}} \&\& op + 1 + \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}} > olimit));}
\DoxyCodeLine{775 }
\DoxyCodeLine{776     anchor = ip;}
\DoxyCodeLine{777 }
\DoxyCodeLine{778     \textcolor{comment}{/* Test end of chunk */}}
\DoxyCodeLine{779     \textcolor{keywordflow}{if} (ip >= mflimitPlusOne) \textcolor{keywordflow}{break};}
\DoxyCodeLine{780 }
\DoxyCodeLine{781     \textcolor{comment}{/* Fill table */}}
\DoxyCodeLine{782     \mbox{\hyperlink{Compression_8cpp_a758ae6d5b0a32072c833b9a03be20a37}{LZ4\_putPosition}}(ip -\/ 2, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType, base);}
\DoxyCodeLine{783 }
\DoxyCodeLine{784     \textcolor{comment}{/* Test next position */}}
\DoxyCodeLine{785     \textcolor{keywordflow}{if} (tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}}) \{}
\DoxyCodeLine{786 }
\DoxyCodeLine{787       match = \mbox{\hyperlink{Compression_8cpp_ad90828b9bc0e6eaa8a880300d1292d4e}{LZ4\_getPosition}}(ip, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType, base);}
\DoxyCodeLine{788       \mbox{\hyperlink{Compression_8cpp_a758ae6d5b0a32072c833b9a03be20a37}{LZ4\_putPosition}}(ip, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType, base);}
\DoxyCodeLine{789       \textcolor{keywordflow}{if} ((match + \mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}} >= ip)}
\DoxyCodeLine{790         \&\& (\mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(match) == \mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(ip))) \{}
\DoxyCodeLine{791         token = op++; *token = 0; \textcolor{keywordflow}{goto} \_next\_match;}
\DoxyCodeLine{792       \}}
\DoxyCodeLine{793 }
\DoxyCodeLine{794     \} \textcolor{keywordflow}{else} \{   \textcolor{comment}{/* byU32, byU16 */}}
\DoxyCodeLine{795 }
\DoxyCodeLine{796       \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} h = \mbox{\hyperlink{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}{LZ4\_hashPosition}}(ip, tableType);}
\DoxyCodeLine{797       \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} current = (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})(ip -\/ base);}
\DoxyCodeLine{798       \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} matchIndex = \mbox{\hyperlink{Compression_8cpp_a473d1db23ade92ad1be19e7720e56201}{LZ4\_getIndexOnHash}}(h, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType);}
\DoxyCodeLine{799       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(matchIndex < current);}
\DoxyCodeLine{800       \textcolor{keywordflow}{if} (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caf6d955259638feac01c4e4cace77c617}{usingDictCtx}}) \{}
\DoxyCodeLine{801         \textcolor{keywordflow}{if} (matchIndex < startIndex) \{}
\DoxyCodeLine{802           \textcolor{comment}{/* there was no match, try the dictionary */}}
\DoxyCodeLine{803           matchIndex = \mbox{\hyperlink{Compression_8cpp_a473d1db23ade92ad1be19e7720e56201}{LZ4\_getIndexOnHash}}(h, dictCtx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}});}
\DoxyCodeLine{804           match = dictBase + matchIndex;}
\DoxyCodeLine{805           lowLimit = dictionary;   \textcolor{comment}{/* required for match length counter */}}
\DoxyCodeLine{806           matchIndex += dictDelta;}
\DoxyCodeLine{807         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{808           match = base + matchIndex;}
\DoxyCodeLine{809           lowLimit = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source;  \textcolor{comment}{/* required for match length counter */}}
\DoxyCodeLine{810         \}}
\DoxyCodeLine{811       \} \textcolor{keywordflow}{else} \textcolor{keywordflow}{if} (dictDirective == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}{usingExtDict}}) \{}
\DoxyCodeLine{812         \textcolor{keywordflow}{if} (matchIndex < startIndex) \{}
\DoxyCodeLine{813           \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(dictBase);}
\DoxyCodeLine{814           match = dictBase + matchIndex;}
\DoxyCodeLine{815           lowLimit = dictionary;   \textcolor{comment}{/* required for match length counter */}}
\DoxyCodeLine{816         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{817           match = base + matchIndex;}
\DoxyCodeLine{818           lowLimit = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source;   \textcolor{comment}{/* required for match length counter */}}
\DoxyCodeLine{819         \}}
\DoxyCodeLine{820       \} \textcolor{keywordflow}{else} \{   \textcolor{comment}{/* single memory segment */}}
\DoxyCodeLine{821         match = base + matchIndex;}
\DoxyCodeLine{822       \}}
\DoxyCodeLine{823       \mbox{\hyperlink{Compression_8cpp_afb1abdff740d4120870a053ff9afb1e5}{LZ4\_putIndexOnHash}}(current, h, cctx-\/>\mbox{\hyperlink{structLZ4__stream__t__internal_afb3b54934c388fea25aa5bdc2afa0e32}{hashTable}}, tableType);}
\DoxyCodeLine{824       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(matchIndex < current);}
\DoxyCodeLine{825       \textcolor{keywordflow}{if} (((dictIssue == \mbox{\hyperlink{Compression_8cpp_a9f23ad1797bc66e6b6dff6cf3acfd351a4609b423b2c861fd5968b33837c76236}{dictSmall}}) ? (matchIndex >= prefixIdxLimit) : 1)}
\DoxyCodeLine{826         \&\& (((tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}) \&\& (\mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}} == \mbox{\hyperlink{Compression_8cpp_a677dd41923a5dc079254ea9f689d78dd}{LZ4\_DISTANCE\_ABSOLUTE\_MAX}})) ? 1 : (matchIndex + \mbox{\hyperlink{Compression_8h_aef230e9fd51b7bf939654ecc08a3778f}{LZ4\_DISTANCE\_MAX}} >= current))}
\DoxyCodeLine{827         \&\& (\mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(match) == \mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(ip))) \{}
\DoxyCodeLine{828         token = op++;}
\DoxyCodeLine{829         *token = 0;}
\DoxyCodeLine{830         \textcolor{keywordflow}{if} (maybe\_extMem) offset = current -\/ matchIndex;}
\DoxyCodeLine{831         \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, \textcolor{stringliteral}{"{}seq.start:\%i, literals=\%u, match.start:\%i"{}},}
\DoxyCodeLine{832           (\textcolor{keywordtype}{int})(anchor -\/ (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source), 0, (\textcolor{keywordtype}{int})(ip -\/ (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)source));}
\DoxyCodeLine{833         \textcolor{keywordflow}{goto} \_next\_match;}
\DoxyCodeLine{834       \}}
\DoxyCodeLine{835     \}}
\DoxyCodeLine{836 }
\DoxyCodeLine{837     \textcolor{comment}{/* Prepare next loop */}}
\DoxyCodeLine{838     forwardH = \mbox{\hyperlink{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}{LZ4\_hashPosition}}(++ip, tableType);}
\DoxyCodeLine{839 }
\DoxyCodeLine{840   \}}
\DoxyCodeLine{841 }
\DoxyCodeLine{842 \_last\_literals:}
\DoxyCodeLine{843   \textcolor{comment}{/* Encode Last Literals */}}
\DoxyCodeLine{844   \{}
\DoxyCodeLine{845     \textcolor{keywordtype}{size\_t} lastRun = (size\_t)(iend -\/ anchor);}
\DoxyCodeLine{846     \textcolor{keywordflow}{if} ((outputDirective) \&\&  \textcolor{comment}{/* Check output buffer overflow */}}
\DoxyCodeLine{847       (op + lastRun + 1 + ((lastRun + 255 -\/ \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}}) / 255) > olimit)) \{}
\DoxyCodeLine{848       \textcolor{keywordflow}{if} (outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fillOutput}}) \{}
\DoxyCodeLine{849         \textcolor{comment}{/* adapt lastRun to fill 'dst' */}}
\DoxyCodeLine{850         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(olimit >= op);}
\DoxyCodeLine{851         lastRun = (size\_t)(olimit -\/ op) -\/ 1\textcolor{comment}{/*token*/};}
\DoxyCodeLine{852         lastRun -\/= (lastRun + 256 -\/ \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}}) / 256;  \textcolor{comment}{/*additional length tokens*/}}
\DoxyCodeLine{853       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{854         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a06ce6334cca200bdb7d30cf1422ca5aa}{limitedOutput}});}
\DoxyCodeLine{855         \textcolor{keywordflow}{return} 0;   \textcolor{comment}{/* cannot compress within `dst` budget. Stored indexes in hash table are nonetheless fine */}}
\DoxyCodeLine{856       \}}
\DoxyCodeLine{857     \}}
\DoxyCodeLine{858     \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, \textcolor{stringliteral}{"{}Final literal run : \%i literals"{}}, (\textcolor{keywordtype}{int})lastRun);}
\DoxyCodeLine{859     \textcolor{keywordflow}{if} (lastRun >= \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}}) \{}
\DoxyCodeLine{860       \textcolor{keywordtype}{size\_t} accumulator = lastRun -\/ \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}};}
\DoxyCodeLine{861       *op++ = \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}} << \mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\_BITS}};}
\DoxyCodeLine{862       \textcolor{keywordflow}{for} (; accumulator >= 255; accumulator -\/= 255) *op++ = 255;}
\DoxyCodeLine{863       *op++ = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}})accumulator;}
\DoxyCodeLine{864     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{865       *op++ = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}})(lastRun << \mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\_BITS}});}
\DoxyCodeLine{866     \}}
\DoxyCodeLine{867     \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, anchor, lastRun);}
\DoxyCodeLine{868     ip = anchor + lastRun;}
\DoxyCodeLine{869     op += lastRun;}
\DoxyCodeLine{870   \}}
\DoxyCodeLine{871 }
\DoxyCodeLine{872   \textcolor{keywordflow}{if} (outputDirective == \mbox{\hyperlink{Compression_8cpp_ab93acf685743debab05876250a1cbe28a76ae01d59d140527a5540583923a0294}{fillOutput}}) \{}
\DoxyCodeLine{873     *inputConsumed = (int)(((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *)ip) -\/ source);}
\DoxyCodeLine{874   \}}
\DoxyCodeLine{875   result = (int)(((\textcolor{keywordtype}{char} *)op) -\/ dest);}
\DoxyCodeLine{876   \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(result > 0);}
\DoxyCodeLine{877   \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(5, \textcolor{stringliteral}{"{}LZ4\_compress\_generic: compressed \%i bytes into \%i bytes"{}}, inputSize, result);}
\DoxyCodeLine{878   \textcolor{keywordflow}{return} result;}
\DoxyCodeLine{879 \}}

\end{DoxyCode}


References assert, by\+Ptr, by\+U16, by\+U32, LZ4\+\_\+stream\+\_\+t\+\_\+internal\+::current\+Offset, DEBUGLOG, LZ4\+\_\+stream\+\_\+t\+\_\+internal\+::dict\+Ctx, LZ4\+\_\+stream\+\_\+t\+\_\+internal\+::dictionary, LZ4\+\_\+stream\+\_\+t\+\_\+internal\+::dict\+Size, dict\+Small, fill\+Output, GB, LZ4\+\_\+stream\+\_\+t\+\_\+internal\+::hash\+Table, LASTLITERALS, limited\+Output, LZ4\+\_\+64\+Klimit, LZ4\+\_\+clear\+Hash(), LZ4\+\_\+count(), LZ4\+\_\+\+DISTANCE\+\_\+\+ABSOLUTE\+\_\+\+MAX, LZ4\+\_\+\+DISTANCE\+\_\+\+MAX, LZ4\+\_\+get\+Index\+On\+Hash(), LZ4\+\_\+get\+Position(), LZ4\+\_\+get\+Position\+On\+Hash(), LZ4\+\_\+hash\+Position(), LZ4\+\_\+memcpy, LZ4\+\_\+min\+Length, LZ4\+\_\+put\+Index\+On\+Hash(), LZ4\+\_\+put\+Position(), LZ4\+\_\+put\+Position\+On\+Hash(), LZ4\+\_\+read32(), LZ4\+\_\+skip\+Trigger, LZ4\+\_\+wild\+Copy8(), LZ4\+\_\+write32(), LZ4\+\_\+write\+LE16(), MFLIMIT, MINMATCH, ML\+\_\+\+BITS, ML\+\_\+\+MASK, no\+Dict, RUN\+\_\+\+MASK, LZ4\+\_\+stream\+\_\+t\+\_\+internal\+::table\+Type, unlikely, using\+Dict\+Ctx, using\+Ext\+Dict, and with\+Prefix64k.



Referenced by LZ4\+\_\+compress\+\_\+generic().

\mbox{\Hypertarget{Compression_8cpp_a2b09f5ca41ce609bb136d3637beffe04}\label{Compression_8cpp_a2b09f5ca41ce609bb136d3637beffe04}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_compressBound@{LZ4\_compressBound}}
\index{LZ4\_compressBound@{LZ4\_compressBound}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_compressBound()}{LZ4\_compressBound()}}
{\footnotesize\ttfamily int LZ4\+\_\+compress\+Bound (\begin{DoxyParamCaption}\item[{int}]{input\+Size }\end{DoxyParamCaption})}

\mbox{\hyperlink{Compression_8h_a362093578d68480b493984b4853edc1f}{LZ4\+\_\+compress\+Bound()}} \+: Provides the maximum size that LZ4 compression may output in a \char`\"{}worst case\char`\"{} scenario (input data not compressible) This function is primarily useful for memory allocation purposes (destination buffer size). Macro \mbox{\hyperlink{Compression_8h_a2453a423fd34640a0afbbf57ed0a5399}{LZ4\+\_\+\+COMPRESSBOUND()}} is also provided for compilation-\/time evaluation (stack memory allocation for example). Note that \mbox{\hyperlink{Compression_8h_aacc5de6f21665d10fd8ec9e5ac0b9d40}{LZ4\+\_\+compress\+\_\+default()}} compresses faster when dst\+Capacity is $>$= LZ4\+\_\+compress\+Bound(src\+Size) input\+Size \+: max supported value is LZ4\+\_\+\+MAX\+\_\+\+INPUT\+\_\+\+SIZE return \+: maximum output size in a \char`\"{}worst case\char`\"{} scenario or 0, if input size is incorrect (too large or negative) 

Definition at line 370 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{370 \{ \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8h_a2453a423fd34640a0afbbf57ed0a5399}{LZ4\_COMPRESSBOUND}}(isize); \}}

\end{DoxyCode}


References LZ4\+\_\+\+COMPRESSBOUND.



Referenced by LZ4\+\_\+compress\+\_\+fast\+\_\+ext\+State().

\mbox{\Hypertarget{Compression_8cpp_a51be50a3bfabcb0a79edbe86e7d03d05}\label{Compression_8cpp_a51be50a3bfabcb0a79edbe86e7d03d05}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_count@{LZ4\_count}}
\index{LZ4\_count@{LZ4\_count}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_count()}{LZ4\_count()}}
{\footnotesize\ttfamily unsigned LZ4\+\_\+count (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{p\+In,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{p\+Match,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{p\+In\+Limit }\end{DoxyParamCaption})}



Definition at line 301 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{302 \{}
\DoxyCodeLine{303   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} pStart = pIn;}
\DoxyCodeLine{304 }
\DoxyCodeLine{305   \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_aa0672ea7123854cc5f51902a06c473fb}{likely}}(pIn < pInLimit -\/ (\mbox{\hyperlink{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}{STEPSIZE}} -\/ 1))) \{}
\DoxyCodeLine{306     \mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\_t}} \textcolor{keyword}{const} diff = \mbox{\hyperlink{Compression_8cpp_a9f1c5198d0fac6d72364edbb87a390e4}{LZ4\_read\_ARCH}}(pMatch) \string^ \mbox{\hyperlink{Compression_8cpp_a9f1c5198d0fac6d72364edbb87a390e4}{LZ4\_read\_ARCH}}(pIn);}
\DoxyCodeLine{307     \textcolor{keywordflow}{if} (!diff) \{}
\DoxyCodeLine{308       pIn += \mbox{\hyperlink{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}{STEPSIZE}}; pMatch += \mbox{\hyperlink{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}{STEPSIZE}};}
\DoxyCodeLine{309     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{310       \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_a9a5ac6aa4f9fe1d17496b0deb44babf7}{LZ4\_NbCommonBytes}}(diff);}
\DoxyCodeLine{311     \}}
\DoxyCodeLine{312   \}}
\DoxyCodeLine{313 }
\DoxyCodeLine{314   \textcolor{keywordflow}{while} (\mbox{\hyperlink{Compression_8cpp_aa0672ea7123854cc5f51902a06c473fb}{likely}}(pIn < pInLimit -\/ (\mbox{\hyperlink{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}{STEPSIZE}} -\/ 1))) \{}
\DoxyCodeLine{315     \mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\_t}} \textcolor{keyword}{const} diff = \mbox{\hyperlink{Compression_8cpp_a9f1c5198d0fac6d72364edbb87a390e4}{LZ4\_read\_ARCH}}(pMatch) \string^ \mbox{\hyperlink{Compression_8cpp_a9f1c5198d0fac6d72364edbb87a390e4}{LZ4\_read\_ARCH}}(pIn);}
\DoxyCodeLine{316     \textcolor{keywordflow}{if} (!diff) \{ pIn += \mbox{\hyperlink{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}{STEPSIZE}}; pMatch += \mbox{\hyperlink{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}{STEPSIZE}}; \textcolor{keywordflow}{continue}; \}}
\DoxyCodeLine{317     pIn += \mbox{\hyperlink{Compression_8cpp_a9a5ac6aa4f9fe1d17496b0deb44babf7}{LZ4\_NbCommonBytes}}(diff);}
\DoxyCodeLine{318     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned})(pIn -\/ pStart);}
\DoxyCodeLine{319   \}}
\DoxyCodeLine{320 }
\DoxyCodeLine{321   \textcolor{keywordflow}{if} ((\mbox{\hyperlink{Compression_8cpp_a0b31438dd90256ed47b3bea0eb62be06}{STEPSIZE}} == 8) \&\& (pIn < (pInLimit -\/ 3)) \&\& (\mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(pMatch) == \mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(pIn))) \{ pIn += 4; pMatch += 4; \}}
\DoxyCodeLine{322   \textcolor{keywordflow}{if} ((pIn < (pInLimit -\/ 1)) \&\& (\mbox{\hyperlink{Compression_8cpp_adceb4c7713e1bed1554da37458db6fb6}{LZ4\_read16}}(pMatch) == \mbox{\hyperlink{Compression_8cpp_adceb4c7713e1bed1554da37458db6fb6}{LZ4\_read16}}(pIn))) \{ pIn += 2; pMatch += 2; \}}
\DoxyCodeLine{323   \textcolor{keywordflow}{if} ((pIn < pInLimit) \&\& (*pMatch == *pIn)) pIn++;}
\DoxyCodeLine{324   \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned})(pIn -\/ pStart);}
\DoxyCodeLine{325 \}}

\end{DoxyCode}


References likely, LZ4\+\_\+\+Nb\+Common\+Bytes(), LZ4\+\_\+read16(), LZ4\+\_\+read32(), LZ4\+\_\+read\+\_\+\+ARCH(), and STEPSIZE.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

\mbox{\Hypertarget{Compression_8cpp_a3d19938a7f5d37bf6485ef0e7cecde4c}\label{Compression_8cpp_a3d19938a7f5d37bf6485ef0e7cecde4c}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_decompress\_generic@{LZ4\_decompress\_generic}}
\index{LZ4\_decompress\_generic@{LZ4\_decompress\_generic}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_decompress\_generic()}{LZ4\_decompress\_generic()}}
{\footnotesize\ttfamily int LZ4\+\_\+decompress\+\_\+generic (\begin{DoxyParamCaption}\item[{const char $\ast$const}]{src,  }\item[{char $\ast$const}]{dst,  }\item[{int}]{src\+Size,  }\item[{int}]{output\+Size,  }\item[{\mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746}{end\+Condition\+\_\+directive}}}]{end\+On\+Input,  }\item[{\mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994c}{early\+End\+\_\+directive}}}]{partial\+Decoding,  }\item[{\mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4c}{dict\+\_\+directive}}}]{dict,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$const}]{low\+Prefix,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$const}]{dict\+Start,  }\item[{const size\+\_\+t}]{dict\+Size }\end{DoxyParamCaption})}

\mbox{\hyperlink{Compression_8cpp_a3d19938a7f5d37bf6485ef0e7cecde4c}{LZ4\+\_\+decompress\+\_\+generic()}} \+: This generic decompression function covers all use cases. It shall be instantiated several times, using different sets of directives. Note that it is important for performance that this function really get inlined, in order to remove useless branches during compilation optimization. 

Definition at line 1033 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{1046 \{}
\DoxyCodeLine{1047   \textcolor{keywordflow}{if} ((src == NULL) || (outputSize < 0)) \{ \textcolor{keywordflow}{return} -\/1; \}}
\DoxyCodeLine{1048 }
\DoxyCodeLine{1049   \{}
\DoxyCodeLine{1050     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *ip = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)src;}
\DoxyCodeLine{1051     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} iend = ip + srcSize;}
\DoxyCodeLine{1052 }
\DoxyCodeLine{1053     \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *op = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)dst;}
\DoxyCodeLine{1054     \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} oend = op + outputSize;}
\DoxyCodeLine{1055     \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *cpy;}
\DoxyCodeLine{1056 }
\DoxyCodeLine{1057     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} dictEnd = (dictStart == NULL) ? NULL : dictStart + dictSize;}
\DoxyCodeLine{1058 }
\DoxyCodeLine{1059     \textcolor{keyword}{const} \textcolor{keywordtype}{int} safeDecode = (endOnInput == \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a2a30c7b77002529763d202e7ac636539}{endOnInputSize}});}
\DoxyCodeLine{1060     \textcolor{keyword}{const} \textcolor{keywordtype}{int} checkOffset = ((safeDecode) \&\& (dictSize < (\textcolor{keywordtype}{int})(64 \mbox{\hyperlink{Compression_8cpp_a1841fd1a462d245d8c73dce55e2f45da}{KB}})));}
\DoxyCodeLine{1061 }
\DoxyCodeLine{1062 }
\DoxyCodeLine{1063     \textcolor{comment}{/* Set up the "{}end"{} pointers for the shortcut. */}}
\DoxyCodeLine{1064     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} shortiend = iend -\/ (endOnInput ? 14 : 8) \textcolor{comment}{/*maxLL*/} -\/ 2 \textcolor{comment}{/*offset*/};}
\DoxyCodeLine{1065     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} shortoend = oend -\/ (endOnInput ? 14 : 8) \textcolor{comment}{/*maxLL*/} -\/ 18 \textcolor{comment}{/*maxML*/};}
\DoxyCodeLine{1066 }
\DoxyCodeLine{1067     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *match;}
\DoxyCodeLine{1068     \textcolor{keywordtype}{size\_t} offset;}
\DoxyCodeLine{1069     \textcolor{keywordtype}{unsigned} token;}
\DoxyCodeLine{1070     \textcolor{keywordtype}{size\_t} length;}
\DoxyCodeLine{1071 }
\DoxyCodeLine{1072 }
\DoxyCodeLine{1073     \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(5, \textcolor{stringliteral}{"{}LZ4\_decompress\_generic (srcSize:\%i, dstSize:\%i)"{}}, srcSize, outputSize);}
\DoxyCodeLine{1074 }
\DoxyCodeLine{1075     \textcolor{comment}{/* Special cases */}}
\DoxyCodeLine{1076     \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(lowPrefix <= op);}
\DoxyCodeLine{1077     \textcolor{keywordflow}{if} ((endOnInput) \&\& (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(outputSize == 0))) \{}
\DoxyCodeLine{1078       \textcolor{comment}{/* Empty output buffer */}}
\DoxyCodeLine{1079       \textcolor{keywordflow}{if} (partialDecoding) \textcolor{keywordflow}{return} 0;}
\DoxyCodeLine{1080       \textcolor{keywordflow}{return} ((srcSize == 1) \&\& (*ip == 0)) ? 0 : -\/1;}
\DoxyCodeLine{1081     \}}
\DoxyCodeLine{1082     \textcolor{keywordflow}{if} ((!endOnInput) \&\& (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(outputSize == 0))) \{ \textcolor{keywordflow}{return} (*ip == 0 ? 1 : -\/1); \}}
\DoxyCodeLine{1083     \textcolor{keywordflow}{if} ((endOnInput) \&\& \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(srcSize == 0)) \{ \textcolor{keywordflow}{return} -\/1; \}}
\DoxyCodeLine{1084 }
\DoxyCodeLine{1085     \textcolor{comment}{/* Currently the fast loop shows a regression on qualcomm arm chips. */}}
\DoxyCodeLine{1086     \textcolor{keywordflow}{if} ((oend -\/ op) < \mbox{\hyperlink{Compression_8cpp_aa7091dfd46e0c63c7974aa8cecae6207}{FASTLOOP\_SAFE\_DISTANCE}}) \{}
\DoxyCodeLine{1087       \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, \textcolor{stringliteral}{"{}skip fast decode loop"{}});}
\DoxyCodeLine{1088       \textcolor{keywordflow}{goto} safe\_decode;}
\DoxyCodeLine{1089     \}}
\DoxyCodeLine{1090 }
\DoxyCodeLine{1091     \textcolor{comment}{/* Fast loop : decode sequences as long as output < iend-\/FASTLOOP\_SAFE\_DISTANCE */}}
\DoxyCodeLine{1092     \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{1093       \textcolor{comment}{/* Main fastloop assertion: We can always wildcopy FASTLOOP\_SAFE\_DISTANCE */}}
\DoxyCodeLine{1094       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(oend -\/ op >= \mbox{\hyperlink{Compression_8cpp_aa7091dfd46e0c63c7974aa8cecae6207}{FASTLOOP\_SAFE\_DISTANCE}});}
\DoxyCodeLine{1095       \textcolor{keywordflow}{if} (endOnInput) \{ \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(ip < iend); \}}
\DoxyCodeLine{1096       token = *ip++;}
\DoxyCodeLine{1097       length = token >> \mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\_BITS}};  \textcolor{comment}{/* literal length */}}
\DoxyCodeLine{1098 }
\DoxyCodeLine{1099       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(!endOnInput || ip <= iend); \textcolor{comment}{/* ip < iend before the increment */}}
\DoxyCodeLine{1100 }
\DoxyCodeLine{1101       \textcolor{comment}{/* decode literal length */}}
\DoxyCodeLine{1102       \textcolor{keywordflow}{if} (length == \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}}) \{}
\DoxyCodeLine{1103         \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}{variable\_length\_error}} error = \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}{ok}};}
\DoxyCodeLine{1104         length += \mbox{\hyperlink{Compression_8cpp_a5c5ad2e93f6fef517f3227f90e0791b1}{read\_variable\_length}}(\&ip, iend -\/ \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}}, (\textcolor{keywordtype}{int})endOnInput, (\textcolor{keywordtype}{int})endOnInput, \&error);}
\DoxyCodeLine{1105         \textcolor{keywordflow}{if} (error == \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a4dd6136f5d290f53a4ac8864c0a12f99}{initial\_error}}) \{ \textcolor{keywordflow}{goto} \_output\_error; \}}
\DoxyCodeLine{1106         \textcolor{keywordflow}{if} ((safeDecode) \&\& \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}((\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(op)+length < (\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(op))) \{ \textcolor{keywordflow}{goto} \_output\_error; \} \textcolor{comment}{/* overflow detection */}}
\DoxyCodeLine{1107         \textcolor{keywordflow}{if} ((safeDecode) \&\& \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}((\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(ip)+length < (\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(ip))) \{ \textcolor{keywordflow}{goto} \_output\_error; \} \textcolor{comment}{/* overflow detection */}}
\DoxyCodeLine{1108 }
\DoxyCodeLine{1109         \textcolor{comment}{/* copy literals */}}
\DoxyCodeLine{1110         cpy = op + length;}
\DoxyCodeLine{1111         \mbox{\hyperlink{Compression_8cpp_a233a86aeac0d8f5c00236b4d8d055761}{LZ4\_STATIC\_ASSERT}}(\mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}} >= \mbox{\hyperlink{Compression_8cpp_ade83a0730ce39465e00284b8d1b29784}{WILDCOPYLENGTH}});}
\DoxyCodeLine{1112         \textcolor{keywordflow}{if} (endOnInput) \{  \textcolor{comment}{/* LZ4\_decompress\_safe() */}}
\DoxyCodeLine{1113           \textcolor{keywordflow}{if} ((cpy > oend -\/ 32) || (ip + length > iend -\/ 32)) \{ \textcolor{keywordflow}{goto} safe\_literal\_copy; \}}
\DoxyCodeLine{1114           \mbox{\hyperlink{Compression_8cpp_a5279938c8ccf6c4a556db8eecd1190a8}{LZ4\_wildCopy32}}(op, ip, cpy);}
\DoxyCodeLine{1115         \} \textcolor{keywordflow}{else} \{   \textcolor{comment}{/* LZ4\_decompress\_fast() */}}
\DoxyCodeLine{1116           \textcolor{keywordflow}{if} (cpy > oend -\/ 8) \{ \textcolor{keywordflow}{goto} safe\_literal\_copy; \}}
\DoxyCodeLine{1117           \mbox{\hyperlink{Compression_8cpp_a107b5345286641379a50762ff7f5e906}{LZ4\_wildCopy8}}(op, ip, cpy); \textcolor{comment}{/* LZ4\_decompress\_fast() cannot copy more than 8 bytes at a time :}}
\DoxyCodeLine{1118 \textcolor{comment}{                                       * it doesn't know input length, and only relies on end-\/of-\/block properties */}}
\DoxyCodeLine{1119         \}}
\DoxyCodeLine{1120         ip += length; op = cpy;}
\DoxyCodeLine{1121       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1122         cpy = op + length;}
\DoxyCodeLine{1123         \textcolor{keywordflow}{if} (endOnInput) \{  \textcolor{comment}{/* LZ4\_decompress\_safe() */}}
\DoxyCodeLine{1124           \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(7, \textcolor{stringliteral}{"{}copy \%u bytes in a 16-\/bytes stripe"{}}, (\textcolor{keywordtype}{unsigned})length);}
\DoxyCodeLine{1125           \textcolor{comment}{/* We don't need to check oend, since we check it once for each loop below */}}
\DoxyCodeLine{1126           \textcolor{keywordflow}{if} (ip > iend -\/ (16 + 1\textcolor{comment}{/*max lit + offset + nextToken*/})) \{ \textcolor{keywordflow}{goto} safe\_literal\_copy; \}}
\DoxyCodeLine{1127           \textcolor{comment}{/* Literals can only be 14, but hope compilers optimize if we copy by a register size */}}
\DoxyCodeLine{1128           \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, ip, 16);}
\DoxyCodeLine{1129         \} \textcolor{keywordflow}{else} \{  \textcolor{comment}{/* LZ4\_decompress\_fast() */}}
\DoxyCodeLine{1130             \textcolor{comment}{/* LZ4\_decompress\_fast() cannot copy more than 8 bytes at a time :}}
\DoxyCodeLine{1131 \textcolor{comment}{             * it doesn't know input length, and relies on end-\/of-\/block properties */}}
\DoxyCodeLine{1132           \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, ip, 8);}
\DoxyCodeLine{1133           \textcolor{keywordflow}{if} (length > 8) \{ \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op + 8, ip + 8, 8); \}}
\DoxyCodeLine{1134         \}}
\DoxyCodeLine{1135         ip += length; op = cpy;}
\DoxyCodeLine{1136       \}}
\DoxyCodeLine{1137 }
\DoxyCodeLine{1138       \textcolor{comment}{/* get offset */}}
\DoxyCodeLine{1139       offset = \mbox{\hyperlink{Compression_8cpp_a69a8c81f7731ff4ae0d292541bbb2d69}{LZ4\_readLE16}}(ip); ip += 2;}
\DoxyCodeLine{1140       match = op -\/ offset;}
\DoxyCodeLine{1141       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(match <= op);}
\DoxyCodeLine{1142 }
\DoxyCodeLine{1143       \textcolor{comment}{/* get matchlength */}}
\DoxyCodeLine{1144       length = token \& \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\_MASK}};}
\DoxyCodeLine{1145 }
\DoxyCodeLine{1146       \textcolor{keywordflow}{if} (length == \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\_MASK}}) \{}
\DoxyCodeLine{1147         \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}{variable\_length\_error}} error = \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}{ok}};}
\DoxyCodeLine{1148         \textcolor{keywordflow}{if} ((checkOffset) \&\& (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(match + dictSize < lowPrefix))) \{ \textcolor{keywordflow}{goto} \_output\_error; \} \textcolor{comment}{/* Error : offset outside buffers */}}
\DoxyCodeLine{1149         length += \mbox{\hyperlink{Compression_8cpp_a5c5ad2e93f6fef517f3227f90e0791b1}{read\_variable\_length}}(\&ip, iend -\/ \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}} + 1, (\textcolor{keywordtype}{int})endOnInput, 0, \&error);}
\DoxyCodeLine{1150         \textcolor{keywordflow}{if} (error != \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}{ok}}) \{ \textcolor{keywordflow}{goto} \_output\_error; \}}
\DoxyCodeLine{1151         \textcolor{keywordflow}{if} ((safeDecode) \&\& \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}((\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(op)+length < (\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})op)) \{ \textcolor{keywordflow}{goto} \_output\_error; \} \textcolor{comment}{/* overflow detection */}}
\DoxyCodeLine{1152         length += \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}};}
\DoxyCodeLine{1153         \textcolor{keywordflow}{if} (op + length >= oend -\/ \mbox{\hyperlink{Compression_8cpp_aa7091dfd46e0c63c7974aa8cecae6207}{FASTLOOP\_SAFE\_DISTANCE}}) \{}
\DoxyCodeLine{1154           \textcolor{keywordflow}{goto} safe\_match\_copy;}
\DoxyCodeLine{1155         \}}
\DoxyCodeLine{1156       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1157         length += \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}};}
\DoxyCodeLine{1158         \textcolor{keywordflow}{if} (op + length >= oend -\/ \mbox{\hyperlink{Compression_8cpp_aa7091dfd46e0c63c7974aa8cecae6207}{FASTLOOP\_SAFE\_DISTANCE}}) \{}
\DoxyCodeLine{1159           \textcolor{keywordflow}{goto} safe\_match\_copy;}
\DoxyCodeLine{1160         \}}
\DoxyCodeLine{1161 }
\DoxyCodeLine{1162         \textcolor{comment}{/* Fastpath check: Avoids a branch in LZ4\_wildCopy32 if true */}}
\DoxyCodeLine{1163         \textcolor{keywordflow}{if} ((dict == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca34c34b9cfe0046130ff97acf6914519d}{withPrefix64k}}) || (match >= lowPrefix)) \{}
\DoxyCodeLine{1164           \textcolor{keywordflow}{if} (offset >= 8) \{}
\DoxyCodeLine{1165             \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(match >= lowPrefix);}
\DoxyCodeLine{1166             \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(match <= op);}
\DoxyCodeLine{1167             \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(op + 18 <= oend);}
\DoxyCodeLine{1168 }
\DoxyCodeLine{1169             \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, match, 8);}
\DoxyCodeLine{1170             \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op + 8, match + 8, 8);}
\DoxyCodeLine{1171             \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op + 16, match + 16, 2);}
\DoxyCodeLine{1172             op += length;}
\DoxyCodeLine{1173             \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1174           \}}
\DoxyCodeLine{1175         \}}
\DoxyCodeLine{1176       \}}
\DoxyCodeLine{1177 }
\DoxyCodeLine{1178       \textcolor{keywordflow}{if} (checkOffset \&\& (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(match + dictSize < lowPrefix))) \{ \textcolor{keywordflow}{goto} \_output\_error; \} \textcolor{comment}{/* Error : offset outside buffers */}}
\DoxyCodeLine{1179       \textcolor{comment}{/* match starting within external dictionary */}}
\DoxyCodeLine{1180       \textcolor{keywordflow}{if} ((dict == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}{usingExtDict}}) \&\& (match < lowPrefix)) \{}
\DoxyCodeLine{1181         \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(op + length > oend -\/ \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}})) \{}
\DoxyCodeLine{1182           \textcolor{keywordflow}{if} (partialDecoding) \{}
\DoxyCodeLine{1183             \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(7, \textcolor{stringliteral}{"{}partialDecoding: dictionary match, close to dstEnd"{}});}
\DoxyCodeLine{1184             length = \mbox{\hyperlink{Compression_8cpp_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}}(length, (\textcolor{keywordtype}{size\_t})(oend -\/ op));}
\DoxyCodeLine{1185           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1186             \textcolor{keywordflow}{goto} \_output\_error;  \textcolor{comment}{/* end-\/of-\/block condition violated */}}
\DoxyCodeLine{1187           \}}
\DoxyCodeLine{1188         \}}
\DoxyCodeLine{1189 }
\DoxyCodeLine{1190         \textcolor{keywordflow}{if} (length <= (\textcolor{keywordtype}{size\_t})(lowPrefix -\/ match)) \{}
\DoxyCodeLine{1191           \textcolor{comment}{/* match fits entirely within external dictionary : just copy */}}
\DoxyCodeLine{1192           memmove(op, dictEnd -\/ (lowPrefix -\/ match), length);}
\DoxyCodeLine{1193           op += length;}
\DoxyCodeLine{1194         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1195           \textcolor{comment}{/* match stretches into both external dictionary and current block */}}
\DoxyCodeLine{1196           \textcolor{keywordtype}{size\_t} \textcolor{keyword}{const} copySize = (size\_t)(lowPrefix -\/ match);}
\DoxyCodeLine{1197           \textcolor{keywordtype}{size\_t} \textcolor{keyword}{const} restSize = length -\/ copySize;}
\DoxyCodeLine{1198           \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, dictEnd -\/ copySize, copySize);}
\DoxyCodeLine{1199           op += copySize;}
\DoxyCodeLine{1200           \textcolor{keywordflow}{if} (restSize > (\textcolor{keywordtype}{size\_t})(op -\/ lowPrefix)) \{  \textcolor{comment}{/* overlap copy */}}
\DoxyCodeLine{1201             \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} endOfMatch = op + restSize;}
\DoxyCodeLine{1202             \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *copyFrom = lowPrefix;}
\DoxyCodeLine{1203             \textcolor{keywordflow}{while} (op < endOfMatch) \{ *op++ = *copyFrom++; \}}
\DoxyCodeLine{1204           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1205             \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, lowPrefix, restSize);}
\DoxyCodeLine{1206             op += restSize;}
\DoxyCodeLine{1207           \}}
\DoxyCodeLine{1208         \}}
\DoxyCodeLine{1209         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1210       \}}
\DoxyCodeLine{1211 }
\DoxyCodeLine{1212       \textcolor{comment}{/* copy match within block */}}
\DoxyCodeLine{1213       cpy = op + length;}
\DoxyCodeLine{1214 }
\DoxyCodeLine{1215       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}((op <= oend) \&\& (oend -\/ op >= 32));}
\DoxyCodeLine{1216       \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(offset < 16)) \{}
\DoxyCodeLine{1217         \mbox{\hyperlink{Compression_8cpp_ac7c1a188fa7bd65cf4bf9f923040674c}{LZ4\_memcpy\_using\_offset}}(op, match, cpy, offset);}
\DoxyCodeLine{1218       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1219         \mbox{\hyperlink{Compression_8cpp_a5279938c8ccf6c4a556db8eecd1190a8}{LZ4\_wildCopy32}}(op, match, cpy);}
\DoxyCodeLine{1220       \}}
\DoxyCodeLine{1221 }
\DoxyCodeLine{1222       op = cpy;   \textcolor{comment}{/* wildcopy correction */}}
\DoxyCodeLine{1223     \}}
\DoxyCodeLine{1224   safe\_decode:}
\DoxyCodeLine{1225 }
\DoxyCodeLine{1226     \textcolor{comment}{/* Main Loop : decode remaining sequences where output < FASTLOOP\_SAFE\_DISTANCE */}}
\DoxyCodeLine{1227     \textcolor{keywordflow}{while} (1) \{}
\DoxyCodeLine{1228       token = *ip++;}
\DoxyCodeLine{1229       length = token >> \mbox{\hyperlink{Compression_8cpp_aa84b594ef328b62b23e36c78abe2aaf0}{ML\_BITS}};  \textcolor{comment}{/* literal length */}}
\DoxyCodeLine{1230 }
\DoxyCodeLine{1231       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(!endOnInput || ip <= iend); \textcolor{comment}{/* ip < iend before the increment */}}
\DoxyCodeLine{1232 }
\DoxyCodeLine{1233       \textcolor{comment}{/* A two-\/stage shortcut for the most common case:}}
\DoxyCodeLine{1234 \textcolor{comment}{       * 1) If the literal length is 0..14, and there is enough space,}}
\DoxyCodeLine{1235 \textcolor{comment}{       * enter the shortcut and copy 16 bytes on behalf of the literals}}
\DoxyCodeLine{1236 \textcolor{comment}{       * (in the fast mode, only 8 bytes can be safely copied this way).}}
\DoxyCodeLine{1237 \textcolor{comment}{       * 2) Further if the match length is 4..18, copy 18 bytes in a similar}}
\DoxyCodeLine{1238 \textcolor{comment}{       * manner; but we ensure that there's enough space in the output for}}
\DoxyCodeLine{1239 \textcolor{comment}{       * those 18 bytes earlier, upon entering the shortcut (in other words,}}
\DoxyCodeLine{1240 \textcolor{comment}{       * there is a combined check for both stages).}}
\DoxyCodeLine{1241 \textcolor{comment}{       */}}
\DoxyCodeLine{1242       \textcolor{keywordflow}{if} ((endOnInput ? length != \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}} : length <= 8)}
\DoxyCodeLine{1243         \textcolor{comment}{/* strictly "{}less than"{} on input, to re-\/enter the loop with at least one byte */}}
\DoxyCodeLine{1244         \&\& \mbox{\hyperlink{Compression_8cpp_aa0672ea7123854cc5f51902a06c473fb}{likely}}((endOnInput ? ip < shortiend : 1) \& (op <= shortoend))) \{}
\DoxyCodeLine{1245         \textcolor{comment}{/* Copy the literals */}}
\DoxyCodeLine{1246         \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, ip, endOnInput ? 16 : 8);}
\DoxyCodeLine{1247         op += length; ip += length;}
\DoxyCodeLine{1248 }
\DoxyCodeLine{1249         \textcolor{comment}{/* The second stage: prepare for match copying, decode full info.}}
\DoxyCodeLine{1250 \textcolor{comment}{         * If it doesn't work out, the info won't be wasted. */}}
\DoxyCodeLine{1251         length = token \& \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\_MASK}}; \textcolor{comment}{/* match length */}}
\DoxyCodeLine{1252         offset = \mbox{\hyperlink{Compression_8cpp_a69a8c81f7731ff4ae0d292541bbb2d69}{LZ4\_readLE16}}(ip); ip += 2;}
\DoxyCodeLine{1253         match = op -\/ offset;}
\DoxyCodeLine{1254         \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(match <= op); \textcolor{comment}{/* check overflow */}}
\DoxyCodeLine{1255 }
\DoxyCodeLine{1256         \textcolor{comment}{/* Do not deal with overlapping matches. */}}
\DoxyCodeLine{1257         \textcolor{keywordflow}{if} ((length != \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\_MASK}})}
\DoxyCodeLine{1258           \&\& (offset >= 8)}
\DoxyCodeLine{1259           \&\& (dict == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca34c34b9cfe0046130ff97acf6914519d}{withPrefix64k}} || match >= lowPrefix)) \{}
\DoxyCodeLine{1260           \textcolor{comment}{/* Copy the match. */}}
\DoxyCodeLine{1261           \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op + 0, match + 0, 8);}
\DoxyCodeLine{1262           \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op + 8, match + 8, 8);}
\DoxyCodeLine{1263           \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op + 16, match + 16, 2);}
\DoxyCodeLine{1264           op += length + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}};}
\DoxyCodeLine{1265           \textcolor{comment}{/* Both stages worked, load the next token. */}}
\DoxyCodeLine{1266           \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1267         \}}
\DoxyCodeLine{1268 }
\DoxyCodeLine{1269         \textcolor{comment}{/* The second stage didn't work out, but the info is ready.}}
\DoxyCodeLine{1270 \textcolor{comment}{         * Propel it right to the point of match copying. */}}
\DoxyCodeLine{1271         \textcolor{keywordflow}{goto} \_copy\_match;}
\DoxyCodeLine{1272       \}}
\DoxyCodeLine{1273 }
\DoxyCodeLine{1274       \textcolor{comment}{/* decode literal length */}}
\DoxyCodeLine{1275       \textcolor{keywordflow}{if} (length == \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}}) \{}
\DoxyCodeLine{1276         \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}{variable\_length\_error}} error = \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}{ok}};}
\DoxyCodeLine{1277         length += \mbox{\hyperlink{Compression_8cpp_a5c5ad2e93f6fef517f3227f90e0791b1}{read\_variable\_length}}(\&ip, iend -\/ \mbox{\hyperlink{Compression_8cpp_aec45fd08a68c07b74493e631ae52aca1}{RUN\_MASK}}, (\textcolor{keywordtype}{int})endOnInput, (\textcolor{keywordtype}{int})endOnInput, \&error);}
\DoxyCodeLine{1278         \textcolor{keywordflow}{if} (error == \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a4dd6136f5d290f53a4ac8864c0a12f99}{initial\_error}}) \{ \textcolor{keywordflow}{goto} \_output\_error; \}}
\DoxyCodeLine{1279         \textcolor{keywordflow}{if} ((safeDecode) \&\& \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}((\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(op)+length < (\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(op))) \{ \textcolor{keywordflow}{goto} \_output\_error; \} \textcolor{comment}{/* overflow detection */}}
\DoxyCodeLine{1280         \textcolor{keywordflow}{if} ((safeDecode) \&\& \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}((\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(ip)+length < (\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(ip))) \{ \textcolor{keywordflow}{goto} \_output\_error; \} \textcolor{comment}{/* overflow detection */}}
\DoxyCodeLine{1281       \}}
\DoxyCodeLine{1282 }
\DoxyCodeLine{1283       \textcolor{comment}{/* copy literals */}}
\DoxyCodeLine{1284       cpy = op + length;}
\DoxyCodeLine{1285       safe\_literal\_copy :}
\DoxyCodeLine{1286       \mbox{\hyperlink{Compression_8cpp_a233a86aeac0d8f5c00236b4d8d055761}{LZ4\_STATIC\_ASSERT}}(\mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}} >= \mbox{\hyperlink{Compression_8cpp_ade83a0730ce39465e00284b8d1b29784}{WILDCOPYLENGTH}});}
\DoxyCodeLine{1287       \textcolor{keywordflow}{if} (((endOnInput) \&\& ((cpy > oend -\/ \mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}}) || (ip + length > iend -\/ (2 + 1 + \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}}))))}
\DoxyCodeLine{1288         || ((!endOnInput) \&\& (cpy > oend -\/ \mbox{\hyperlink{Compression_8cpp_ade83a0730ce39465e00284b8d1b29784}{WILDCOPYLENGTH}}))) \{}
\DoxyCodeLine{1289         \textcolor{comment}{/* We've either hit the input parsing restriction or the output parsing restriction.}}
\DoxyCodeLine{1290 \textcolor{comment}{         * In the normal scenario, decoding a full block, it must be the last sequence,}}
\DoxyCodeLine{1291 \textcolor{comment}{         * otherwise it's an error (invalid input or dimensions).}}
\DoxyCodeLine{1292 \textcolor{comment}{         * In partialDecoding scenario, it's necessary to ensure there is no buffer overflow.}}
\DoxyCodeLine{1293 \textcolor{comment}{         */}}
\DoxyCodeLine{1294         \textcolor{keywordflow}{if} (partialDecoding) \{}
\DoxyCodeLine{1295           \textcolor{comment}{/* Since we are partial decoding we may be in this block because of the output parsing}}
\DoxyCodeLine{1296 \textcolor{comment}{           * restriction, which is not valid since the output buffer is allowed to be undersized.}}
\DoxyCodeLine{1297 \textcolor{comment}{           */}}
\DoxyCodeLine{1298           \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(endOnInput);}
\DoxyCodeLine{1299           \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(7, \textcolor{stringliteral}{"{}partialDecoding: copying literals, close to input or output end"{}})}
\DoxyCodeLine{1300             \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(7, "{}partialDecoding: literal length = \%u"{}, (\textcolor{keywordtype}{unsigned})length);}
\DoxyCodeLine{1301           \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(7, "{}partialDecoding: remaining space in dstBuffer : \%i"{}, (\textcolor{keywordtype}{int})(oend -\/ op));}
\DoxyCodeLine{1302           \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(7, "{}partialDecoding: remaining space in srcBuffer : \%i"{}, (\textcolor{keywordtype}{int})(iend -\/ ip));}
\DoxyCodeLine{1303           \textcolor{comment}{/* Finishing in the middle of a literals segment,}}
\DoxyCodeLine{1304 \textcolor{comment}{           * due to lack of input.}}
\DoxyCodeLine{1305 \textcolor{comment}{           */}}
\DoxyCodeLine{1306           if (ip + length > iend) \{}
\DoxyCodeLine{1307             length = (size\_t)(iend -\/ ip);}
\DoxyCodeLine{1308             cpy = op + length;}
\DoxyCodeLine{1309           \}}
\DoxyCodeLine{1310           \textcolor{comment}{/* Finishing in the middle of a literals segment,}}
\DoxyCodeLine{1311 \textcolor{comment}{           * due to lack of output space.}}
\DoxyCodeLine{1312 \textcolor{comment}{           */}}
\DoxyCodeLine{1313           \textcolor{keywordflow}{if} (cpy > oend) \{}
\DoxyCodeLine{1314             cpy = oend;}
\DoxyCodeLine{1315             \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(op <= oend);}
\DoxyCodeLine{1316             length = (size\_t)(oend -\/ op);}
\DoxyCodeLine{1317           \}}
\DoxyCodeLine{1318         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1319           \textcolor{comment}{/* We must be on the last sequence because of the parsing limitations so check}}
\DoxyCodeLine{1320 \textcolor{comment}{           * that we exactly regenerate the original size (must be exact when !endOnInput).}}
\DoxyCodeLine{1321 \textcolor{comment}{           */}}
\DoxyCodeLine{1322           \textcolor{keywordflow}{if} ((!endOnInput) \&\& (cpy != oend)) \{ \textcolor{keywordflow}{goto} \_output\_error; \}}
\DoxyCodeLine{1323           \textcolor{comment}{/* We must be on the last sequence (or invalid) because of the parsing limitations}}
\DoxyCodeLine{1324 \textcolor{comment}{           * so check that we exactly consume the input and don't overrun the output buffer.}}
\DoxyCodeLine{1325 \textcolor{comment}{           */}}
\DoxyCodeLine{1326           \textcolor{keywordflow}{if} ((endOnInput) \&\& ((ip + length != iend) || (cpy > oend))) \{}
\DoxyCodeLine{1327             \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, \textcolor{stringliteral}{"{}should have been last run of literals"{}})}
\DoxyCodeLine{1328               \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, "{}ip(\%p) + length(\%i) = \%p != iend (\%p)"{}, ip, (\textcolor{keywordtype}{int})length, ip + length, iend);}
\DoxyCodeLine{1329             \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(6, "{}or cpy(\%p) > oend(\%p)"{}, cpy, oend);}
\DoxyCodeLine{1330             goto \_output\_error;}
\DoxyCodeLine{1331           \}}
\DoxyCodeLine{1332         \}}
\DoxyCodeLine{1333         memmove(op, ip, length);  \textcolor{comment}{/* supports overlapping memory regions; only matters for in-\/place decompression scenarios */}}
\DoxyCodeLine{1334         ip += length;}
\DoxyCodeLine{1335         op += length;}
\DoxyCodeLine{1336         \textcolor{comment}{/* Necessarily EOF when !partialDecoding.}}
\DoxyCodeLine{1337 \textcolor{comment}{         * When partialDecoding, it is EOF if we've either}}
\DoxyCodeLine{1338 \textcolor{comment}{         * filled the output buffer or}}
\DoxyCodeLine{1339 \textcolor{comment}{         * can't proceed with reading an offset for following match.}}
\DoxyCodeLine{1340 \textcolor{comment}{         */}}
\DoxyCodeLine{1341         if (!partialDecoding || (cpy == oend) || (ip >= (iend -\/ 2))) \{}
\DoxyCodeLine{1342           \textcolor{keywordflow}{break};}
\DoxyCodeLine{1343         \}}
\DoxyCodeLine{1344       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1345         \mbox{\hyperlink{Compression_8cpp_a107b5345286641379a50762ff7f5e906}{LZ4\_wildCopy8}}(op, ip, cpy);   \textcolor{comment}{/* may overwrite up to WILDCOPYLENGTH beyond cpy */}}
\DoxyCodeLine{1346         ip += length; op = cpy;}
\DoxyCodeLine{1347       \}}
\DoxyCodeLine{1348 }
\DoxyCodeLine{1349       \textcolor{comment}{/* get offset */}}
\DoxyCodeLine{1350       offset = \mbox{\hyperlink{Compression_8cpp_a69a8c81f7731ff4ae0d292541bbb2d69}{LZ4\_readLE16}}(ip); ip += 2;}
\DoxyCodeLine{1351       match = op -\/ offset;}
\DoxyCodeLine{1352 }
\DoxyCodeLine{1353       \textcolor{comment}{/* get matchlength */}}
\DoxyCodeLine{1354       length = token \& \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\_MASK}};}
\DoxyCodeLine{1355 }
\DoxyCodeLine{1356     \_copy\_match:}
\DoxyCodeLine{1357       \textcolor{keywordflow}{if} (length == \mbox{\hyperlink{Compression_8cpp_aa939dccc909b8b36baadb3265a72b37a}{ML\_MASK}}) \{}
\DoxyCodeLine{1358         \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}{variable\_length\_error}} error = \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}{ok}};}
\DoxyCodeLine{1359         length += \mbox{\hyperlink{Compression_8cpp_a5c5ad2e93f6fef517f3227f90e0791b1}{read\_variable\_length}}(\&ip, iend -\/ \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}} + 1, (\textcolor{keywordtype}{int})endOnInput, 0, \&error);}
\DoxyCodeLine{1360         \textcolor{keywordflow}{if} (error != \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3ad8b76af209cd7ba83b4ebf33ba1637b2}{ok}}) \textcolor{keywordflow}{goto} \_output\_error;}
\DoxyCodeLine{1361         \textcolor{keywordflow}{if} ((safeDecode) \&\& \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}((\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})(op)+length < (\mbox{\hyperlink{Compression_8cpp_ae36a6736ee678cada514feec5060088a}{uptrval}})op)) \textcolor{keywordflow}{goto} \_output\_error;   \textcolor{comment}{/* overflow detection */}}
\DoxyCodeLine{1362       \}}
\DoxyCodeLine{1363       length += \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}};}
\DoxyCodeLine{1364 }
\DoxyCodeLine{1365       safe\_match\_copy :}
\DoxyCodeLine{1366       \textcolor{keywordflow}{if} ((checkOffset) \&\& (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(match + dictSize < lowPrefix))) \textcolor{keywordflow}{goto} \_output\_error;   \textcolor{comment}{/* Error : offset outside buffers */}}
\DoxyCodeLine{1367       \textcolor{comment}{/* match starting within external dictionary */}}
\DoxyCodeLine{1368       \textcolor{keywordflow}{if} ((dict == \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4caa8cc166c33fdfcd904c260136978913b}{usingExtDict}}) \&\& (match < lowPrefix)) \{}
\DoxyCodeLine{1369         \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(op + length > oend -\/ \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}})) \{}
\DoxyCodeLine{1370           \textcolor{keywordflow}{if} (partialDecoding) length = \mbox{\hyperlink{Compression_8cpp_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}}(length, (\textcolor{keywordtype}{size\_t})(oend -\/ op));}
\DoxyCodeLine{1371           \textcolor{keywordflow}{else} \textcolor{keywordflow}{goto} \_output\_error;   \textcolor{comment}{/* doesn't respect parsing restriction */}}
\DoxyCodeLine{1372         \}}
\DoxyCodeLine{1373 }
\DoxyCodeLine{1374         \textcolor{keywordflow}{if} (length <= (\textcolor{keywordtype}{size\_t})(lowPrefix -\/ match)) \{}
\DoxyCodeLine{1375           \textcolor{comment}{/* match fits entirely within external dictionary : just copy */}}
\DoxyCodeLine{1376           memmove(op, dictEnd -\/ (lowPrefix -\/ match), length);}
\DoxyCodeLine{1377           op += length;}
\DoxyCodeLine{1378         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1379           \textcolor{comment}{/* match stretches into both external dictionary and current block */}}
\DoxyCodeLine{1380           \textcolor{keywordtype}{size\_t} \textcolor{keyword}{const} copySize = (size\_t)(lowPrefix -\/ match);}
\DoxyCodeLine{1381           \textcolor{keywordtype}{size\_t} \textcolor{keyword}{const} restSize = length -\/ copySize;}
\DoxyCodeLine{1382           \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, dictEnd -\/ copySize, copySize);}
\DoxyCodeLine{1383           op += copySize;}
\DoxyCodeLine{1384           \textcolor{keywordflow}{if} (restSize > (\textcolor{keywordtype}{size\_t})(op -\/ lowPrefix)) \{  \textcolor{comment}{/* overlap copy */}}
\DoxyCodeLine{1385             \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} endOfMatch = op + restSize;}
\DoxyCodeLine{1386             \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *copyFrom = lowPrefix;}
\DoxyCodeLine{1387             \textcolor{keywordflow}{while} (op < endOfMatch) *op++ = *copyFrom++;}
\DoxyCodeLine{1388           \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1389             \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, lowPrefix, restSize);}
\DoxyCodeLine{1390             op += restSize;}
\DoxyCodeLine{1391           \}}
\DoxyCodeLine{1392         \}}
\DoxyCodeLine{1393         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1394       \}}
\DoxyCodeLine{1395       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(match >= lowPrefix);}
\DoxyCodeLine{1396 }
\DoxyCodeLine{1397       \textcolor{comment}{/* copy match within block */}}
\DoxyCodeLine{1398       cpy = op + length;}
\DoxyCodeLine{1399 }
\DoxyCodeLine{1400       \textcolor{comment}{/* partialDecoding : may end anywhere within the block */}}
\DoxyCodeLine{1401       \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(op <= oend);}
\DoxyCodeLine{1402       \textcolor{keywordflow}{if} (partialDecoding \&\& (cpy > oend -\/ \mbox{\hyperlink{Compression_8cpp_acd67b050f5c5a9c22357493223a620c0}{MATCH\_SAFEGUARD\_DISTANCE}})) \{}
\DoxyCodeLine{1403         \textcolor{keywordtype}{size\_t} \textcolor{keyword}{const} mlen = \mbox{\hyperlink{Compression_8cpp_a3acffbd305ee72dcd4593c0d8af64a4f}{MIN}}(length, (\textcolor{keywordtype}{size\_t})(oend -\/ op));}
\DoxyCodeLine{1404         \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} matchEnd = match + mlen;}
\DoxyCodeLine{1405         \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} copyEnd = op + mlen;}
\DoxyCodeLine{1406         \textcolor{keywordflow}{if} (matchEnd > op) \{   \textcolor{comment}{/* overlap copy */}}
\DoxyCodeLine{1407           \textcolor{keywordflow}{while} (op < copyEnd) \{ *op++ = *match++; \}}
\DoxyCodeLine{1408         \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1409           \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, match, mlen);}
\DoxyCodeLine{1410         \}}
\DoxyCodeLine{1411         op = copyEnd;}
\DoxyCodeLine{1412         \textcolor{keywordflow}{if} (op == oend) \{ \textcolor{keywordflow}{break}; \}}
\DoxyCodeLine{1413         \textcolor{keywordflow}{continue};}
\DoxyCodeLine{1414       \}}
\DoxyCodeLine{1415 }
\DoxyCodeLine{1416       \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(offset < 8)) \{}
\DoxyCodeLine{1417         \mbox{\hyperlink{Compression_8cpp_a2e50fa2df2ee7536797308f96806df83}{LZ4\_write32}}(op, 0);   \textcolor{comment}{/* silence msan warning when offset==0 */}}
\DoxyCodeLine{1418         op[0] = match[0];}
\DoxyCodeLine{1419         op[1] = match[1];}
\DoxyCodeLine{1420         op[2] = match[2];}
\DoxyCodeLine{1421         op[3] = match[3];}
\DoxyCodeLine{1422         match += \mbox{\hyperlink{Compression_8cpp_a451c82499501c4916ad44f7c1202f88a}{inc32table}}[offset];}
\DoxyCodeLine{1423         \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op + 4, match, 4);}
\DoxyCodeLine{1424         match -\/= \mbox{\hyperlink{Compression_8cpp_a541b3dda85be857eac8aabcf43ee83d8}{dec64table}}[offset];}
\DoxyCodeLine{1425       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1426         \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, match, 8);}
\DoxyCodeLine{1427         match += 8;}
\DoxyCodeLine{1428       \}}
\DoxyCodeLine{1429       op += 8;}
\DoxyCodeLine{1430 }
\DoxyCodeLine{1431       \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}(cpy > oend -\/ \mbox{\hyperlink{Compression_8cpp_acd67b050f5c5a9c22357493223a620c0}{MATCH\_SAFEGUARD\_DISTANCE}})) \{}
\DoxyCodeLine{1432         \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} oCopyLimit = oend -\/ (\mbox{\hyperlink{Compression_8cpp_ade83a0730ce39465e00284b8d1b29784}{WILDCOPYLENGTH}} -\/ 1);}
\DoxyCodeLine{1433         \textcolor{keywordflow}{if} (cpy > oend -\/ \mbox{\hyperlink{Compression_8cpp_a7a912d9a1f869b93be505568dce7fa8c}{LASTLITERALS}}) \{ \textcolor{keywordflow}{goto} \_output\_error; \} \textcolor{comment}{/* Error : last LASTLITERALS bytes must be literals (uncompressed) */}}
\DoxyCodeLine{1434         \textcolor{keywordflow}{if} (op < oCopyLimit) \{}
\DoxyCodeLine{1435           \mbox{\hyperlink{Compression_8cpp_a107b5345286641379a50762ff7f5e906}{LZ4\_wildCopy8}}(op, match, oCopyLimit);}
\DoxyCodeLine{1436           match += oCopyLimit -\/ op;}
\DoxyCodeLine{1437           op = oCopyLimit;}
\DoxyCodeLine{1438         \}}
\DoxyCodeLine{1439         \textcolor{keywordflow}{while} (op < cpy) \{ *op++ = *match++; \}}
\DoxyCodeLine{1440       \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1441         \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(op, match, 8);}
\DoxyCodeLine{1442         \textcolor{keywordflow}{if} (length > 16) \{ \mbox{\hyperlink{Compression_8cpp_a107b5345286641379a50762ff7f5e906}{LZ4\_wildCopy8}}(op + 8, match + 8, cpy); \}}
\DoxyCodeLine{1443       \}}
\DoxyCodeLine{1444       op = cpy;   \textcolor{comment}{/* wildcopy correction */}}
\DoxyCodeLine{1445     \}}
\DoxyCodeLine{1446 }
\DoxyCodeLine{1447     \textcolor{comment}{/* end of decoding */}}
\DoxyCodeLine{1448     \textcolor{keywordflow}{if} (endOnInput) \{}
\DoxyCodeLine{1449       \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(5, \textcolor{stringliteral}{"{}decoded \%i bytes"{}}, (\textcolor{keywordtype}{int})(((\textcolor{keywordtype}{char} *)op) -\/ dst));}
\DoxyCodeLine{1450       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})(((\textcolor{keywordtype}{char} *)op) -\/ dst);     \textcolor{comment}{/* Nb of output bytes decoded */}}
\DoxyCodeLine{1451     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{1452       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})(((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *)ip) -\/ src);   \textcolor{comment}{/* Nb of input bytes read */}}
\DoxyCodeLine{1453     \}}
\DoxyCodeLine{1454 }
\DoxyCodeLine{1455     \textcolor{comment}{/* Overflow error detected */}}
\DoxyCodeLine{1456   \_output\_error:}
\DoxyCodeLine{1457     \textcolor{keywordflow}{return} (\textcolor{keywordtype}{int})(-\/(((\textcolor{keyword}{const} \textcolor{keywordtype}{char} *)ip) -\/ src)) -\/ 1;}
\DoxyCodeLine{1458   \}}
\DoxyCodeLine{1459 \}}

\end{DoxyCode}


References assert, DEBUGLOG, dec64table, end\+On\+Input\+Size, FASTLOOP\+\_\+\+SAFE\+\_\+\+DISTANCE, inc32table, initial\+\_\+error, KB, LASTLITERALS, likely, LZ4\+\_\+memcpy, LZ4\+\_\+memcpy\+\_\+using\+\_\+offset(), LZ4\+\_\+read\+LE16(), LZ4\+\_\+\+STATIC\+\_\+\+ASSERT, LZ4\+\_\+wild\+Copy32(), LZ4\+\_\+wild\+Copy8(), LZ4\+\_\+write32(), MATCH\+\_\+\+SAFEGUARD\+\_\+\+DISTANCE, MFLIMIT, MIN, MINMATCH, ML\+\_\+\+BITS, ML\+\_\+\+MASK, ok, read\+\_\+variable\+\_\+length(), RUN\+\_\+\+MASK, unlikely, using\+Ext\+Dict, WILDCOPYLENGTH, and with\+Prefix64k.



Referenced by LZ4\+\_\+decompress\+\_\+safe().

\mbox{\Hypertarget{Compression_8cpp_a0826f3dc340fdea6dfa985f6ac26642f}\label{Compression_8cpp_a0826f3dc340fdea6dfa985f6ac26642f}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_decompress\_safe@{LZ4\_decompress\_safe}}
\index{LZ4\_decompress\_safe@{LZ4\_decompress\_safe}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_decompress\_safe()}{LZ4\_decompress\_safe()}}
{\footnotesize\ttfamily int LZ4\+\_\+decompress\+\_\+safe (\begin{DoxyParamCaption}\item[{const char $\ast$}]{src,  }\item[{char $\ast$}]{dst,  }\item[{int}]{compressed\+Size,  }\item[{int}]{dst\+Capacity }\end{DoxyParamCaption})}

\mbox{\hyperlink{Compression_8h_acd2bf35d3f502d03dc980c1f71dc16e5}{LZ4\+\_\+decompress\+\_\+safe()}} \+: compressed\+Size \+: is the exact complete size of the compressed block. dst\+Capacity \+: is the size of destination buffer (which must be already allocated), presumed an upper bound of decompressed size. \begin{DoxyReturn}{Returns}
\+: the number of bytes decompressed into destination buffer (necessarily $<$= dst\+Capacity) If destination buffer is not large enough, decoding will stop and output an error code (negative value). If the source stream is detected malformed, the function will stop decoding and return a negative result. Note 1 \+: This function is protected against malicious data packets \+: it will never writes outside \textquotesingle{}dst\textquotesingle{} buffer, nor read outside \textquotesingle{}source\textquotesingle{} buffer, even if the compressed block is maliciously modified to order the decoder to do these actions. In such case, the decoder stops immediately, and considers the compressed block malformed. Note 2 \+: compressed\+Size and dst\+Capacity must be provided to the function, the compressed block does not contain them. The implementation is free to send / store / derive this information in whichever way is most beneficial. If there is a need for a different format which bundles together both compressed data and its metadata, consider looking at lz4frame.\+h instead. 
\end{DoxyReturn}


Definition at line 1461 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{1462 \{}
\DoxyCodeLine{1463   \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_a3d19938a7f5d37bf6485ef0e7cecde4c}{LZ4\_decompress\_generic}}(source, dest, compressedSize, maxDecompressedSize,}
\DoxyCodeLine{1464     \mbox{\hyperlink{Compression_8cpp_a23fcfcea9fce4ad48b37485e3b6e8746a2a30c7b77002529763d202e7ac636539}{endOnInputSize}}, \mbox{\hyperlink{Compression_8cpp_a2719d1421671f2c7fa3c68ca7465994ca5551916aeb552806ac850d0875151113}{decode\_full\_block}}, \mbox{\hyperlink{Compression_8cpp_ab22d25a446ad3e8288401052deccda4ca0c48f9478a9b96dcb96a1a8781aba13f}{noDict}},}
\DoxyCodeLine{1465     (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)dest, NULL, 0);}
\DoxyCodeLine{1466 \}}

\end{DoxyCode}


References decode\+\_\+full\+\_\+block, end\+On\+Input\+Size, LZ4\+\_\+decompress\+\_\+generic(), and no\+Dict.

\mbox{\Hypertarget{Compression_8cpp_a473d1db23ade92ad1be19e7720e56201}\label{Compression_8cpp_a473d1db23ade92ad1be19e7720e56201}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_getIndexOnHash@{LZ4\_getIndexOnHash}}
\index{LZ4\_getIndexOnHash@{LZ4\_getIndexOnHash}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_getIndexOnHash()}{LZ4\_getIndexOnHash()}}
{\footnotesize\ttfamily \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} LZ4\+\_\+get\+Index\+On\+Hash (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}}]{h,  }\item[{const void $\ast$}]{table\+Base,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}}}]{table\+Type }\end{DoxyParamCaption})}



Definition at line 447 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{448 \{}
\DoxyCodeLine{449   \mbox{\hyperlink{Compression_8cpp_a233a86aeac0d8f5c00236b4d8d055761}{LZ4\_STATIC\_ASSERT}}(\mbox{\hyperlink{Compression_8h_a24ddbc39e7379532031a91357e66a32c}{LZ4\_MEMORY\_USAGE}} > 2);}
\DoxyCodeLine{450   \textcolor{keywordflow}{if} (tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}}) \{}
\DoxyCodeLine{451     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *\textcolor{keyword}{const} hashTable = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *)tableBase;}
\DoxyCodeLine{452     \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(h < (1U << (\mbox{\hyperlink{Compression_8h_a24ddbc39e7379532031a91357e66a32c}{LZ4\_MEMORY\_USAGE}} -\/ 2)));}
\DoxyCodeLine{453     \textcolor{keywordflow}{return} hashTable[h];}
\DoxyCodeLine{454   \}}
\DoxyCodeLine{455   \textcolor{keywordflow}{if} (tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}) \{}
\DoxyCodeLine{456     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *\textcolor{keyword}{const} hashTable = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *)tableBase;}
\DoxyCodeLine{457     \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(h < (1U << (\mbox{\hyperlink{Compression_8h_a24ddbc39e7379532031a91357e66a32c}{LZ4\_MEMORY\_USAGE}} -\/ 1)));}
\DoxyCodeLine{458     \textcolor{keywordflow}{return} hashTable[h];}
\DoxyCodeLine{459   \}}
\DoxyCodeLine{460   \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(0); \textcolor{keywordflow}{return} 0;  \textcolor{comment}{/* forbidden case */}}
\DoxyCodeLine{461 \}}

\end{DoxyCode}


References assert, by\+U16, by\+U32, LZ4\+\_\+\+MEMORY\+\_\+\+USAGE, and LZ4\+\_\+\+STATIC\+\_\+\+ASSERT.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

\mbox{\Hypertarget{Compression_8cpp_ad90828b9bc0e6eaa8a880300d1292d4e}\label{Compression_8cpp_ad90828b9bc0e6eaa8a880300d1292d4e}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_getPosition@{LZ4\_getPosition}}
\index{LZ4\_getPosition@{LZ4\_getPosition}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_getPosition()}{LZ4\_getPosition()}}
{\footnotesize\ttfamily const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}}$\ast$ LZ4\+\_\+get\+Position (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{p,  }\item[{const void $\ast$}]{table\+Base,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}}}]{table\+Type,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{src\+Base }\end{DoxyParamCaption})}



Definition at line 470 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{473 \{}
\DoxyCodeLine{474   \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} h = \mbox{\hyperlink{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}{LZ4\_hashPosition}}(p, tableType);}
\DoxyCodeLine{475   \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_abdc1313fe20c80eb1790fdf0fbdb30a0}{LZ4\_getPositionOnHash}}(h, tableBase, tableType, srcBase);}
\DoxyCodeLine{476 \}}

\end{DoxyCode}


References LZ4\+\_\+get\+Position\+On\+Hash(), and LZ4\+\_\+hash\+Position().



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

\mbox{\Hypertarget{Compression_8cpp_abdc1313fe20c80eb1790fdf0fbdb30a0}\label{Compression_8cpp_abdc1313fe20c80eb1790fdf0fbdb30a0}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_getPositionOnHash@{LZ4\_getPositionOnHash}}
\index{LZ4\_getPositionOnHash@{LZ4\_getPositionOnHash}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_getPositionOnHash()}{LZ4\_getPositionOnHash()}}
{\footnotesize\ttfamily static const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}}$\ast$ LZ4\+\_\+get\+Position\+On\+Hash (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}}]{h,  }\item[{const void $\ast$}]{table\+Base,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}}}]{table\+Type,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{src\+Base }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 463 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{464 \{}
\DoxyCodeLine{465   \textcolor{keywordflow}{if} (tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}}) \{ \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} *hashTable = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} *)tableBase; \textcolor{keywordflow}{return} hashTable[h]; \}}
\DoxyCodeLine{466   \textcolor{keywordflow}{if} (tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}}) \{ \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *\textcolor{keyword}{const} hashTable = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *)tableBase; \textcolor{keywordflow}{return} hashTable[h] + srcBase; \}}
\DoxyCodeLine{467   \{ \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *\textcolor{keyword}{const} hashTable = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *)tableBase; \textcolor{keywordflow}{return} hashTable[h] + srcBase; \}   \textcolor{comment}{/* default, to ensure a return */}}
\DoxyCodeLine{468 \}}

\end{DoxyCode}


References by\+Ptr, and by\+U32.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated(), and LZ4\+\_\+get\+Position().

\mbox{\Hypertarget{Compression_8cpp_a3aa75886f3a0aa7a1e0fb0fdfb1964b0}\label{Compression_8cpp_a3aa75886f3a0aa7a1e0fb0fdfb1964b0}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_hash4@{LZ4\_hash4}}
\index{LZ4\_hash4@{LZ4\_hash4}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_hash4()}{LZ4\_hash4()}}
{\footnotesize\ttfamily \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} LZ4\+\_\+hash4 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}}]{sequence,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const}]{table\+Type }\end{DoxyParamCaption})}



Definition at line 375 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{376 \{}
\DoxyCodeLine{377   \textcolor{keywordflow}{if} (tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}})}
\DoxyCodeLine{378     \textcolor{keywordflow}{return} ((sequence * 2654435761U) >> ((\mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}} * 8) -\/ (\mbox{\hyperlink{Compression_8h_ac7f04539d94ce57826ef8b2f3d8408af}{LZ4\_HASHLOG}} + 1)));}
\DoxyCodeLine{379   \textcolor{keywordflow}{else}}
\DoxyCodeLine{380     \textcolor{keywordflow}{return} ((sequence * 2654435761U) >> ((\mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}} * 8) -\/ \mbox{\hyperlink{Compression_8h_ac7f04539d94ce57826ef8b2f3d8408af}{LZ4\_HASHLOG}}));}
\DoxyCodeLine{381 \}}

\end{DoxyCode}


References by\+U16, LZ4\+\_\+\+HASHLOG, and MINMATCH.



Referenced by LZ4\+\_\+hash\+Position().

\mbox{\Hypertarget{Compression_8cpp_ac709e2d2a37fd4d14a5e41a3b410b8a2}\label{Compression_8cpp_ac709e2d2a37fd4d14a5e41a3b410b8a2}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_hash5@{LZ4\_hash5}}
\index{LZ4\_hash5@{LZ4\_hash5}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_hash5()}{LZ4\_hash5()}}
{\footnotesize\ttfamily \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} LZ4\+\_\+hash5 (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}{U64}}}]{sequence,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const}]{table\+Type }\end{DoxyParamCaption})}



Definition at line 383 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{384 \{}
\DoxyCodeLine{385   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} hashLog = (tableType == \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}) ? \mbox{\hyperlink{Compression_8h_ac7f04539d94ce57826ef8b2f3d8408af}{LZ4\_HASHLOG}} + 1 : \mbox{\hyperlink{Compression_8h_ac7f04539d94ce57826ef8b2f3d8408af}{LZ4\_HASHLOG}};}
\DoxyCodeLine{386   \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_aa8a9ba402bf00e8e6c21691085ae9601}{LZ4\_isLittleEndian}}()) \{}
\DoxyCodeLine{387     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}{U64}} prime5bytes = 889523592379ULL;}
\DoxyCodeLine{388     \textcolor{keywordflow}{return} (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})(((sequence << 24) * prime5bytes) >> (64 -\/ hashLog));}
\DoxyCodeLine{389   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{390     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}{U64}} prime8bytes = 11400714785074694791ULL;}
\DoxyCodeLine{391     \textcolor{keywordflow}{return} (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})(((sequence >> 24) * prime8bytes) >> (64 -\/ hashLog));}
\DoxyCodeLine{392   \}}
\DoxyCodeLine{393 \}}

\end{DoxyCode}


References by\+U16, LZ4\+\_\+\+HASHLOG, and LZ4\+\_\+is\+Little\+Endian().



Referenced by LZ4\+\_\+hash\+Position().

\mbox{\Hypertarget{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}\label{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_hashPosition@{LZ4\_hashPosition}}
\index{LZ4\_hashPosition@{LZ4\_hashPosition}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_hashPosition()}{LZ4\_hashPosition()}}
{\footnotesize\ttfamily \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} LZ4\+\_\+hash\+Position (\begin{DoxyParamCaption}\item[{const void $\ast$const}]{p,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const}]{table\+Type }\end{DoxyParamCaption})}



Definition at line 395 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{396 \{}
\DoxyCodeLine{397   \textcolor{keywordflow}{if} ((\textcolor{keyword}{sizeof}(\mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\_t}}) == 8) \&\& (tableType != \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}})) \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_ac709e2d2a37fd4d14a5e41a3b410b8a2}{LZ4\_hash5}}(\mbox{\hyperlink{Compression_8cpp_a9f1c5198d0fac6d72364edbb87a390e4}{LZ4\_read\_ARCH}}(p), tableType);}
\DoxyCodeLine{398   \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_a3aa75886f3a0aa7a1e0fb0fdfb1964b0}{LZ4\_hash4}}(\mbox{\hyperlink{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}{LZ4\_read32}}(p), tableType);}
\DoxyCodeLine{399 \}}

\end{DoxyCode}


References by\+U16, LZ4\+\_\+hash4(), LZ4\+\_\+hash5(), LZ4\+\_\+read32(), and LZ4\+\_\+read\+\_\+\+ARCH().



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated(), LZ4\+\_\+get\+Position(), and LZ4\+\_\+put\+Position().

\mbox{\Hypertarget{Compression_8cpp_a43fc7d0a99a5a66f6056d73ce3e8aa5c}\label{Compression_8cpp_a43fc7d0a99a5a66f6056d73ce3e8aa5c}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_initStream@{LZ4\_initStream}}
\index{LZ4\_initStream@{LZ4\_initStream}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_initStream()}{LZ4\_initStream()}}
{\footnotesize\ttfamily \mbox{\hyperlink{Compression_8h_a4fb9ac4ce6d5e25edc9188f9d6633498}{LZ4\+\_\+stream\+\_\+t}}$\ast$ LZ4\+\_\+init\+Stream (\begin{DoxyParamCaption}\item[{void $\ast$}]{buffer,  }\item[{size\+\_\+t}]{size }\end{DoxyParamCaption})}

\mbox{\hyperlink{Compression_8h_a43fc7d0a99a5a66f6056d73ce3e8aa5c}{LZ4\+\_\+init\+Stream()}} \+: v1.\+9.\+0+ An LZ4\+\_\+stream\+\_\+t structure must be initialized at least once. This is automatically done when invoking LZ4\+\_\+create\+Stream(), but it\textquotesingle{}s not when the structure is simply declared on stack (for example).

Use \mbox{\hyperlink{Compression_8h_a43fc7d0a99a5a66f6056d73ce3e8aa5c}{LZ4\+\_\+init\+Stream()}} to properly initialize a newly declared LZ4\+\_\+stream\+\_\+t. It can also initialize any arbitrary buffer of sufficient size, and will \begin{DoxyReturn}{Returns}
a pointer of proper type upon initialization.
\end{DoxyReturn}
Note \+: initialization fails if size and alignment conditions are not respected. In which case, the function will \begin{DoxyReturn}{Returns}
NULL. Note2\+: An LZ4\+\_\+stream\+\_\+t structure guarantees correct alignment and size. Note3\+: Before v1.\+9.\+0, use LZ4\+\_\+reset\+Stream() instead 
\end{DoxyReturn}


Definition at line 974 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{975 \{}
\DoxyCodeLine{976   \mbox{\hyperlink{Compression_8cpp_a8728fe9e99fe783be28c0f38bb0d0761}{DEBUGLOG}}(5, \textcolor{stringliteral}{"{}LZ4\_initStream"{}});}
\DoxyCodeLine{977   \textcolor{keywordflow}{if} (buffer == NULL) \{ \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{978   \textcolor{keywordflow}{if} (size < \textcolor{keyword}{sizeof}(\mbox{\hyperlink{unionLZ4__stream__u}{LZ4\_stream\_t}})) \{ \textcolor{keywordflow}{return} NULL; \}}
\DoxyCodeLine{979   \textcolor{keywordflow}{if} (!\mbox{\hyperlink{Compression_8cpp_ac33d4ec2f474813cee3ee86163eba2ef}{LZ4\_isAligned}}(buffer, \mbox{\hyperlink{Compression_8cpp_adc972484e4b4a228506ba1a99f18661a}{LZ4\_stream\_t\_alignment}}())) \textcolor{keywordflow}{return} NULL;}
\DoxyCodeLine{980   memset(buffer, 0, \textcolor{keyword}{sizeof}(\mbox{\hyperlink{structLZ4__stream__t__internal}{LZ4\_stream\_t\_internal}}));}
\DoxyCodeLine{981   \textcolor{keywordflow}{return} (\mbox{\hyperlink{unionLZ4__stream__u}{LZ4\_stream\_t}} *)buffer;}
\DoxyCodeLine{982 \}}

\end{DoxyCode}


References DEBUGLOG, LZ4\+\_\+is\+Aligned(), and LZ4\+\_\+stream\+\_\+t\+\_\+alignment().



Referenced by LZ4\+\_\+compress\+\_\+fast\+\_\+ext\+State().

\mbox{\Hypertarget{Compression_8cpp_ac33d4ec2f474813cee3ee86163eba2ef}\label{Compression_8cpp_ac33d4ec2f474813cee3ee86163eba2ef}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_isAligned@{LZ4\_isAligned}}
\index{LZ4\_isAligned@{LZ4\_isAligned}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_isAligned()}{LZ4\_isAligned()}}
{\footnotesize\ttfamily static int LZ4\+\_\+is\+Aligned (\begin{DoxyParamCaption}\item[{const void $\ast$}]{ptr,  }\item[{size\+\_\+t}]{alignment }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 75 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{76 \{}
\DoxyCodeLine{77   \textcolor{keywordflow}{return} ((\textcolor{keywordtype}{size\_t})ptr \& (alignment -\/ 1)) == 0;}
\DoxyCodeLine{78 \}}

\end{DoxyCode}


Referenced by LZ4\+\_\+init\+Stream().

\mbox{\Hypertarget{Compression_8cpp_aa8a9ba402bf00e8e6c21691085ae9601}\label{Compression_8cpp_aa8a9ba402bf00e8e6c21691085ae9601}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_isLittleEndian@{LZ4\_isLittleEndian}}
\index{LZ4\_isLittleEndian@{LZ4\_isLittleEndian}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_isLittleEndian()}{LZ4\_isLittleEndian()}}
{\footnotesize\ttfamily static unsigned LZ4\+\_\+is\+Little\+Endian (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 122 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{123 \{}
\DoxyCodeLine{124   \textcolor{keyword}{const} \textcolor{keyword}{union }\{ \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} u; \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} c[4]; \} one = \{ 1 \};   \textcolor{comment}{/* don't use static : performance detrimental */}}
\DoxyCodeLine{125   \textcolor{keywordflow}{return} one.c[0];}
\DoxyCodeLine{126 \}}

\end{DoxyCode}


Referenced by LZ4\+\_\+hash5(), LZ4\+\_\+\+Nb\+Common\+Bytes(), LZ4\+\_\+read\+LE16(), and LZ4\+\_\+write\+LE16().

\mbox{\Hypertarget{Compression_8cpp_ac7c1a188fa7bd65cf4bf9f923040674c}\label{Compression_8cpp_ac7c1a188fa7bd65cf4bf9f923040674c}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_memcpy\_using\_offset@{LZ4\_memcpy\_using\_offset}}
\index{LZ4\_memcpy\_using\_offset@{LZ4\_memcpy\_using\_offset}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_memcpy\_using\_offset()}{LZ4\_memcpy\_using\_offset()}}
{\footnotesize\ttfamily void LZ4\+\_\+memcpy\+\_\+using\+\_\+offset (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{dst\+Ptr,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{src\+Ptr,  }\item[{\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{dst\+End,  }\item[{const size\+\_\+t}]{offset }\end{DoxyParamCaption})}



Definition at line 224 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{225 \{}
\DoxyCodeLine{226   \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} v[8];}
\DoxyCodeLine{227 }
\DoxyCodeLine{228   \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(dstEnd >= dstPtr + \mbox{\hyperlink{Compression_8cpp_a2d835b35b6582451a75dc6ff464a9e75}{MINMATCH}});}
\DoxyCodeLine{229 }
\DoxyCodeLine{230   \textcolor{keywordflow}{switch} (offset) \{}
\DoxyCodeLine{231   \textcolor{keywordflow}{case} 1:}
\DoxyCodeLine{232     memset(v, *srcPtr, 8);}
\DoxyCodeLine{233     \textcolor{keywordflow}{break};}
\DoxyCodeLine{234   \textcolor{keywordflow}{case} 2:}
\DoxyCodeLine{235     \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(v, srcPtr, 2);}
\DoxyCodeLine{236     \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(\&v[2], srcPtr, 2);}
\DoxyCodeLine{237     \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(\&v[4], v, 4);}
\DoxyCodeLine{238     \textcolor{keywordflow}{break};}
\DoxyCodeLine{239   \textcolor{keywordflow}{case} 4:}
\DoxyCodeLine{240     \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(v, srcPtr, 4);}
\DoxyCodeLine{241     \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(\&v[4], srcPtr, 4);}
\DoxyCodeLine{242     \textcolor{keywordflow}{break};}
\DoxyCodeLine{243   \textcolor{keywordflow}{default}:}
\DoxyCodeLine{244     \mbox{\hyperlink{Compression_8cpp_a4623ba84527053b711afd61375ac7d10}{LZ4\_memcpy\_using\_offset\_base}}(dstPtr, srcPtr, dstEnd, offset);}
\DoxyCodeLine{245     \textcolor{keywordflow}{return};}
\DoxyCodeLine{246   \}}
\DoxyCodeLine{247 }
\DoxyCodeLine{248   \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(dstPtr, v, 8);}
\DoxyCodeLine{249   dstPtr += 8;}
\DoxyCodeLine{250   \textcolor{keywordflow}{while} (dstPtr < dstEnd) \{}
\DoxyCodeLine{251     \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(dstPtr, v, 8);}
\DoxyCodeLine{252     dstPtr += 8;}
\DoxyCodeLine{253   \}}
\DoxyCodeLine{254 \}}

\end{DoxyCode}


References assert, LZ4\+\_\+memcpy, LZ4\+\_\+memcpy\+\_\+using\+\_\+offset\+\_\+base(), and MINMATCH.



Referenced by LZ4\+\_\+decompress\+\_\+generic().

\mbox{\Hypertarget{Compression_8cpp_a4623ba84527053b711afd61375ac7d10}\label{Compression_8cpp_a4623ba84527053b711afd61375ac7d10}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_memcpy\_using\_offset\_base@{LZ4\_memcpy\_using\_offset\_base}}
\index{LZ4\_memcpy\_using\_offset\_base@{LZ4\_memcpy\_using\_offset\_base}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_memcpy\_using\_offset\_base()}{LZ4\_memcpy\_using\_offset\_base()}}
{\footnotesize\ttfamily void LZ4\+\_\+memcpy\+\_\+using\+\_\+offset\+\_\+base (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{dst\+Ptr,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{src\+Ptr,  }\item[{\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{dst\+End,  }\item[{const size\+\_\+t}]{offset }\end{DoxyParamCaption})}



Definition at line 187 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{188 \{}
\DoxyCodeLine{189   \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(srcPtr + offset == dstPtr);}
\DoxyCodeLine{190   \textcolor{keywordflow}{if} (offset < 8) \{}
\DoxyCodeLine{191     \mbox{\hyperlink{Compression_8cpp_a2e50fa2df2ee7536797308f96806df83}{LZ4\_write32}}(dstPtr, 0);   \textcolor{comment}{/* silence an msan warning when offset==0 */}}
\DoxyCodeLine{192     dstPtr[0] = srcPtr[0];}
\DoxyCodeLine{193     dstPtr[1] = srcPtr[1];}
\DoxyCodeLine{194     dstPtr[2] = srcPtr[2];}
\DoxyCodeLine{195     dstPtr[3] = srcPtr[3];}
\DoxyCodeLine{196     srcPtr += \mbox{\hyperlink{Compression_8cpp_a451c82499501c4916ad44f7c1202f88a}{inc32table}}[offset];}
\DoxyCodeLine{197     \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(dstPtr + 4, srcPtr, 4);}
\DoxyCodeLine{198     srcPtr -\/= \mbox{\hyperlink{Compression_8cpp_a541b3dda85be857eac8aabcf43ee83d8}{dec64table}}[offset];}
\DoxyCodeLine{199     dstPtr += 8;}
\DoxyCodeLine{200   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{201     \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(dstPtr, srcPtr, 8);}
\DoxyCodeLine{202     dstPtr += 8;}
\DoxyCodeLine{203     srcPtr += 8;}
\DoxyCodeLine{204   \}}
\DoxyCodeLine{205 }
\DoxyCodeLine{206   \mbox{\hyperlink{Compression_8cpp_a107b5345286641379a50762ff7f5e906}{LZ4\_wildCopy8}}(dstPtr, srcPtr, dstEnd);}
\DoxyCodeLine{207 \}}

\end{DoxyCode}


References assert, dec64table, inc32table, LZ4\+\_\+memcpy, LZ4\+\_\+wild\+Copy8(), and LZ4\+\_\+write32().



Referenced by LZ4\+\_\+memcpy\+\_\+using\+\_\+offset().

\mbox{\Hypertarget{Compression_8cpp_a9a5ac6aa4f9fe1d17496b0deb44babf7}\label{Compression_8cpp_a9a5ac6aa4f9fe1d17496b0deb44babf7}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_NbCommonBytes@{LZ4\_NbCommonBytes}}
\index{LZ4\_NbCommonBytes@{LZ4\_NbCommonBytes}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_NbCommonBytes()}{LZ4\_NbCommonBytes()}}
{\footnotesize\ttfamily static unsigned LZ4\+\_\+\+Nb\+Common\+Bytes (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\+\_\+t}}}]{val }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 260 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{261 \{}
\DoxyCodeLine{262   \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(val != 0);}
\DoxyCodeLine{263   \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_aa8a9ba402bf00e8e6c21691085ae9601}{LZ4\_isLittleEndian}}()) \{}
\DoxyCodeLine{264     \textcolor{keywordflow}{if} (\textcolor{keyword}{sizeof}(val) == 8) \{}
\DoxyCodeLine{265       \textcolor{comment}{/*-\/*************************************************************************************************}}
\DoxyCodeLine{266 \textcolor{comment}{      * ARM64EC is a Microsoft-\/designed ARM64 ABI compatible with AMD64 applications on ARM64 Windows 11.}}
\DoxyCodeLine{267 \textcolor{comment}{      * The ARM64EC ABI does not support AVX/AVX2/AVX512 instructions, nor their relevant intrinsics}}
\DoxyCodeLine{268 \textcolor{comment}{      * including \_tzcnt\_u64. Therefore, we need to neuter the \_tzcnt\_u64 code path for ARM64EC.}}
\DoxyCodeLine{269 \textcolor{comment}{      ****************************************************************************************************/}}
\DoxyCodeLine{270       \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}{U64}} m = 0x0101010101010101ULL;}
\DoxyCodeLine{271       val \string^= val -\/ 1;}
\DoxyCodeLine{272       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned})(((\mbox{\hyperlink{Compression_8cpp_a25809e0734a149248fcf5831efa4e33d}{U64}})((val \& (m -\/ 1)) * m)) >> 56);}
\DoxyCodeLine{273     \} \textcolor{keywordflow}{else} \textcolor{comment}{/* 32 bits */} \{}
\DoxyCodeLine{274       \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} m = 0x01010101;}
\DoxyCodeLine{275       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned})((((val -\/ 1) \string^ val) \& (m -\/ 1)) * m) >> 24;}
\DoxyCodeLine{276     \}}
\DoxyCodeLine{277   \} \textcolor{keywordflow}{else}   \textcolor{comment}{/* Big Endian CPU */} \{}
\DoxyCodeLine{278     \textcolor{keywordflow}{if} (\textcolor{keyword}{sizeof}(val) == 8) \{}
\DoxyCodeLine{279       \textcolor{comment}{/* this method doesn't consume memory space like the previous one,}}
\DoxyCodeLine{280 \textcolor{comment}{       * but it contains several branches,}}
\DoxyCodeLine{281 \textcolor{comment}{       * that may end up slowing execution */}}
\DoxyCodeLine{282       \textcolor{keyword}{static} \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} by32 = \textcolor{keyword}{sizeof}(val) * 4;  \textcolor{comment}{/* 32 on 64 bits (goal), 16 on 32 bits.}}
\DoxyCodeLine{283 \textcolor{comment}{      Just to avoid some static analyzer complaining about shift by 32 on 32-\/bits target.}}
\DoxyCodeLine{284 \textcolor{comment}{      Note that this code path is never triggered in 32-\/bits mode. */}}
\DoxyCodeLine{285       \textcolor{keywordtype}{unsigned} r;}
\DoxyCodeLine{286       \textcolor{keywordflow}{if} (!(val >> by32)) \{ r = 4; \} \textcolor{keywordflow}{else} \{ r = 0; val >>= by32; \}}
\DoxyCodeLine{287       \textcolor{keywordflow}{if} (!(val >> 16)) \{ r += 2; val >>= 8; \} \textcolor{keywordflow}{else} \{ val >>= 24; \}}
\DoxyCodeLine{288       r += (!val);}
\DoxyCodeLine{289       \textcolor{keywordflow}{return} r;}
\DoxyCodeLine{290     \} \textcolor{keywordflow}{else} \textcolor{comment}{/* 32 bits */} \{}
\DoxyCodeLine{291       val >>= 8;}
\DoxyCodeLine{292       val = ((((val + 0x00FFFF00) | 0x00FFFFFF) + val) |}
\DoxyCodeLine{293         (val + 0x00FF0000)) >> 24;}
\DoxyCodeLine{294       \textcolor{keywordflow}{return} (\textcolor{keywordtype}{unsigned})val \string^ 3;}
\DoxyCodeLine{295     \}}
\DoxyCodeLine{296   \}}
\DoxyCodeLine{297 \}}

\end{DoxyCode}


References assert, and LZ4\+\_\+is\+Little\+Endian().



Referenced by LZ4\+\_\+count().

\mbox{\Hypertarget{Compression_8cpp_afb1abdff740d4120870a053ff9afb1e5}\label{Compression_8cpp_afb1abdff740d4120870a053ff9afb1e5}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_putIndexOnHash@{LZ4\_putIndexOnHash}}
\index{LZ4\_putIndexOnHash@{LZ4\_putIndexOnHash}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_putIndexOnHash()}{LZ4\_putIndexOnHash()}}
{\footnotesize\ttfamily void LZ4\+\_\+put\+Index\+On\+Hash (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}}]{idx,  }\item[{\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}}]{h,  }\item[{void $\ast$}]{table\+Base,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const}]{table\+Type }\end{DoxyParamCaption})}



Definition at line 412 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{413 \{}
\DoxyCodeLine{414   \textcolor{keywordflow}{switch} (tableType) \{}
\DoxyCodeLine{415   \textcolor{keywordflow}{default}: \textcolor{comment}{/* fallthrough */}}
\DoxyCodeLine{416   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a160636a34765ad36416d316e62406d31}{clearedTable}}: \textcolor{comment}{/* fallthrough */}}
\DoxyCodeLine{417   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}}: \{ \textcolor{comment}{/* illegal! */} \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(0); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{418   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}}: \{ \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *hashTable = (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *)tableBase; hashTable[h] = idx; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{419   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}: \{ \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *hashTable = (\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *)tableBase; \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(idx < 65536); hashTable[h] = (\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}})idx; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{420   \}}
\DoxyCodeLine{421 \}}

\end{DoxyCode}


References assert, by\+Ptr, by\+U16, by\+U32, and cleared\+Table.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

\mbox{\Hypertarget{Compression_8cpp_a758ae6d5b0a32072c833b9a03be20a37}\label{Compression_8cpp_a758ae6d5b0a32072c833b9a03be20a37}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_putPosition@{LZ4\_putPosition}}
\index{LZ4\_putPosition@{LZ4\_putPosition}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_putPosition()}{LZ4\_putPosition()}}
{\footnotesize\ttfamily void LZ4\+\_\+put\+Position (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{p,  }\item[{void $\ast$}]{table\+Base,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}}}]{table\+Type,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{src\+Base }\end{DoxyParamCaption})}



Definition at line 435 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{436 \{}
\DoxyCodeLine{437   \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} \textcolor{keyword}{const} h = \mbox{\hyperlink{Compression_8cpp_a70b1bbe91862d5cb5e473ce2deb556a7}{LZ4\_hashPosition}}(p, tableType);}
\DoxyCodeLine{438   \mbox{\hyperlink{Compression_8cpp_ac31271a152c15422122862ef508fe13a}{LZ4\_putPositionOnHash}}(p, h, tableBase, tableType, srcBase);}
\DoxyCodeLine{439 \}}

\end{DoxyCode}


References LZ4\+\_\+hash\+Position(), and LZ4\+\_\+put\+Position\+On\+Hash().



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

\mbox{\Hypertarget{Compression_8cpp_ac31271a152c15422122862ef508fe13a}\label{Compression_8cpp_ac31271a152c15422122862ef508fe13a}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_putPositionOnHash@{LZ4\_putPositionOnHash}}
\index{LZ4\_putPositionOnHash@{LZ4\_putPositionOnHash}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_putPositionOnHash()}{LZ4\_putPositionOnHash()}}
{\footnotesize\ttfamily void LZ4\+\_\+put\+Position\+On\+Hash (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{p,  }\item[{\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}}]{h,  }\item[{void $\ast$}]{table\+Base,  }\item[{\mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699}{table\+Type\+\_\+t}} const}]{table\+Type,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{src\+Base }\end{DoxyParamCaption})}



Definition at line 423 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{426 \{}
\DoxyCodeLine{427   \textcolor{keywordflow}{switch} (tableType) \{}
\DoxyCodeLine{428   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a160636a34765ad36416d316e62406d31}{clearedTable}}: \{ \textcolor{comment}{/* illegal! */} \mbox{\hyperlink{Compression_8cpp_acdcc5aaebf3f273c1762f24a6ece2e5e}{assert}}(0); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{429   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a5c952c05e312cfc0589ef1d283397560}{byPtr}}: \{ \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} **hashTable = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} **)tableBase; hashTable[h] = p; \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{430   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699ae7520fe8d6957f5029ddeb0652c65471}{byU32}}: \{ \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *hashTable = (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} *)tableBase; hashTable[h] = (\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}})(p -\/ srcBase); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{431   \textcolor{keywordflow}{case} \mbox{\hyperlink{Compression_8cpp_ae86e1d8a28953326b685d6ebb243a699a48aff40d7237850c996a1f6c266a598f}{byU16}}: \{ \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *hashTable = (\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} *)tableBase; hashTable[h] = (\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}})(p -\/ srcBase); \textcolor{keywordflow}{return}; \}}
\DoxyCodeLine{432   \}}
\DoxyCodeLine{433 \}}

\end{DoxyCode}


References assert, by\+Ptr, by\+U16, by\+U32, and cleared\+Table.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated(), and LZ4\+\_\+put\+Position().

\mbox{\Hypertarget{Compression_8cpp_adceb4c7713e1bed1554da37458db6fb6}\label{Compression_8cpp_adceb4c7713e1bed1554da37458db6fb6}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_read16@{LZ4\_read16}}
\index{LZ4\_read16@{LZ4\_read16}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_read16()}{LZ4\_read16()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} LZ4\+\_\+read16 (\begin{DoxyParamCaption}\item[{const void $\ast$}]{mem\+Ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 128 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{129 \{}
\DoxyCodeLine{130   \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} val; \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(\&val, memPtr, \textcolor{keyword}{sizeof}(val)); \textcolor{keywordflow}{return} val;}
\DoxyCodeLine{131 \}}

\end{DoxyCode}


References LZ4\+\_\+memcpy.



Referenced by LZ4\+\_\+count(), and LZ4\+\_\+read\+LE16().

\mbox{\Hypertarget{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}\label{Compression_8cpp_a91090d7f3d29948be259526ace41da4c}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_read32@{LZ4\_read32}}
\index{LZ4\_read32@{LZ4\_read32}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_read32()}{LZ4\_read32()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} LZ4\+\_\+read32 (\begin{DoxyParamCaption}\item[{const void $\ast$}]{mem\+Ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 133 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{134 \{}
\DoxyCodeLine{135   \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} val; \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(\&val, memPtr, \textcolor{keyword}{sizeof}(val)); \textcolor{keywordflow}{return} val;}
\DoxyCodeLine{136 \}}

\end{DoxyCode}


References LZ4\+\_\+memcpy.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated(), LZ4\+\_\+count(), and LZ4\+\_\+hash\+Position().

\mbox{\Hypertarget{Compression_8cpp_a9f1c5198d0fac6d72364edbb87a390e4}\label{Compression_8cpp_a9f1c5198d0fac6d72364edbb87a390e4}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_read\_ARCH@{LZ4\_read\_ARCH}}
\index{LZ4\_read\_ARCH@{LZ4\_read\_ARCH}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_read\_ARCH()}{LZ4\_read\_ARCH()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\+\_\+t}} LZ4\+\_\+read\+\_\+\+ARCH (\begin{DoxyParamCaption}\item[{const void $\ast$}]{mem\+Ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 138 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{139 \{}
\DoxyCodeLine{140   \mbox{\hyperlink{Compression_8cpp_a2835baf742d73416e69ab571e9a9dacb}{reg\_t}} val; \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(\&val, memPtr, \textcolor{keyword}{sizeof}(val)); \textcolor{keywordflow}{return} val;}
\DoxyCodeLine{141 \}}

\end{DoxyCode}


References LZ4\+\_\+memcpy.



Referenced by LZ4\+\_\+count(), and LZ4\+\_\+hash\+Position().

\mbox{\Hypertarget{Compression_8cpp_a69a8c81f7731ff4ae0d292541bbb2d69}\label{Compression_8cpp_a69a8c81f7731ff4ae0d292541bbb2d69}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_readLE16@{LZ4\_readLE16}}
\index{LZ4\_readLE16@{LZ4\_readLE16}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_readLE16()}{LZ4\_readLE16()}}
{\footnotesize\ttfamily static \mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}} LZ4\+\_\+read\+LE16 (\begin{DoxyParamCaption}\item[{const void $\ast$}]{mem\+Ptr }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 153 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{154 \{}
\DoxyCodeLine{155   \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_aa8a9ba402bf00e8e6c21691085ae9601}{LZ4\_isLittleEndian}}()) \{}
\DoxyCodeLine{156     \textcolor{keywordflow}{return} \mbox{\hyperlink{Compression_8cpp_adceb4c7713e1bed1554da37458db6fb6}{LZ4\_read16}}(memPtr);}
\DoxyCodeLine{157   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{158     \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *p = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)memPtr;}
\DoxyCodeLine{159     \textcolor{keywordflow}{return} (\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}})((\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}})p[0] + (p[1] << 8));}
\DoxyCodeLine{160   \}}
\DoxyCodeLine{161 \}}

\end{DoxyCode}


References LZ4\+\_\+is\+Little\+Endian(), and LZ4\+\_\+read16().



Referenced by LZ4\+\_\+decompress\+\_\+generic().

\mbox{\Hypertarget{Compression_8cpp_adc972484e4b4a228506ba1a99f18661a}\label{Compression_8cpp_adc972484e4b4a228506ba1a99f18661a}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_stream\_t\_alignment@{LZ4\_stream\_t\_alignment}}
\index{LZ4\_stream\_t\_alignment@{LZ4\_stream\_t\_alignment}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_stream\_t\_alignment()}{LZ4\_stream\_t\_alignment()}}
{\footnotesize\ttfamily static size\+\_\+t LZ4\+\_\+stream\+\_\+t\+\_\+alignment (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 964 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{965 \{}
\DoxyCodeLine{966 \textcolor{preprocessor}{\#if LZ4\_ALIGN\_TEST}}
\DoxyCodeLine{967   \textcolor{keyword}{typedef} \textcolor{keyword}{struct }\{ \textcolor{keywordtype}{char} c; \mbox{\hyperlink{unionLZ4__stream__u}{LZ4\_stream\_t}} t; \} t\_a;}
\DoxyCodeLine{968   \textcolor{keywordflow}{return} \textcolor{keyword}{sizeof}(t\_a) -\/ \textcolor{keyword}{sizeof}(\mbox{\hyperlink{unionLZ4__stream__u}{LZ4\_stream\_t}});}
\DoxyCodeLine{969 \textcolor{preprocessor}{\#else}}
\DoxyCodeLine{970   \textcolor{keywordflow}{return} 1;  \textcolor{comment}{/* effectively disabled */}}
\DoxyCodeLine{971 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{972 \}}

\end{DoxyCode}


Referenced by LZ4\+\_\+init\+Stream().

\mbox{\Hypertarget{Compression_8cpp_a5279938c8ccf6c4a556db8eecd1190a8}\label{Compression_8cpp_a5279938c8ccf6c4a556db8eecd1190a8}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_wildCopy32@{LZ4\_wildCopy32}}
\index{LZ4\_wildCopy32@{LZ4\_wildCopy32}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_wildCopy32()}{LZ4\_wildCopy32()}}
{\footnotesize\ttfamily void LZ4\+\_\+wild\+Copy32 (\begin{DoxyParamCaption}\item[{void $\ast$}]{dst\+Ptr,  }\item[{const void $\ast$}]{src\+Ptr,  }\item[{void $\ast$}]{dst\+End }\end{DoxyParamCaption})}



Definition at line 212 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{213 \{}
\DoxyCodeLine{214   \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *d = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)dstPtr;}
\DoxyCodeLine{215   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *s = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)srcPtr;}
\DoxyCodeLine{216   \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} e = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)dstEnd;}
\DoxyCodeLine{217 }
\DoxyCodeLine{218   \textcolor{keywordflow}{do} \{ \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(d, s, 16); \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(d + 16, s + 16, 16); d += 32; s += 32; \} \textcolor{keywordflow}{while} (d < e);}
\DoxyCodeLine{219 \}}

\end{DoxyCode}


References LZ4\+\_\+memcpy.



Referenced by LZ4\+\_\+decompress\+\_\+generic().

\mbox{\Hypertarget{Compression_8cpp_a107b5345286641379a50762ff7f5e906}\label{Compression_8cpp_a107b5345286641379a50762ff7f5e906}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_wildCopy8@{LZ4\_wildCopy8}}
\index{LZ4\_wildCopy8@{LZ4\_wildCopy8}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_wildCopy8()}{LZ4\_wildCopy8()}}
{\footnotesize\ttfamily void LZ4\+\_\+wild\+Copy8 (\begin{DoxyParamCaption}\item[{void $\ast$}]{dst\+Ptr,  }\item[{const void $\ast$}]{src\+Ptr,  }\item[{void $\ast$}]{dst\+End }\end{DoxyParamCaption})}



Definition at line 175 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{176 \{}
\DoxyCodeLine{177   \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *d = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)dstPtr;}
\DoxyCodeLine{178   \textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *s = (\textcolor{keyword}{const} \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)srcPtr;}
\DoxyCodeLine{179   \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *\textcolor{keyword}{const} e = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)dstEnd;}
\DoxyCodeLine{180 }
\DoxyCodeLine{181   \textcolor{keywordflow}{do} \{ \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(d, s, 8); d += 8; s += 8; \} \textcolor{keywordflow}{while} (d < e);}
\DoxyCodeLine{182 \}}

\end{DoxyCode}


References LZ4\+\_\+memcpy.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated(), LZ4\+\_\+decompress\+\_\+generic(), and LZ4\+\_\+memcpy\+\_\+using\+\_\+offset\+\_\+base().

\mbox{\Hypertarget{Compression_8cpp_abdc399170f6061c35dd18315896339f8}\label{Compression_8cpp_abdc399170f6061c35dd18315896339f8}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_write16@{LZ4\_write16}}
\index{LZ4\_write16@{LZ4\_write16}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_write16()}{LZ4\_write16()}}
{\footnotesize\ttfamily static void LZ4\+\_\+write16 (\begin{DoxyParamCaption}\item[{void $\ast$}]{mem\+Ptr,  }\item[{\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}}}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 143 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{144 \{}
\DoxyCodeLine{145   \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(memPtr, \&value, \textcolor{keyword}{sizeof}(value));}
\DoxyCodeLine{146 \}}

\end{DoxyCode}


References LZ4\+\_\+memcpy.



Referenced by LZ4\+\_\+write\+LE16().

\mbox{\Hypertarget{Compression_8cpp_a2e50fa2df2ee7536797308f96806df83}\label{Compression_8cpp_a2e50fa2df2ee7536797308f96806df83}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_write32@{LZ4\_write32}}
\index{LZ4\_write32@{LZ4\_write32}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_write32()}{LZ4\_write32()}}
{\footnotesize\ttfamily static void LZ4\+\_\+write32 (\begin{DoxyParamCaption}\item[{void $\ast$}]{mem\+Ptr,  }\item[{\mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}}}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 148 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{149 \{}
\DoxyCodeLine{150   \mbox{\hyperlink{Compression_8cpp_a5ed8599ff9813a458df4a9d4d81bef58}{LZ4\_memcpy}}(memPtr, \&value, \textcolor{keyword}{sizeof}(value));}
\DoxyCodeLine{151 \}}

\end{DoxyCode}


References LZ4\+\_\+memcpy.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated(), LZ4\+\_\+decompress\+\_\+generic(), and LZ4\+\_\+memcpy\+\_\+using\+\_\+offset\+\_\+base().

\mbox{\Hypertarget{Compression_8cpp_a3a6a0833a6f5ee0e99c80cbae73ca3a7}\label{Compression_8cpp_a3a6a0833a6f5ee0e99c80cbae73ca3a7}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_writeLE16@{LZ4\_writeLE16}}
\index{LZ4\_writeLE16@{LZ4\_writeLE16}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_writeLE16()}{LZ4\_writeLE16()}}
{\footnotesize\ttfamily static void LZ4\+\_\+write\+LE16 (\begin{DoxyParamCaption}\item[{void $\ast$}]{mem\+Ptr,  }\item[{\mbox{\hyperlink{Compression_8cpp_a0a0a322d5fa4a546d293a77ba8b4a71f}{U16}}}]{value }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 163 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{164 \{}
\DoxyCodeLine{165   \textcolor{keywordflow}{if} (\mbox{\hyperlink{Compression_8cpp_aa8a9ba402bf00e8e6c21691085ae9601}{LZ4\_isLittleEndian}}()) \{}
\DoxyCodeLine{166     \mbox{\hyperlink{Compression_8cpp_abdc399170f6061c35dd18315896339f8}{LZ4\_write16}}(memPtr, value);}
\DoxyCodeLine{167   \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{168     \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *p = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} *)memPtr;}
\DoxyCodeLine{169     p[0] = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}})value;}
\DoxyCodeLine{170     p[1] = (\mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}})(value >> 8);}
\DoxyCodeLine{171   \}}
\DoxyCodeLine{172 \}}

\end{DoxyCode}


References LZ4\+\_\+is\+Little\+Endian(), and LZ4\+\_\+write16().



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

\mbox{\Hypertarget{Compression_8cpp_a5c5ad2e93f6fef517f3227f90e0791b1}\label{Compression_8cpp_a5c5ad2e93f6fef517f3227f90e0791b1}} 
\index{Compression.cpp@{Compression.cpp}!read\_variable\_length@{read\_variable\_length}}
\index{read\_variable\_length@{read\_variable\_length}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{read\_variable\_length()}{read\_variable\_length()}}
{\footnotesize\ttfamily unsigned read\+\_\+variable\+\_\+length (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$$\ast$}]{ip,  }\item[{const \mbox{\hyperlink{Compression_8cpp_aae9749d96e15ccb4f482dd5f55d98f9b}{BYTE}} $\ast$}]{lencheck,  }\item[{int}]{loop\+\_\+check,  }\item[{int}]{initial\+\_\+check,  }\item[{\mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3}{variable\+\_\+length\+\_\+error}} $\ast$}]{error }\end{DoxyParamCaption})}



Definition at line 1004 of file Compression.\+cpp.


\begin{DoxyCode}{0}
\DoxyCodeLine{1007 \{}
\DoxyCodeLine{1008   \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} length = 0;}
\DoxyCodeLine{1009   \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} s;}
\DoxyCodeLine{1010   \textcolor{keywordflow}{if} (initial\_check \&\& \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}((*ip) >= lencheck)) \{    \textcolor{comment}{/* overflow detection */}}
\DoxyCodeLine{1011     *error = \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a4dd6136f5d290f53a4ac8864c0a12f99}{initial\_error}};}
\DoxyCodeLine{1012     \textcolor{keywordflow}{return} length;}
\DoxyCodeLine{1013   \}}
\DoxyCodeLine{1014   \textcolor{keywordflow}{do} \{}
\DoxyCodeLine{1015     s = **ip;}
\DoxyCodeLine{1016     (*ip)++;}
\DoxyCodeLine{1017     length += s;}
\DoxyCodeLine{1018     \textcolor{keywordflow}{if} (loop\_check \&\& \mbox{\hyperlink{Compression_8cpp_ad8700448546b3b5111404cc021061fd5}{unlikely}}((*ip) >= lencheck)) \{    \textcolor{comment}{/* overflow detection */}}
\DoxyCodeLine{1019       *error = \mbox{\hyperlink{Compression_8cpp_a9d0df14b4296f06cf7c7b141f26d29b3a19c5cc5c8516ea67ef3b2ec2de6fc484}{loop\_error}};}
\DoxyCodeLine{1020       \textcolor{keywordflow}{return} length;}
\DoxyCodeLine{1021     \}}
\DoxyCodeLine{1022   \} \textcolor{keywordflow}{while} (s == 255);}
\DoxyCodeLine{1023 }
\DoxyCodeLine{1024   \textcolor{keywordflow}{return} length;}
\DoxyCodeLine{1025 \}}

\end{DoxyCode}


References initial\+\_\+error, loop\+\_\+error, and unlikely.



Referenced by LZ4\+\_\+decompress\+\_\+generic().



\doxysubsection{Variable Documentation}
\mbox{\Hypertarget{Compression_8cpp_a541b3dda85be857eac8aabcf43ee83d8}\label{Compression_8cpp_a541b3dda85be857eac8aabcf43ee83d8}} 
\index{Compression.cpp@{Compression.cpp}!dec64table@{dec64table}}
\index{dec64table@{dec64table}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{dec64table}{dec64table}}
{\footnotesize\ttfamily const int dec64table\mbox{[}8\mbox{]} = \{ 0, 0, 0, -\/1, -\/4, 1, 2, 3 \}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 185 of file Compression.\+cpp.



Referenced by LZ4\+\_\+decompress\+\_\+generic(), and LZ4\+\_\+memcpy\+\_\+using\+\_\+offset\+\_\+base().

\mbox{\Hypertarget{Compression_8cpp_a451c82499501c4916ad44f7c1202f88a}\label{Compression_8cpp_a451c82499501c4916ad44f7c1202f88a}} 
\index{Compression.cpp@{Compression.cpp}!inc32table@{inc32table}}
\index{inc32table@{inc32table}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{inc32table}{inc32table}}
{\footnotesize\ttfamily const unsigned inc32table\mbox{[}8\mbox{]} = \{ 0, 1, 2, 1, 0, 4, 4, 4 \}\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 184 of file Compression.\+cpp.



Referenced by LZ4\+\_\+decompress\+\_\+generic(), and LZ4\+\_\+memcpy\+\_\+using\+\_\+offset\+\_\+base().

\mbox{\Hypertarget{Compression_8cpp_ac55e8e70f9d03d1f06d823de23222fee}\label{Compression_8cpp_ac55e8e70f9d03d1f06d823de23222fee}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_64Klimit@{LZ4\_64Klimit}}
\index{LZ4\_64Klimit@{LZ4\_64Klimit}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_64Klimit}{LZ4\_64Klimit}}
{\footnotesize\ttfamily const int LZ4\+\_\+64\+Klimit = ((64 \mbox{\hyperlink{Compression_8cpp_a1841fd1a462d245d8c73dce55e2f45da}{KB}}) + (\mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}} -\/ 1))\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 331 of file Compression.\+cpp.



Referenced by LZ4\+\_\+compress\+\_\+fast\+\_\+ext\+State(), and LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

\mbox{\Hypertarget{Compression_8cpp_a008b9fd5094e20eec7d8f504530d113c}\label{Compression_8cpp_a008b9fd5094e20eec7d8f504530d113c}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_minLength@{LZ4\_minLength}}
\index{LZ4\_minLength@{LZ4\_minLength}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_minLength}{LZ4\_minLength}}
{\footnotesize\ttfamily const int LZ4\+\_\+min\+Length = (\mbox{\hyperlink{Compression_8cpp_a6bb5847a99cd90aca07870a394cbe70d}{MFLIMIT}} + 1)\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 44 of file Compression.\+cpp.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

\mbox{\Hypertarget{Compression_8cpp_aa32dfc3b58308fccc1eb52d8aa2c7e3c}\label{Compression_8cpp_aa32dfc3b58308fccc1eb52d8aa2c7e3c}} 
\index{Compression.cpp@{Compression.cpp}!LZ4\_skipTrigger@{LZ4\_skipTrigger}}
\index{LZ4\_skipTrigger@{LZ4\_skipTrigger}!Compression.cpp@{Compression.cpp}}
\doxysubsubsection{\texorpdfstring{LZ4\_skipTrigger}{LZ4\_skipTrigger}}
{\footnotesize\ttfamily const \mbox{\hyperlink{Compression_8cpp_a696390429f2f3b644bde8d0322a24124}{U32}} LZ4\+\_\+skip\+Trigger = 6\hspace{0.3cm}{\ttfamily [static]}}



Definition at line 332 of file Compression.\+cpp.



Referenced by LZ4\+\_\+compress\+\_\+generic\+\_\+validated().

